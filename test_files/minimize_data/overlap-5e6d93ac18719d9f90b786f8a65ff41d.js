webpackJsonp(["overlap-5e6d93ac18719d9f90b786f8a65ff41d"],{"./assets/fonts/BentonSans/font.less":function(e,n){},"./node_modules/agentkeepalive/browser.js":function(e,n){function t(){}e.exports=t,e.exports.HttpsAgent=t},"./node_modules/form-data/lib/browser.js":function(e,n){e.exports="object"==typeof self?self.FormData:window.FormData},"./node_modules/lodash/_baseDifference.js":function(e,n,t){function r(e,n,t,r){var d=-1,f=o,h=!0,p=e.length,m=[],g=n.length;if(!p)return m;t&&(n=s(n,c(t))),r?(f=i,h=!1):n.length>=l&&(f=u,h=!1,n=new a(n));e:for(;++d<p;){var v=e[d],b=null==t?v:t(v);if(v=r||0!==v?v:0,h&&b===b){for(var _=g;_--;)if(n[_]===b)continue e;m.push(v)}else f(n,b,r)||m.push(v)}return m}var a=t("./node_modules/lodash/_SetCache.js"),o=t("./node_modules/lodash/_arrayIncludes.js"),i=t("./node_modules/lodash/_arrayIncludesWith.js"),s=t("./node_modules/lodash/_arrayMap.js"),c=t("./node_modules/lodash/_baseUnary.js"),u=t("./node_modules/lodash/_cacheHas.js"),l=200;e.exports=r},"./node_modules/lodash/difference.js":function(e,n,t){var r=t("./node_modules/lodash/_baseDifference.js"),a=t("./node_modules/lodash/_baseFlatten.js"),o=t("./node_modules/lodash/_baseRest.js"),i=t("./node_modules/lodash/isArrayLikeObject.js"),s=o(function(e,n){return i(e)?r(e,a(n,1,i,!0)):[]});e.exports=s},"./node_modules/lodash/first.js":function(e,n,t){e.exports=t("./node_modules/lodash/head.js")},"./node_modules/lodash/head.js":function(e,n){function t(e){return e&&e.length?e[0]:void 0}e.exports=t},"./node_modules/lodash/uniq.js":function(e,n,t){function r(e){return e&&e.length?a(e):[]}var a=t("./node_modules/lodash/_baseUniq.js");e.exports=r},"./node_modules/lodash/uniqBy.js":function(e,n,t){function r(e,n){return e&&e.length?o(e,a(n,2)):[]}var a=t("./node_modules/lodash/_baseIteratee.js"),o=t("./node_modules/lodash/_baseUniq.js");e.exports=r},"./node_modules/polished/dist/polished.es.js":function(e,n,t){"use strict";function r(e){return Math.round(255*e)}function a(e,n,t){return r(e)+","+r(n)+","+r(t)}function o(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a;if(0===n)return r(t,t,t);var o=e%360/60,i=(1-Math.abs(2*t-1))*n,s=i*(1-Math.abs(o%2-1)),c=0,u=0,l=0;o>=0&&o<1?(c=i,u=s):o>=1&&o<2?(c=s,u=i):o>=2&&o<3?(u=i,l=s):o>=3&&o<4?(u=s,l=i):o>=4&&o<5?(c=s,l=i):o>=5&&o<6&&(c=i,l=s);var d=t-i/2;return r(c+d,u+d,l+d)}function i(e){if("string"!=typeof e)return e;var n=e.toLowerCase();return U[n]?"#"+U[n]:e}function s(e){if("string"!=typeof e)throw new Error("Passed an incorrect argument to a color function, please pass a string representation of a color.");var n=i(e);if(n.match(k))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(L))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};var t=M.exec(n);if(t)return{red:parseInt(""+t[1],10),green:parseInt(""+t[2],10),blue:parseInt(""+t[3],10)};var r=D.exec(n);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10),alpha:parseFloat(""+r[4])};var a=H.exec(n);if(a){var s=parseInt(""+a[1],10),c=parseInt(""+a[2],10)/100,u=parseInt(""+a[3],10)/100,l="rgb("+o(s,c,u)+")",d=M.exec(l);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)}}var f=G.exec(n);if(f){var h=parseInt(""+f[1],10),p=parseInt(""+f[2],10)/100,m=parseInt(""+f[3],10)/100,g="rgb("+o(h,p,m)+")",v=M.exec(g);return{red:parseInt(""+v[1],10),green:parseInt(""+v[2],10),blue:parseInt(""+v[3],10),alpha:parseFloat(""+f[4])}}throw new Error("Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.")}function c(e){var n=e.red/255,t=e.green/255,r=e.blue/255,a=Math.max(n,t,r),o=Math.min(n,t,r),i=(a+o)/2;if(a===o)return void 0!==e.alpha?{hue:0,saturation:0,lightness:i,alpha:e.alpha}:{hue:0,saturation:0,lightness:i};var s=void 0,c=a-o,u=i>.5?c/(2-a-o):c/(a+o);switch(a){case n:s=(t-r)/c+(t<r?6:0);break;case t:s=(r-n)/c+2;break;default:s=(n-t)/c+4}return s*=60,void 0!==e.alpha?{hue:s,saturation:u,lightness:i,alpha:e.alpha}:{hue:s,saturation:u,lightness:i}}function u(e){return c(s(e))}function l(e){var n=e.toString(16);return 1===n.length?"0"+n:n}function d(e,n,t){if("number"==typeof e&&"number"==typeof n&&"number"==typeof t)return F("#"+l(e)+l(n)+l(t));if("object"===(void 0===e?"undefined":P(e))&&void 0===n&&void 0===t)return F("#"+l(e.red)+l(e.green)+l(e.blue));throw new Error("Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).")}function f(e,n,t,r){if("string"==typeof e&&"number"==typeof n){var a=s(e);return"rgba("+a.red+","+a.green+","+a.blue+","+n+")"}if("number"==typeof e&&"number"==typeof n&&"number"==typeof t&&"number"==typeof r)return r>=1?d(e,n,t):"rgba("+e+","+n+","+t+","+r+")";if("object"===(void 0===e?"undefined":P(e))&&void 0===n&&void 0===t&&void 0===r)return e.alpha>=1?d(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Error("Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).")}function h(e){return l(Math.round(255*e))}function p(e,n,t){return F("#"+h(e)+h(n)+h(t))}function m(e,n,t){return o(e,n,t,p)}function g(e,n,t){if("number"==typeof e&&"number"==typeof n&&"number"==typeof t)return m(e,n,t);if("object"===(void 0===e?"undefined":P(e))&&void 0===n&&void 0===t)return m(e.hue,e.saturation,e.lightness);throw new Error("Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).")}function v(e,n,t,r){if("number"==typeof e&&"number"==typeof n&&"number"==typeof t&&"number"==typeof r)return r>=1?m(e,n,t):"rgba("+o(e,n,t)+","+r+")";if("object"===(void 0===e?"undefined":P(e))&&void 0===n&&void 0===t&&void 0===r)return e.alpha>=1?m(e.hue,e.saturation,e.lightness):"rgba("+o(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new Error("Passed invalid arguments to hsla, please pass multiple numbers e.g. hsl(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).")}function b(e){if("object"!==(void 0===e?"undefined":P(e)))throw new Error(K);if(V(e))return f(e);if(B(e))return d(e);if(q(e))return v(e);if(z(e))return g(e);throw new Error(K)}function _(e,n,t){return function(){var r=t.concat(Array.prototype.slice.call(arguments));return r.length>=n?e.apply(this,r):_(e,n,r)}}function y(e){return _(e,e.length,[])}function E(e,n,t){return Math.max(e,Math.min(n,t))}function I(e,n){var t=u(n);return b(x({},t,{lightness:E(0,1,t.lightness-e)}))}function C(e){var n=s(e),t=Object.keys(n).map(function(e){var t=n[e]/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*t[0]+.7152*t[1]+.0722*t[2]}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments[1],t=arguments[2],r=s(n),a=x({},r,{alpha:"number"==typeof r.alpha?r.alpha:1}),o=s(t),i=x({},o,{alpha:"number"==typeof o.alpha?o.alpha:1}),c=a.alpha-i.alpha,u=2*e-1,l=u*c==-1?u:u+c,d=1+u*c,h=(l/d+1)/2,p=1-h;return f({red:Math.floor(a.red*h+i.red*p),green:Math.floor(a.green*h+i.green*p),blue:Math.floor(a.blue*h+i.blue*p),alpha:a.alpha+(i.alpha-a.alpha)*(e/1)})}function A(e,n){return b(x({},u(n),{lightness:e}))}function N(e,n){if("number"!=typeof e||e>1||e<-1)throw new Error("Passed an incorrect argument to shade, please pass a percentage less than or equal to 1 and larger than or equal to -1.");if("string"!=typeof n)throw new Error("Passed an incorrect argument to a color function, please pass a string representation of a color.");return W(e,n,"rgb(0, 0, 0)")}function S(e,n){if("number"!=typeof e||e>1||e<-1)throw new Error("Passed an incorrect argument to tint, please pass a percentage less than or equal to 1 and larger than or equal to -1.");if("string"!=typeof n)throw new Error("Passed an incorrect argument to a color function, please pass a string representation of a color.");return W(e,n,"rgb(255, 255, 255)")}function w(e,n){var t=s(n),r="number"==typeof t.alpha?t.alpha:1;return f(x({},t,{alpha:E(0,1,(100*r-100*e)/100)}))}t.d(n,"a",function(){return Y}),t.d(n,"b",function(){return C}),t.d(n,"c",function(){return W}),t.d(n,"d",function(){return s}),t.d(n,"e",function(){return f}),t.d(n,"f",function(){return Q}),t.d(n,"g",function(){return J}),t.d(n,"h",function(){return $}),t.d(n,"i",function(){return b}),t.d(n,"j",function(){return Z});var R,j,T,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},U=(R={html:{fontFamily:"sans-serif"},body:{margin:"0"}},R["a:active,\n  a:hover"]={outlineWidth:"0"},R["button,\n  input,\n  optgroup,\n  select,\n  textarea"]={fontFamily:"sans-serif",fontSize:"100%",lineHeight:"1.15"},T={html:{lineHeight:"1.15",textSizeAdjust:"100%"}},T["article,\n  aside,\n  footer,\n  header,\n  nav,\n  section"]={display:"block"},T.h1={fontSize:"2em",margin:"0.67em 0"},T["figcaption,\n  figure,\n  main"]={display:"block"},T.figure={margin:"1em 40px"},T.hr={boxSizing:"content-box",height:"0",overflow:"visible"},T.pre={fontFamily:"monospace, monospace",fontSize:"1em"},T.a={"background-color":"transparent","-webkit-text-decoration-skip":"objects"},T["abbr[title]"]=(j={borderBottom:"none",textDecoration:"underline"},j.textDecoration="underline dotted",j),T["b,\n  strong"]={fontWeight:"inherit"},T["code,\n  kbd,\n  samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},T.dfn={fontStyle:"italic"},T.mark={backgroundColor:"#ff0",color:"#000"},T.small={fontSize:"80%"},T["sub,\n  sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},T.sub={bottom:"-0.25em"},T.sup={top:"-0.5em"},T["audio,\n  video"]={display:"inline-block"},T["audio:not([controls])"]={display:"none",height:"0"},T.img={borderStyle:"none"},T["svg:not(:root)"]={overflow:"hidden"},T["button,\n  input,\n  optgroup,\n  select,\n  textarea"]={margin:"0"},T["button,\n  input"]={overflow:"visible"},T["button,\n  select"]={textTransform:"none"},T['button,\n  html [type="button"],\n  [type="reset"],\n  [type="submit"]']={"-webkit-appearance":"button"},T['button::-moz-focus-inner,\n  [type="button"]::-moz-focus-inner,\n  [type="reset"]::-moz-focus-inner,\n  [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},T['button:-moz-focusring,\n  [type="button"]:-moz-focusring,\n  [type="reset"]:-moz-focusring,\n  [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},T.fieldset={border:"1px solid #c0c0c0",margin:"0 2px",padding:"0.35em 0.625em 0.75em"},T.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},T.progress={display:"inline-block",verticalAlign:"baseline"},T.textarea={overflow:"auto"},T['[type="checkbox"],\n  [type="radio"]']={boxSizing:"border-box",padding:"0"},T['[type="number"]::-webkit-inner-spin-button,\n  [type="number"]::-webkit-outer-spin-button']={height:"auto"},T['[type="search"]']={"-webkit-appearance":"textfield",outlineOffset:"-2px"},T['[type="search"]::-webkit-search-cancel-button,\n  [type="search"]::-webkit-search-decoration']={"-webkit-appearance":"none"},T["::-webkit-file-upload-button"]={"-webkit-appearance":"button",font:"inherit"},T["details,\n  menu"]={display:"block"},T.summary={display:"list-item"},T.canvas={display:"inline-block"},T.template={display:"none"},T["[hidden]"]={display:"none"},{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"}),k=/^#[a-fA-F0-9]{6}$/,L=/^#[a-fA-F0-9]{3}$/,M=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,D=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/,H=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/,G=/^hsla\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/,F=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},B=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},V=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},z=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},q=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha},K="Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.",Y=y(I),W=y(O),Q=y(A),J=y(N),$=y(S),Z=y(w)},"./node_modules/sendbird/SendBird.min.js":function(n,t,r){!function(e,t){n.exports=t()}(0,function(){function n(){this.oldIE=!0,this.boundary="--------FormData"+Math.random(),this._fields=[]}var t,a=!1,o="wss://ws.sendbird.com",i="https://api.sendbird.com";try{t=window.console||{log:function(){}}}catch(e){t={log:function(){}}}var s="undefined";try{s=navigator.userAgent.replace(/,/g,".")}catch(e){s="undefined"}var c,u="JS,"+s+",3.0.48,",l=function(){try{if(document&&9==document.documentMode)return!0}catch(e){return!1}return!1}(),d=function(){try{if(document&&document.documentMode<=8)return!0}catch(e){return!1}return!1}();if(l||d)"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var n=0;n<this.length;n++)e.apply(this,[this[n],n,this])}),n.prototype.append=function(e,n){this._fields.push([e,n])},n.prototype.toString=function(){var e=this.boundary,n="";return this._fields.forEach(function(t){if(n+="--"+e+"\r\n",t[1].name){var r=t[1];n+="Content-Disposition: form-data; name='"+t[0]+"'; filename='"+r.name+"'\r\n",n+="Content-Transfer-Encoding: base64\r\n",n+="Content-Type: "+r.type+"\r\n\r\n",n+=r.base64+"\r\n"}else n+="Content-Disposition: form-data; name='"+t[0]+"';\r\n\r\n",n+=t[1]+"\r\n"}),n+="--"+e+"--"},c=n;else if("undefined"==typeof window&&"undefined"==typeof FormData)try{c=r("./node_modules/form-data/lib/browser.js")}catch(e){}var f=function(e,n,t){if(t&&"function"==typeof t)if(e){var r=null;try{r=JSON.parse(e.response)}catch(e){}var a=r?r.message:null,o=r?r.code:null;t(n,new g(a,o))}else t(n,null)},h=function(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return Array.isArray(e)?JSON.stringify(e)===JSON.stringify([]):JSON.stringify(e)===JSON.stringify({})},p=function(e){try{if("number"==typeof e)return!0;if("string"==typeof e)return/^\d+$/.test(e)}catch(e){return a&&t.error(e),!1}},m=function(){var e=function(){};return function(n,t){e.prototype=new n,t.prototype=new e,t.super=n.prototype,t.prototype.constructor=t}}(),g=function(e,n){return this.name="SendBirdException",this.code=n||0,this.message=e,this};m(Error,g);var v={MessageTypeFilter:{ALL:0,USER:1,FILE:2,ADMIN:3}},b=function(e){return Object.keys(e).forEach(function(n){null!==e[n]&&void 0!==e[n]&&"object"==typeof e[n]&&(e[n]=b(e[n]))}),Object.freeze(e)},_=function(e){return JSON.parse(JSON.stringify(e))},y=function(){var n,l={};try{n="undefined"==typeof window?r("./node_modules/xhr2/lib/browser.js"):null}catch(e){n=null}if(n)try{var y=r("./node_modules/agentkeepalive/browser.js"),E=r("./node_modules/agentkeepalive/browser.js").HttpsAgent,I=new y({keepAlive:!0,timeout:6e4,keepAliveTimeout:6e4});l.httpAgent=I;var C=new E({keepAlive:!0,timeout:6e4,keepAliveTimeout:6e4});l.httpsAgent=C}catch(e){}var O=function(){var e;return n?(e=new n,e.nodejsSet(l)):e=new XMLHttpRequest,e},A=function(e,n,r,a,o){var i=O();i.open(r,e),i.onload=function(){i.status>=200&&i.status<400?f(null,JSON.parse(i.responseText),o):f({status:i.status,statusText:i.statusText,response:i.responseText},null,o)},i.onerror=function(){f({status:404,statusText:"There was a connection error",response:JSON.stringify({message:"There was a connection error",code:Q.NETWORK_ERROR})},null,o)};try{for(var s in a)i.setRequestHeader(s,a[s]?a[s]:"sendbird")}catch(e){}try{switch(r){case"get":case"GET":i.send();break;default:"undefined"!=typeof FormData&&FormData&&n instanceof FormData||void 0!==c&&c&&n instanceof c?n.oldIE?(i.setRequestHeader("Content-Type","multipart/form-data; boundary="+n.boundary),i.send(n.toString())):i.send(n):(i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.send(JSON.stringify(n)))}}catch(e){t.log("request.send() fail:"+e)}},N=!1,S=function(e,n,t){t&&"function"==typeof t&&(void 0===n&&(n=null),void 0===e&&(e=null),N?t(n,e):t(e,n))},w="",R=0,j=0,T=function(e){this.isOpenChannel=function(){return this.channelType==k.CHANNEL_TYPE_OPEN},this.isGroupChannel=function(){return this.channelType==k.CHANNEL_TYPE_GROUP},this.isUserMessage=function(){return this.messageType==T.MESSAGE_TYPE_USER},this.isAdminMessage=function(){return this.messageType==T.MESSAGE_TYPE_ADMIN},this.isFileMessage=function(){return this.messageType==T.MESSAGE_TYPE_FILE},this._update=function(e){this.messageId=e.hasOwnProperty("msg_id")?parseInt(e.msg_id):0,this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):k.CHANNEL_TYPE_GROUP},this.serialize=function(){var e=JSON.parse(JSON.stringify(this));return e.hasOwnProperty("_sender")&&(e.sender=e._sender,delete e._sender),b(e)},this.messageType=T.MESSAGE_TYPE_BASE,e&&this._update(e)};T.build=function(e,n){if(!e)return null;var t,r,a,o,i,s,c,u;switch(e.type){case"MESG":return t=new F(e.user),r=parseInt(e.message_id),a=String(e.message),o=String(e.data),i=parseInt(e.created_at),s=parseInt(e.updated_at),c=e.hasOwnProperty("custom_type")?String(e.custom_type):"",u=e.hasOwnProperty("translations")?e.translations:{},new x(x.build("",r,t,n,a,o,c,u,i,s));case"FILE":t=new F(e.user),r=parseInt(e.message_id),a=String(e.message),i=parseInt(e.created_at),s=parseInt(e.updated_at),c=e.hasOwnProperty("custom_type")?String(e.custom_type):"";var l=e.file,d=String(l.url),f=String(l.name),h=String(l.type),p=parseInt(l.size)||0;o=String(l.data);var m=e.hasOwnProperty("thumbnails")?e.thumbnails:[],g=!!e.hasOwnProperty("require_auth")&&e.require_auth;return new U(U.build("",r,t,n,d,f,h,p,o,c,i,m,g,s));case"BRDM":case"ADMM":return r=parseInt(e.message_id),a=String(e.message),o=String(e.data),i=parseInt(e.created_at),s=parseInt(e.updated_at),c=e.hasOwnProperty("custom_type")?String(e.custom_type):"",u=e.hasOwnProperty("translations")?e.translations:{},new P(P.build(r,n,a,o,c,u,i,s))}return null},T.MESSAGE_TYPE_BASE="base",T.MESSAGE_TYPE_ADMIN="admin",T.MESSAGE_TYPE_USER="user",T.MESSAGE_TYPE_FILE="file";var P=function(e){this.messageType=T.MESSAGE_TYPE_ADMIN,e&&(this._update(e),this.message=String(e.message),this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.translations=e.hasOwnProperty("translations")?e.translations:{})};m(T,P),P.build=function(e,n,t,r,a,o,i,s){var c={msg_id:e,channel_url:n.url,channel_type:n.channelType==k.CHANNEL_TYPE_OPEN?k.CHANNEL_TYPE_OPEN:k.CHANNEL_TYPE_GROUP,ts:i,updated_at:s,message:t,data:r};return a&&(c.custom_type=a),o&&(c.translations=o),c},P.buildFromSerializedData=function(e){var n=_(e);return new P(P.build(n.messageId,{url:n.channelUrl,channelType:n.channelType},n.message,n.data,n.customType,n.translations,n.createdAt,n.updatedAt))};var x=function(e){this.messageType=T.MESSAGE_TYPE_USER,e&&(this._update(e),this.message=String(e.message),this.data=e.hasOwnProperty("data")?String(e.data):"",this._sender=new F(e.user),d?this.sender=this._sender:Object.defineProperty(this,"sender",{get:function(){if(X.getInstance().Options.UseMemberAsMessageSender&&this.isGroupChannel()){var e=M.cachedChannels[this.channelUrl];if(e){var n=e.memberMap[this._sender.userId];n&&(this._sender.nickname!=n.nickname&&(this._sender.nickname=n.nickname),this._sender.profileUrl!=n.profileUrl&&(this._sender.profileUrl=n.profileUrl))}}return this._sender},set:function(e){this._sender=e}}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.translations=e.hasOwnProperty("translations")?e.translations:{})};m(T,x),x.build=function(e,n,t,r,a,o,i,s,c,u){var l={};l.req_id=e,l.msg_id=n,l.channel_url=r.url,l.channel_type=r.channelType==k.CHANNEL_TYPE_OPEN?k.CHANNEL_TYPE_OPEN:k.CHANNEL_TYPE_GROUP,l.ts=c,l.updated_at=u,l.message=a,o&&(l.data=o),i&&(l.custom_type=i),s&&(l.translations=s);var d={};return d.user_id=t.userId,d.nickname=t.nickname,d.profile_url=t.profileUrl,l.user=d,l},x.buildFromSerializedData=function(e){var n=_(e);return new x(x.build(n.reqId,n.messageId,n.sender,{url:n.channelUrl,channelType:n.channelType},n.message,n.data,n.customType,n.translations,n.createdAt,n.updatedAt))};var U=function(e){if(this.messageType=T.MESSAGE_TYPE_FILE,e&&(this._update(e),this._sender=new F(e.user),d?this.sender=this._sender:Object.defineProperty(this,"sender",{get:function(){if(X.getInstance().Options.UseMemberAsMessageSender&&this.isGroupChannel()){var e=M.cachedChannels[this.channelUrl];if(e){var n=e.memberMap[this._sender.userId];n&&(this._sender.nickname!=n.nickname&&(this._sender.nickname=n.nickname),this._sender.profileUrl!=n.profileUrl&&(this._sender.profileUrl=n.profileUrl))}}return this._sender},set:function(e){this._sender=e}}),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,this.url=this.requireAuth?String(e.url).split("?auth=")[0]+"?auth="+$.getInstance().ekey:String(e.url).split("?auth=")[0],this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=String(e.type),this.data=e.hasOwnProperty("custom")?String(e.custom):"",this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth))for(var n in this.thumbnails)this.thumbnails[n].url=String(this.thumbnails[n].url).split("?auth=")[0]+"?auth="+$.getInstance().ekey};m(T,U),U.build=function(e,n,t,r,a,o,i,s,c,u,l,d,f,h){var p={};p.req_id=e,p.msg_id=n,p.channel_url=r.url,p.channel_type=r.channelType==k.CHANNEL_TYPE_OPEN?k.CHANNEL_TYPE_OPEN:k.CHANNEL_TYPE_GROUP,p.ts=l,p.updated_at=h,p.url=a,p.name=o,p.type=i,p.size=s,p.custom=c;var m={};return m.user_id=t.userId,m.nickname=t.nickname,m.profile_url=t.profileUrl,p.user=m,u&&(p.custom_type=u),f&&(p.require_auth=f),d&&(p.thumbnails=d),p},U.buildFromSerializedData=function(e){var n=_(e);return new U(U.build(n.reqId,n.messageId,n.sender,{url:n.channelUrl,channelType:n.channelType},n.url,n.name,n.type,n.size,n.data,n.customType,n.createdAt,n.thumbnails,n.requireAuth,n.updatedAt))};var k=function(e){this._update=function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.fileUploadRequest={}},this.serialize=function(){var e=JSON.parse(JSON.stringify(this));if(e.hasOwnProperty("lastMessage")&&null!==e.lastMessage&&void 0!==e.lastMessage&&"object"==typeof e.lastMessage){var n=e.lastMessage;n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender,e.lastMessage=n)}return b(e)},this.isGroupChannel=function(){return this.channelType==k.CHANNEL_TYPE_GROUP},this.isOpenChannel=function(){return this.channelType==k.CHANNEL_TYPE_OPEN},this.getMessageChangeLogsByToken=function(e,n){if("function"==typeof e&&(n=e,e=null),"function"!=typeof n)return null;$.getInstance().getMessageChangeLogsByToken(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);var r=e.updated.map(function(e){return T.build(e,this)}),a=e.deleted.map(function(e){return e.message_id}),o=e.has_more,i=e.next;S({updatedMessages:r,deletedMessageIds:a,hasMore:o,token:i},null,n)})},this.createPreviousMessageListQuery=function(){return new Y(this)},this.createMessageListQuery=function(){return new q(this)};var n=function(e,n,t,r,a,o,i,s,c){if(i===v.MessageTypeFilter.ADMIN?i="ADMM":i===v.MessageTypeFilter.USER?i="MESG":i===v.MessageTypeFilter.FILE?i="FILE":i===v.MessageTypeFilter.ALL&&(i=""),!p(n)||"boolean"!=typeof t||!p(r)||!p(a)||"boolean"!=typeof o||"string"!=typeof i||"string"!=typeof s)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),c);$.getInstance().messageList(e.isOpenChannel(),e.url,n,r,a,t,o,i,s,function(n,t){if(t)return void S(null,t,c);var r=n.messages,a=[];for(var o in r){var i=T.build(r[o],e);i&&a.push(i)}S(a,null,c)})},t=function(e,n,t,r,a,o,i,s,c){if(i===v.MessageTypeFilter.ADMIN?i="ADMM":i===v.MessageTypeFilter.USER?i="MESG":i===v.MessageTypeFilter.FILE?i="FILE":i===v.MessageTypeFilter.ALL&&(i=""),!p(n)||"boolean"!=typeof t||!p(r)||!p(a)||"boolean"!=typeof o||"string"!=typeof i||"string"!=typeof s)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),c);$.getInstance().messageListByID(e.isOpenChannel(),e.url,n,r,a,t,o,i,s,function(n,t){if(t)return void S(null,t,c);var r=n.messages,a=[];for(var o in r){var i=T.build(r[o],e);i&&a.push(i)}S(a,null,c)})};this.getNextMessagesByTimestamp=function(e,t,r,a,o,i,s){return n(this,e,t,0,r,a,o,i,s)},this.getPreviousMessagesByTimestamp=function(e,t,r,a,o,i,s){return n(this,e,t,r,0,a,o,i,s)},this.getPreviousAndNextMessagesByTimestamp=function(e,t,r,a,o,i,s){return n(this,e,!0,t,r,a,o,i,s)},this.getNextMessagesByID=function(e,n,r,a,o,i,s){return t(this,e,n,0,r,a,o,i,s)},this.getPreviousMessagesByID=function(e,n,r,a,o,i,s){return t(this,e,n,r,0,a,o,i,s)},this.getPreviousAndNextMessagesByID=function(e,n,r,a,o,i,s){return t(this,e,!0,n,r,a,o,i,s)},this._sendFileCommand=function(e,n,t,r,a,o,i,s,c,u,l){var d,f=this;d=l?l.reqId:V.generateRequestId();var h=V.bFile(d,e,n,t,r,a,o,i,s,c),p=U.build(h.requestId,0,X.getInstance().currentUser,this,"string"==typeof n?n:"",t,r,a,o,i,null,null,!1),m=new U(p);return"string"==typeof n&&X.getInstance().sendCommand(h,function(e,n){if(n)return void S(null,new g(n.message,n.code),u);var t=new U(e.getJsonElement()),r=X.getInstance().currentUser;r&&t._sender&&r.userId==t._sender.userId&&(r.nickname!=t._sender.nickname&&(r.nickname=t._sender.nickname),r.profileUrl!=t._sender.profileUrl&&(r.profileUrl=t._sender.profileUrl)),f.isGroupChannel()&&M.getChannel(f.url,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void S(null,n,u);e.lastMessage=t;for(var a in X.getInstance().channelHandlers)X.getInstance().channelHandlers[a].onChannelChanged(e)}),S(t,null,u)}),m},this._getSendFileMessageParamInfo=function(e){var n={file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],callback:null,progressHandler:null};switch("function"==typeof e.slice(-1)[0]&&(n.callback=e.pop()),"function"==typeof e.slice(-1)[0]&&(n.progressHandler=e.pop()),e.length){case 1:n.file=e[0];break;case 2:n.file=e[0],n.data=e[1];break;case 3:n.file=e[0],n.data=e[1],n.customType=e[2];break;case 4:n.file=e[0],n.data=e[1],n.customType=e[2],n.thumbnailSizes=e[3];break;case 5:n.file=e[0],n.name=e[1],n.type=e[2],n.size=e[3],n.data=e[4];break;case 6:n.file=e[0],n.name=e[1],n.type=e[2],n.size=e[3],n.data=e[4],n.customType=e[5];break;case 7:n.file=e[0],n.name=e[1],n.type=e[2],n.size=e[3],n.data=e[4],n.customType=e[5],n.thumbnailSizes=e[6]}return"string"!=typeof n.file&&null!==n.file&&(null!==n.name&&void 0!==n.name&&n.name||(n.name=n.file.name),null!==n.type&&void 0!==n.type&&n.type||(n.type=n.file.type),null!==n.size&&void 0!==n.size||(n.size=n.file.size)),null!==n.name&&void 0!==n.name||(n.name=""),null!==n.type&&void 0!==n.type||(n.type=""),null!==n.size&&void 0!==n.size||(n.size=0),n},this.sendFileMessage=function(){var e=this,n=this._getSendFileMessageParamInfo(Array.prototype.slice.call(arguments)),t=n.file,r=n.name,a=n.type,o=n.size,i=n.data,s=n.customType,c=n.thumbnailSizes,u=n.callback,l=n.progressHandler;if(null!==c&&void 0!==c||(c=[]),!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),u);if(null===t||void 0===t||null!==r&&void 0!==r&&"string"!=typeof r||null!==a&&void 0!==a&&"string"!=typeof a||null!==o&&void 0!==o&&(!p(o)||parseInt(o)<0)||null!==i&&void 0!==i&&"string"!=typeof i||null!==s&&void 0!==s&&"string"!=typeof s||!Array.isArray(c))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),u);var d=e.url,f=null;return"string"==typeof t?f=e._sendFileCommand(d,t,r,a,o,i,s,[],!1,u):(f=e._sendFileCommand(d,t,r,a,o,i,s,[],!1,u),$.getInstance().uploadFile(t,a,c,d,function(n,t){if(t)return void S(null,t,u);var c="object"==typeof n?n:JSON.parse(n),l=c.url,h=c.hasOwnProperty("thumbnails")?c.thumbnails:[],p=!!c.hasOwnProperty("require_auth")&&c.require_auth;e._sendFileCommand(d,l,r,a,o,i,s,h,p,u,f)},l,this.fileUploadRequest,f.reqId)),f},this.cancelUploadingFileMessage=function(e,n){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n);if(!p(e))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);var t=this,r=t.fileUploadRequest[e];return r?(r.upload.onabort=function(){delete t.fileUploadRequest[e],S(!0,null,n)},r.abort(),!0):(S(!1,new g("Uploading has been completed or cancelled.",Q.FILE_UPLOAD_CANCEL_FAILED),n),!1)},this.sendUserMessage=function(e,n,t,r,a){var o=this;if("function"==typeof n&&(a=n,n="",t="",r=[]),"function"==typeof t&&(a=t,t="",r=[]),"function"==typeof r&&(a=r,r=[]),r||(r=[]),"string"==typeof r&&(r=[r]),null===n&&(n=""),null===t&&(t=""),!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),a);if("string"!=typeof e||"string"!=typeof n||"string"!=typeof t||!Array.isArray(r))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),a);var i=V.bMessage(this.url,e,n,t,[],r),s=x.build(i.requestId,0,X.getInstance().currentUser,this,e,n,t,r,(new Date).getTime()),c=new x(s);return X.getInstance().sendCommand(i,function(e,n){if(n)return void S(null,new g(n.message,n.code),a);var t=new x(e.getJsonElement()),r=X.getInstance().currentUser;r&&t._sender&&r.userId==t._sender.userId&&(r.nickname!=t._sender.nickname&&(r.nickname=t._sender.nickname),r.profileUrl!=t._sender.profileUrl&&(r.profileUrl=t._sender.profileUrl)),o.isGroupChannel()&&M.getChannel(o.url,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void S(null,n,a);e.lastMessage=t;for(var o in X.getInstance().channelHandlers)X.getInstance().channelHandlers[o].onChannelChanged(e)}),S(t,null,a)}),c},this.updateUserMessage=function(e,n,t,r,a){var o=Array.prototype.slice.call(arguments);if(5!==o.length)return"function"==typeof o.slice(-1)[0]&&(a=o.pop()),void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),a);if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),a);if(!p(e))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),a);if("string"!=typeof n&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&null!==r&&void 0!==r)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),a);var i=V.bUpdateUserMessage(this.url,e,n,t,r);X.getInstance().sendCommand(i,function(e,n){if(n)return void S(null,new g(n.message,n.code),a);var t=new x(e.getJsonElement());S(t,null,a)})},this.updateFileMessage=function(e,n,t,r){var a=Array.prototype.slice.call(arguments);if(4!==a.length)return"function"==typeof a.slice(-1)[0]&&(r=a.pop()),void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),r);if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),r);if(!p(e))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),r);if("string"!=typeof n&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),r);var o=V.bUpdateFileMessage(this.url,e,n,t);X.getInstance().sendCommand(o,function(e,n){if(n)return void S(null,new g(n.message,n.code),r);var t=new U(e.getJsonElement());S(t,null,r)})},this.createMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void $.getInstance().createMetaCounters(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.updateMetaCounters=function(e,n,t){return X.getInstance().hasLoggedIn()?("function"!=typeof n&&void 0!==t||(t=n,n=!1),null==e||"object"!=typeof e||Array.isArray(e)||h(e)||"boolean"!=typeof n?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),t):void $.getInstance().updateMetaCounters(this.isOpenChannel(),this.url,e,n,$.UPDATE_META_COUNTER_MODE_SET,function(e,n){if(n)return void S(null,n,t);S(e,null,t)})):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),t)},this.increaseMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void $.getInstance().updateMetaCounters(this.isOpenChannel(),this.url,e,!1,$.UPDATE_META_COUNTER_MODE_INC,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.decreaseMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void $.getInstance().updateMetaCounters(this.isOpenChannel(),this.url,e,!1,$.UPDATE_META_COUNTER_MODE_DEC,function(e,t){if(t)return void S(null,t,n);var r=e,a={};for(var o in r){var i=r[o];a[o]=i}S(a,null,n)}):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.getMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?Array.isArray(e)?void $.getInstance().getMetaCounters(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.getAllMetaCounters=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e);$.getInstance().getAllMetaCounters(this.isOpenChannel(),this.url,function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.deleteMetaCounter=function(e,n){return X.getInstance().hasLoggedIn()?"string"!=typeof e?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void $.getInstance().deleteMetaCounter(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.deleteAllMetaCounters=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e);$.getInstance().deleteAllMetaCounters(this.isOpenChannel(),this.url,function(n,t){if(t)return void(e&&S(null,t,e));S(n,null,e)})},this.createMetaData=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void $.getInstance().createMetaData(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.updateMetaData=function(e,n,t){return X.getInstance().hasLoggedIn()?("function"!=typeof n&&void 0!==t||(t=n,n=!1),null==e||"object"!=typeof e||Array.isArray(e)||h(e)||"boolean"!=typeof n?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),t):void $.getInstance().updateMetaData(this.isOpenChannel(),this.url,e,n,function(e,n){if(n)return void S(null,n,t);S(e,null,t)})):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),t)},this.getMetaData=function(e,n){return X.getInstance().hasLoggedIn()?Array.isArray(e)?void $.getInstance().getMetaData(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.getAllMetaData=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e);$.getInstance().getAllMetaData(this.isOpenChannel(),this.url,function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.deleteMetaData=function(e,n){return X.getInstance().hasLoggedIn()?"string"!=typeof e?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):void $.getInstance().deleteMetaData(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n)},this.deleteAllMetaData=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e);$.getInstance().deleteAllMetaData(this.isOpenChannel(),this.url,function(n,t){if(t)return void(e&&S(null,t,e));S(n,null,e)})},this.deleteMessage=function(e,n){var t=Array.prototype.slice.call(arguments);if(2!==t.length)return"function"==typeof t.slice(-1)[0]&&(n=t.pop()),void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n);var r=this;if("object"!=typeof e||h(e)||Array.isArray(e)||Object.keys(e).indexOf("messageId")<0||!e)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);$.getInstance().deleteMessage(r.isOpenChannel(),r.url,e.messageId,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.channelType=k.CHANNEL_TYPE_BASE,e&&this._update(e)};k.CHANNEL_TYPE_OPEN="open",k.CHANNEL_TYPE_GROUP="group",k.CHANNEL_TYPE_BASE="base";var L=function(e){this.parse=function(e){if(e.hasOwnProperty("freeze")&&(this.isFrozen=e.freeze),e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&e.operators){this.operators=[];for(var n in e.operators){var t=new F(e.operators[n]);this.operators.push(t)}}},this.refresh=function(e){L.getChannelWithoutCache(this.url,function(n,t){if(N){var r=n;n=t,t=r}if(t)return void S(null,t,e);S(n,null,e)})},this.update=function(e){this._update(e),this.parse(e)},this.delete=function(e){var n=this.url;$.getInstance().deleteOpenChannel(n,function(t,r){if(r)return void S(null,r,e);delete L.cachedChannels[n],S(t,null,e)})},this.enter=function(e){var n=this,t=V.bEnter(n.url);X.getInstance().sendCommand(t,function(t,r){if(r)return void S(null,new g(r.message,r.code),e);L.enteredChannels[n.url]=n,S(null,null,e)})},this.exit=function(e){var n=this,t=V.bExit(n.url);X.getInstance().sendCommand(t,function(t,r){if(r)return void S(null,new g(r.message,r.code),e);delete L.enteredChannels[n.url],S(null,null,e)})},this.createParticipantListQuery=function(){return new W(W.PARTICIPANT,this)},this.createMutedUserListQuery=function(){return new W(W.MUTED_USER,this)},this.createBannedUserListQuery=function(){return new W(W.BANNED_USER,this)},this.updateChannel=function(){var e=Array.prototype.slice.call(arguments),n=null,t=null,r=null,a=null,o=null,i=null;switch("function"==typeof e.slice(-1)[0]&&(i=e.pop()),e.length){case 3:n=e[0],t=e[1],r=e[2];break;case 4:n=e[0],t=e[1],r=e[2],a=e[3];break;case 5:n=e[0],t=e[1],r=e[2],a=e[3],o=e[4];break;default:return void S(null,new g("Invalid arguments.2",Q.INVALID_PARAMETER),i)}this.updateChannelWithOperatorUserIds(n,t,r,a,o,i)},this.updateChannelWithOperatorUserIds=function(e,n,t,r,a,o){if("function"==typeof a&&(o=a,a=null),"string"!=typeof e&&null!==e&&void 0!==e||"string"!=typeof n&&h(n)&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&!Array.isArray(r)&&null!==r&&void 0!==r||"string"!=typeof a&&null!==a&&void 0!==a)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),o);$.getInstance().updateOpenChannel(this.url,e,n,t,r,a,function(e,n){if(n)return void S(null,n,o);var t=L.upsert(e);S(t,null,o)})},this.banUser=function(e,n,t){if("function"==typeof n&&3!==arguments.length&&(t=n,n=-1),!e||parseInt(n)<0&&-1!==parseInt(n))return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),t);this.banUserWithUserId(e.userId,n,t)},this.banUserWithUserId=function(e,n,t){if("function"==typeof n&&3!==arguments.length&&(t=n,n=-1),!e||parseInt(n)<0&&-1!==parseInt(n))return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),t);$.getInstance().banUser(this.url,e,null,n,function(e,n){if(n)return void S(null,n,t);S(null,null,t)})},this.unbanUser=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);this.unbanUserWithUserId(e.userId,n)},this.unbanUserWithUserId=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);$.getInstance().unbanUser(this.url,e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.muteUser=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);this.muteUserWithUserId(e.userId,n)},this.muteUserWithUserId=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);$.getInstance().muteUser(this.url,e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.unmuteUser=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);this.unmuteUserWithUserId(e.userId,n)},this.unmuteUserWithUserId=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);$.getInstance().unmuteUser(this.url,e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.isOperator=function(e){return!!e&&this.isOperatorWithUserId(e.userId)},this.isOperatorWithUserId=function(e){for(var n in this.operators)if(this.operators[n].userId==e)return!0;return!1},this.channelType=k.CHANNEL_TYPE_OPEN,this.participantCount=0,this.isFrozen=!1,this.operators=[],e&&(this._update(e),this.parse(e))};m(k,L),L.enteredChannels={},L.clearEnteredChannels=function(){L.enteredChannels={}},L.createOpenChannelListQuery=function(){return new K},L.buildFromSerializedData=function(e){var n=_(e);return new L({channel_url:n.url,name:n.name,cover_url:n.coverUrl,data:n.data,custom_type:n.customType,created_at:n.createdAt/1e3,freeze:n.isFrozen,participant_count:n.participantCount,operators:n.operators.map(function(e){return F.build(e.userId,e.nickname,e.profileUrl,e.connectionStatus,e.lastSeenAt,e.metaData,e.isActive)})})},L.createChannel=function(){var e,n,t,r,a,o;switch(arguments.length){case 1:o=arguments[0];break;case 4:e=arguments[0],n=arguments[1],t=arguments[2],o=arguments[3];break;case 5:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4];break;case 6:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],a=arguments[4],o=arguments[5]}L.createChannelWithOperatorUserIds(e,n,t,r,a,o)},L.upsert=function(e){var n=new L(e);return L.cachedChannels.hasOwnProperty(n.url)?L.cachedChannels[n.url].update(e):L.cachedChannels[n.url]=n,L.cachedChannels[n.url]},L.createChannelWithOperatorUserIds=function(e,n,t,r,a,o){if("function"==typeof a&&(o=a,a=""),"string"!=typeof e&&null!==e&&void 0!==e||"string"!=typeof n&&h(n)&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&!Array.isArray(r)&&null!==r&&void 0!==r||"string"!=typeof a&&null!==a&&void 0!==a)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),o);$.getInstance().createOpenChannel(e,n,t,r,a,function(e,n){if(n)return void S(null,n,o);var t=L.upsert(e);S(t,null,o)})},L.cachedChannels={},L.clearCache=function(){L.cachedChannels={}},L.removeCachedChannel=function(e){delete L.cachedChannels[e]},L.getChannel=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);L.cachedChannels.hasOwnProperty(e)?S(L.cachedChannels[e],null,n):L.getChannelWithoutCache(e,n)},L.getChannelWithoutCache=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);$.getInstance().getOpenChannel(e,function(t,r){if(r)return void S(null,r,n);L.upsert(t),S(L.cachedChannels[e],null,n)})};var M=function(e){var n,r,a={};this.parse=function(e){var n=this;if(n.isDistinct=!!e.is_distinct,n.unreadMessageCount=parseInt(e.unread_message_count),n.isPushEnabled=!!e.is_push_enabled,n.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,e.hasOwnProperty("read_receipt")){n.cachedReadReceiptStatus={};for(var t in e.read_receipt){var r=e.read_receipt[t];n.updateReadReceipt(t,parseInt(r))}}e.hasOwnProperty("members")&&(n.members=[],n.memberMap={},e.members.forEach(function(e){var t=new B(e);n.members.push(t),n.memberMap[t.userId]=t}),n.memberCount=n.members.length),e.hasOwnProperty("member_count")&&(n.memberCount=parseInt(e.member_count)),e.hasOwnProperty("last_message")&&"object"==typeof e.last_message&&e.last_message?e.last_message instanceof T?n.lastMessage=e.last_message:n.lastMessage=T.build(e.last_message,n):n.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"==typeof e.inviter&&!h(e.inviter)?n.inviter=new F(e.inviter):n.inviter=null},this.refresh=function(e){M.getChannelWithoutCache(this.url,function(n,t){if(N){var r=n;n=t,t=r}if(t)return void S(null,t,e);S(n,null,e)})},this.update=function(e){this._update(e),this.parse(e)},this.updateChannel=function(){var e=this,n=Array.prototype.slice.call(arguments),t=null,r=null,a=null,o=null,i=null,s=null;switch("function"==typeof n.slice(-1)[0]&&(s=n.pop()),n.length){case 3:t=e.isDistinct,r=n[0],a=n[1],o=n[2];break;case 4:t=n[0],r=n[1],a=n[2],o=n[3];break;case 5:t=n[0],r=n[1],a=n[2],o=n[3],i=n[4];break;default:return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),s)}if("string"!=typeof r&&null!==r&&void 0!==r||"string"!=typeof a&&h(a)&&null!==a&&void 0!==a||"string"!=typeof o&&null!==o&&void 0!==o||"boolean"!=typeof t||"string"!=typeof i&&null!==i&&void 0!==i)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),s);$.getInstance().updateGroupChannel(e.url,t,r,a,o,i,function(e,n){if(n)return void S(null,n,s);var t=M.upsert(e);S(t,null,s)})},this.resetMyHistory=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e);$.getInstance().resetMyHistory(this.url,function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.invite=function(e,n){if("string"==typeof e&&(e=[{userId:e}]),!Array.isArray(e)||h(e))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);var t=[];for(var r in e){if("object"!=typeof e[r]||h(e[r])){S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);break}t.push(e[r].userId)}this.inviteWithUserIds(t,n)},this.inviteWithUserIds=function(e,n){if(!Array.isArray(e)||h(e))return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);$.getInstance().groupChannelInvite(this.url,e,function(e,t){if(t)return void S(null,t,n);var r=M.upsert(e);S(r,null,n)})},this.acceptInvitation=function(e){$.getInstance().acceptInvitation(this.url,X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=M.upsert(n);S(r,null,e)})},this.declineInvitation=function(e){$.getInstance().declineInvitation(this.url,X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.hide=function(e,n){if(1===arguments.length&&"function"==typeof e&&(n=e,e=!1),null!==e&&void 0!==e||(e=!1),"boolean"!=typeof e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);var t=this.url,r=this;$.getInstance().groupChannelHide(t,X.getInstance().getCurrentUserId(),e,function(e,a){if(a)return void S(null,a,n);r.isHidden=!0;var o=M.cachedChannels[t];o&&(o.isHidden=!0),S(e,null,n)})},this.leave=function(e){var n=this.url;$.getInstance().groupChannelLeave(n,X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.markAsRead=function(){this._sendMarkAsRead(null)},this._sendMarkAsRead=function(e){var n=this,t=V.bRead(n.url);X.getInstance().sendCommand(t,function(t,r){if(r)return void S(null,new g(r.message,r.code),e);if(n.unreadMessageCount>0){n.unreadMessageCount=0;for(var a in X.getInstance().channelHandlers)X.getInstance().channelHandlers[a].onChannelChanged(n)}S(null,null,e)})},this.getReadReceipt=function(e){if(!(e instanceof T))return t.log("message is not BaseMessage instance"),-1;if(e.messageType==T.MESSAGE_TYPE_ADMIN)return 0;var n=X.getInstance().currentUser,r=0,a=e.createdAt,o=this.members;for(var i in o){var s=o[i],c=s.userId;n.userId==c||e.sender&&e.sender.userId==c||this.cachedReadReceiptStatus[c]<a&&r++}return r},this.getReadStatus=function(){var e={};if(!X.getInstance().currentUser)return e;var n=this.members;for(var t in n){var r=n[t],a=r.userId;if(r.userId!=X.getInstance().getCurrentUserId()){var o=this.cachedReadReceiptStatus[a];e[a]={user:r,last_seen_at:parseInt(o)}}}return e},this.updateReadReceipt=function(e,n){var t=e,r=this.cachedReadReceiptStatus[t],a=n;(!r||r<a)&&(this.cachedReadReceiptStatus[t]=a)},this.startTyping=function(){var e=(new Date).getTime();if(!(e-n<1e3)){r=0,n=e;var t=V.bTypeStart(this.url,n);X.getInstance().sendCommand(t,null)}},this.endTyping=function(){var e=(new Date).getTime();if(!(e-r<1e3)){n=0,r=e;var t=V.bTypeEnd(this.url,r);X.getInstance().sendCommand(t,null)}},this.invalidateTypingStatus=function(){var e=!1,n=(new Date).getTime();for(var t in a)n-a[t]>=1e4&&(delete a[t],e=!0);return e},this.updateTypingStatus=function(e,n){n?a[e.userId]=(new Date).getTime():delete a[e.userId]},this.isTyping=function(){return 0!=Object.keys(a).length},this.getTypingMembers=function(){var e=[];for(var n in a){var t=this.memberMap[n];this.memberMap[n]&&e.push(t)}return e},this.addMember=function(e){var n=this.removeMember(e);n&&n.state===B.JOINED&&(e.state=B.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,0)},this.removeMember=function(e){var n=e.userId,t=null;if(this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var r in this.members){var a=this.members[r];if(a.userId==n){t=a,this.members.splice(r,1);break}}this.memberCount--}return t},this.setPushPreference=function(e,n){var t=this;if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n);$.getInstance().setPushPreference(X.getInstance().getCurrentUserId(),this.url,e,function(e,r){if(r)return void S(null,r,n);t.isPushEnabled=e.enable,S(e,null,n)})},this.getPushPreference=function(e){var n=this;if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e);$.getInstance().getPushPreference(X.getInstance().getCurrentUserId(),this.url,function(t,r){if(r)return void S(null,r,e);if(e){var a;try{a=t.enable}catch(e){a=!1}n.isPushEnabled=a,S(a,null,e)}})},this.channelType=k.CHANNEL_TYPE_GROUP,this.isDistinct=!1,this.unreadMessageCount=0,this.inviter=null,this.members=[],this.memberMap={},this.lastMessage={},this.memberCount=0,this.cachedReadReceiptStatus={},this.isPushEnabled,this.isHidden=!1,e&&(this._update(e),this.parse(e))};m(k,M),M.buildFromSerializedData=function(e){var n=_(e);return new M({channel_url:n.url,name:n.name,cover_url:n.coverUrl,data:n.data,custom_type:n.customType,created_at:n.createdAt/1e3,is_distinct:n.isDistinct,unread_message_count:n.unreadMessageCount,is_push_enabled:n.isPushEnabled,is_hidden:n.isHidden,member_count:n.memberCount,members:n.members.map(function(e){return B.build(F.build(e.userId,e.nickname,e.profileUrl,e.connectionStatus,e.lastSeenAt,e.metaData,e.isActive),e.state,e.isBlockedByMe,e.isBlockingMe)}),last_message:function(e){return null!==e&&void 0!==e&&"object"==typeof e?e.messageType===T.MESSAGE_TYPE_USER?new x(x.build(e.reqId,e.messageId,e.sender,{url:e.channelUrl,channelType:e.channelType},e.message,e.data,e.customType,e.translations,e.createdAt,e.updatedAt)):e.messageType===T.MESSAGE_TYPE_FILE?new U(U.build(e.reqId,e.messageId,e.sender,{url:e.channelUrl,channelType:e.channelType},e.url,e.name,e.type,e.size,e.data,e.customType,e.createdAt,e.thumbnails,e.requireAuth,e.updatedAt)):new P(P.build(e.messageId,{url:e.channelUrl,channelType:e.channelType},e.message,e.data,e.customType,e.translations,e.createdAt,e.updatedAt)):null}(n.lastMessage),read_receipt:n.cachedReadReceiptStatus,inviter:null!==n.inviter&&void 0!==n.inviter&&"object"==typeof n.inviter?F.build(n.inviter.userId,n.inviter.nickname,n.inviter.profileUrl,n.inviter.connectionStatus,n.inviter.lastSeenAt,n.inviter.metaData,n.inviter.isActive):null})},M.createMyGroupChannelListQuery=function(){return new z(X.getInstance().currentUser)},M.memberState={ALL:0,JOINED:1,INVITED:2},M.getChannelCount=function(e,n){return"function"==typeof e&&1===arguments.length&&(n=e,e=M.memberState.ALL),e!==M.memberState.ALL&&e!==M.memberState.JOINED&&e!==M.memberState.INVITED?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):X.getInstance().hasLoggedIn()?void $.getInstance().getGroupChannelCount(X.getInstance().getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);var r=parseInt(e.group_channel_count);S(r,null,n)}):void(n&&S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n))},M.getTotalUnreadMessageCount=function(e){$.getInstance().getTotalUnreadMessageCount(X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=parseInt(n.unread_count);S(r,null,e)})},M.getTotalUnreadChannelCount=function(e){$.getInstance().getTotalUnreadChannelCount(X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=parseInt(n.unread_count);S(r,null,e)})},M.createChannel=function(){var e=null,n=null,t=null,r=null,a=null,o=null,i=null;switch(arguments.length){case 2:e=arguments[0],n=!1,o=arguments[1];break;case 3:e=arguments[0],n=arguments[1],o=arguments[2];break;case 4:e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];break;case 6:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],a=arguments[4],o=arguments[5];break;case 7:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],a=arguments[4],i=arguments[5],o=arguments[6]}if(!Array.isArray(e)||"boolean"!=typeof n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&h(r)&&null!==r&&void 0!==r||"string"!=typeof a&&null!==a&&void 0!==a||"string"!=typeof i&&null!==i&&void 0!==i)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),o);var s=[];e.forEach(function(e){s.push(e.userId)}),M.createChannelWithUserIds(s,n,t,r,a,i,o)},M.createChannelWithUserIds=function(){var e=null,n=null,t=null,r=null,a=null,o=null,i=null;switch(arguments.length){case 2:e=arguments[0],n=!1,o=arguments[1];break;case 3:e=arguments[0],n=arguments[1],o=arguments[2];break;case 4:e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];break;case 6:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],a=arguments[4],o=arguments[5];break;case 7:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],a=arguments[4],i=arguments[5],o=arguments[6]}if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),o);if(!Array.isArray(e)||"boolean"!=typeof n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&h(r)&&null!==r&&void 0!==r||"string"!=typeof a&&null!==a&&void 0!==a||"string"!=typeof i&&null!==i&&void 0!==i)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),o);var s=e.filter(function(e,n,t){return n==t.indexOf(e)}),c=X.getInstance().currentUser;s.push(c.userId),$.getInstance().createGroupChannel(s,n,t,r,a,i,function(e,n){if(n)return void S(null,n,o);var t=new M(e);M.cachedChannels[t.url]=t,S(t,null,o)})},M.cachedChannels={},M.clearCache=function(){M.cachedChannels={}},M.removeCachedChannel=function(e){delete M.cachedChannels[e]},M.upsert=function(e){var n=new M(e);return M.cachedChannels.hasOwnProperty(n.url)?M.cachedChannels[n.url].update(e):M.cachedChannels[n.url]=n,M.cachedChannels[n.url]},M.getChannelWithoutCache=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);$.getInstance().getGroupChannel(e,!0,!0,function(e,t){if(t)return void S(null,t,n);var r=M.upsert(e);S(r,null,n)})},M.getChannel=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n);M.cachedChannels.hasOwnProperty(e)?S(M.cachedChannels[e],null,n):M.getChannelWithoutCache(e,n)},M.markAsReadAllLastSentAt,M.markAsReadAll=function(e){var n=(new Date).getTime();if(n-M.markAsReadAllLastSentAt<1e3)return void S(null,new g("MarkAsRead rate limit exceeded.",Q.MARK_AS_READ_RATE_LIMIT_EXCEEDED),e);M.markAsReadAllLastSentAt=n,$.getInstance().groupChannelMarkAsReadAll(X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);for(var r in M.cachedChannels)M.cachedChannels[r].unreadMessageCount=0;S(null,null,e)})};var D=function(e){e&&(this.category=e.hasOwnProperty("cat")?parseInt(e.cat):0,this.data=e.hasOwnProperty("data")?e.data:null,this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):k.CHANNEL_TYPE_GROUP),this.isGroupChannel=function(){return this.channelType==k.CHANNEL_TYPE_GROUP},this.isOpenChannel=function(){return this.channelType==k.CHANNEL_TYPE_OPEN}};D.CATEGORY_NONE=0,D.CATEGORY_CHANNEL_ENTER=10102,D.CATEGORY_CHANNEL_EXIT=10103,D.CATEGORY_USER_CHANNEL_MUTE=10201,D.CATEGORY_USER_CHANNEL_UNMUTE=10200,D.CATEGORY_USER_CHANNEL_BAN=10601,D.CATEGORY_USER_CHANNEL_UNBAN=10600,D.CATEGORY_CHANNEL_FREEZE=10701,D.CATEGORY_CHANNEL_UNFREEZE=10700,D.CATEGORY_TYPING_START=10900,D.CATEGORY_TYPING_END=10901,D.CATEGORY_CHANNEL_JOIN=1e4,D.CATEGORY_CHANNEL_LEAVE=10001,D.CATEGORY_CHANNEL_INVITE=10020,D.CATEGORY_CHANNEL_DECLINE_INVITE=10022,D.CATEGORY_CHANNEL_PROP_CHANGED=11e3,D.CATEGORY_CHANNEL_DELETED=12e3,D.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,D.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,D.CATEGORY_CHANNEL_HIDE=13e3;var H=function(e){e&&(this.category=e.hasOwnProperty("cat")?parseInt(e.cat):0)};H.CATEGORY_USER_BLOCK=20001,H.CATEGORY_USER_UNBLOCK=2e4;var G=function(e){e&&(this.reader=new F(e.user),this.timestamp=parseInt(e.ts),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):k.CHANNEL_TYPE_GROUP)},F=function(e){this.nickname="",this.profileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this._update=function(e){e.hasOwnProperty("guest_id")&&(this.userId=String(e.guest_id)),e.hasOwnProperty("user_id")&&(this.userId=String(e.user_id)),e.hasOwnProperty("name")&&(this.nickname=String(e.name)),e.hasOwnProperty("nickname")&&(this.nickname=String(e.nickname)),e.hasOwnProperty("image")&&(this.profileUrl=String(e.image)),e.hasOwnProperty("profile_url")&&(this.profileUrl=String(e.profile_url)),e.hasOwnProperty("is_online")?e.is_online===F.NON_AVAILABLE?this.connectionStatus=F.NON_AVAILABLE:this.connectionStatus=e.is_online?F.ONLINE:F.OFFLINE:this.connectionStatus=F.NON_AVAILABLE,e.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(e.last_seen_at):this.lastSeenAt=0,e.hasOwnProperty("metadata")?this.metaData=e.metadata:this.metaData={},e.hasOwnProperty("is_active")?this.isActive=void 0===e.is_active||e.is_active:this.isActive=!0},this._updateMetaData=function(e,n){var t=this,r=Object.keys(e);n?r.forEach(function(e){delete t.metaData[e]}):r.forEach(function(n){t.metaData[n]=e[n]})},this.createMetaData=function(e,n){var t=this;return"function"==typeof e&&1===arguments.length&&(n=e,e={}),"object"!=typeof e||h(e)||Array.isArray(e)?void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n):X.getInstance().hasLoggedIn()?void $.getInstance().createUserMetaData(t.userId,e,function(e,r){if(r)return void S(null,r,n);t._updateMetaData(e),S(e,null,n)}):void(n&&S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n))},this.updateMetaData=function(e,n,t){var r=this;return"function"==typeof e&&1===arguments.length&&(t=e,e={}),"function"==typeof n&&2===arguments.length&&(t=n,n=!1),"object"!=typeof e||h(e)||Array.isArray(e)||"boolean"!=typeof n?void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),t):X.getInstance().hasLoggedIn()?void $.getInstance().updateUserMetaData(r.userId,e,n,function(e,n){if(n)return void S(null,n,t);r._updateMetaData(e),S(e,null,t)}):void(t&&S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),t))},this.deleteAllMetaData=function(e){var n=this,t=n.metaData;if(!X.getInstance().hasLoggedIn())return void(e&&S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),e));$.getInstance().deleteAllUserMetaData(n.userId,function(r,a){if(a)return void S(null,a,e);n._updateMetaData(t,!0),S(r,null,e)})},this.deleteMetaData=function(e,n){var t=this;if("function"==typeof e&&1===arguments.length&&(n=e,e=null),"string"!=typeof e)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);if(!X.getInstance().hasLoggedIn())return void(n&&S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n));var r={};r[e]="",$.getInstance().deleteUserMetaData(t.userId,e,function(e,a){if(a)return void S(null,a,n);t._updateMetaData(r,!0),S(e,null,n)})},this.serialize=function(){var e=JSON.parse(JSON.stringify(this));return b(e)},e&&this._update(e)};F.NON_AVAILABLE="nonavailable",F.ONLINE="online",F.OFFLINE="offline",F.build=function(e,n,t,r,a,o,i){return{user_id:e,nickname:n,profile_url:t,is_online:r,last_seen_at:a,metadata:o,is_active:i}},F.buildFromSerializedData=function(e){var n=_(e);return new F(F.build(n.userId,n.nickname,n.profileUrl,n.connectionStatus,n.lastSeenAt,n.metaData,n.isActive))};var B=function(e){this.state="",this.isBlockedByMe=!1,this.isBlockingMe=!1,this.parse=function(e){this.state=e.state,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me)},e&&(this._update(e),this.parse(e))};m(F,B),B.JOINED="joined",B.INVITED="invited",B.build=function(e,n,t,r){var a=e;return a.state=n,a.is_blocked_by_me=t,a.is_blocking_me=r,a},B.buildFromSerializedData=function(e){var n=_(e);return new B(B.build(F.build(n.userId,n.nickname,n.profileUrl,n.connectionStatus,n.lastSeenAt,n.metaData,n.isActive),n.state,n.isBlockedByMe,n.isBlockingMe))};var V=function(e,n,t){this.isAckRequired=function(){return"MESG"==this.command||"FILE"==this.command||"ENTR"==this.command||"EXIT"==this.command||"READ"==this.command||"MEDI"==this.command||"FEDI"==this.command},this.encode=function(){return this.command+this.payload+"\n"},this.decode=function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)},this.getJsonElement=function(){return JSON.parse(this.payload)},this.isRequestIdCommand=function(){return this.isAckRequired()||"EROR"==this.command},this.command,this.payload,this.requestId;var r=this;if(0!=arguments.length){var a;switch(arguments.length){case 1:var o=arguments[0];if(!o||o.length<=4)return r.command="NOOP",void(r.payload="{}");if(o=o.trim(),r.command=o.substring(0,4),r.payload=o.substring(4),r.isRequestIdCommand()){var i=r.getJsonElement();i&&(r.requestId=i.hasOwnProperty("req_id")?i.req_id:"")}break;case 3:a=arguments[2];case 2:var s=arguments[0],c=arguments[1];a=a||"",r.command=s,r.requestId=a,r.requestId||r.isRequestIdCommand()&&(r.requestId=V.generateRequestId()),c.req_id=r.requestId,r.payload=JSON.stringify(c)}}};V.bMessage=function(e,n,t,r,a,o){var i={};i.channel_url=e,i.message=n,i.data=t,i.mentioned=[];for(var s in a){var c=a[s];i.mentioned.push(String(c))}return r&&(i.custom_type=r),o.length>0&&(i.target_langs=o),new V("MESG",i)},V.bRead=function(e){var n={};return n.channel_url=e,new V("READ",n)},V.bTypeStart=function(e,n){var t={};return t.channel_url=e,t.time=n,new V("TPST",t)},V.bTypeEnd=function(e,n){var t={};return t.channel_url=e,t.time=n,new V("TPEN",t)},V.bFile=function(e,n,t,r,a,o,i,s,c,u){var l={};return l.channel_url=n,l.url=t,l.name=r||"",l.type=a||"",l.size=o||0,l.custom=i,s&&(l.custom_type=s),c&&(l.thumbnails=c),u&&(l.require_auth=u),new V("FILE",l,e)},V.bPing=function(){var e={};return e.id=(new Date).getTime(),new V("PING",e)},V.bEnter=function(e){var n={};return n.channel_url=e,new V("ENTR",n)},V.bExit=function(e){var n={};return n.channel_url=e,new V("EXIT",n)},V.bUpdateUserMessage=function(e,n,t,r,a){var o={};return o.channel_url=e,o.msg_id=n,null!=t&&void 0!=t&&(o.message=t),null!=r&&void 0!=r&&(o.data=r),null!=a&&void 0!=a&&(o.custom_type=a),new V("MEDI",o)},V.bUpdateFileMessage=function(e,n,t,r){var a={};return a.channel_url=e,a.msg_id=n,null!=t&&void 0!=t&&(a.data=t),null!=r&&void 0!=r&&(a.custom_type=r),new V("FEDI",a)},V.requestIdSeed=(new Date).getTime(),V.generateRequestId=function(){return V.requestIdSeed++,String(V.requestIdSeed)};var z=function(e){this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=z.ORDER_LATEST_LAST_MESSAGE,this.userIdsFilter=[],this.userIdsFilterExactMatch=!1,this.queryType="AND",this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=z.MEMBER_STATE_ALL,this.customTypeFilter="";var n=e,t="",r=this;this.next=function(e){return r.hasNext?r.isLoading?void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),e):(null!==r.nicknameContainsFilter&&void 0!==r.nicknameContainsFilter||(r.nicknameContainsFilter=""),null!==r.channelNameContainsFilter&&void 0!==r.channelNameContainsFilter||(r.channelNameContainsFilter=""),r.memberStateFilter===M.memberState.JOINED?r.memberStateFilter=z.MEMBER_STATE_JOINED_ONLY:r.memberStateFilter===M.memberState.INVITED?r.memberStateFilter=z.MEMBER_STATE_INVITED_ONLY:r.memberStateFilter===M.memberState.ALL&&(r.memberStateFilter=z.MEMBER_STATE_ALL),!p(r.limit)||!Array.isArray(r.userIdsFilter)||"boolean"!=typeof r.userIdsFilterExactMatch||"string"!=typeof r.customTypeFilter||"string"!=typeof r.queryType||["AND","OR"].indexOf(r.queryType.toUpperCase())<0||"string"!=typeof r.order||[z.ORDER_CHRONOLOGICAL,z.ORDER_LATEST_LAST_MESSAGE].indexOf(r.order.toLowerCase())<0||"string"!=typeof r.memberStateFilter||[z.MEMBER_STATE_INVITED_ONLY,z.MEMBER_STATE_JOINED_ONLY,z.MEMBER_STATE_ALL].indexOf(r.memberStateFilter.toLowerCase())<0||"string"!=typeof r.nicknameContainsFilter||"string"!=typeof r.channelNameContainsFilter?void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),e):(r.isLoading=!0,void $.getInstance().loadUserGroupChannelList(n.userId,t,r.limit,r.includeEmpty,r.order,r.userIdsFilter,r.userIdsFilterExactMatch,r.nicknameContainsFilter,r.queryType,r.memberStateFilter,r.channelNameContainsFilter,r.customTypeFilter,function(n,a){if(a)return r.isLoading=!1,void S(null,a,e);var o=n;(!(t=String(o.next))||t.length<=0)&&(r.hasNext=!1);var i=o.channels,s=[];for(var c in i){var u=M.upsert(i[c]);s.push(u)}r.isLoading=!1,S(s,null,e)}))):void S([],null,e)}};z.ORDER_LATEST_LAST_MESSAGE="latest_last_message",z.ORDER_CHRONOLOGICAL="chronological",z.MEMBER_STATE_INVITED_ONLY="invited_only",z.MEMBER_STATE_JOINED_ONLY="joined_only",z.MEMBER_STATE_ALL="all";var q=function(e){this.isLoading=!1;var n=e,t=this;this.next=function(e,r,a,o){if(t.isLoading)return void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),o);if(4!==arguments.length){if("function"!=typeof o){var i=Array.prototype.slice.call(arguments);"function"==typeof i.slice(-1)[0]&&(o=i.pop())}return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),o)}if(!p(e)||!p(r)||"boolean"!=typeof a)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),o);t.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,e,0,r,!1,a,"","",function(e,r){if(r)return t.isLoading=!1,void S(null,r,o);var a=e.messages,i=[];for(var s in a){var c=T.build(a[s],n);c&&i.push(c)}t.isLoading=!1,S(i,null,o)})},this.prev=function(e,r,a,o){if(t.isLoading)return void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),o);if(4!==arguments.length){if("function"!=typeof o){var i=Array.prototype.slice.call(arguments);"function"==typeof i.slice(-1)[0]&&(o=i.pop())}return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),o)}if(!p(e)||!p(r)||"boolean"!=typeof a)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),o);t.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,e,r,0,!1,a,"","",function(e,r){if(r)return t.isLoading=!1,void S(null,r,o);var a=e.messages,i=[];for(var s in a){var c=T.build(a[s],n);c&&i.push(c)}t.isLoading=!1,S(i,null,o)})},this.load=function(e,r,a,o,i){if(t.isLoading)return void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),i);if(5!==arguments.length){if("function"!=typeof i){var s=Array.prototype.slice.call(arguments);"function"==typeof s.slice(-1)[0]&&(i=s.pop())}return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),i)}if(!p(e)||!p(r)||!p(a)||"boolean"!=typeof o)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),i);t.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,e,r,a,!0,o,"","",function(e,r){if(r)return t.isLoading=!1,void S(null,r,i);var a=e.messages,o=[];for(var s in a){var c=T.build(a[s],n);c&&o.push(c)}t.isLoading=!1,S(o,null,i)})}},K=function(){var e="";this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customType=null;var n=this;this.next=function(t){return this.hasNext?this.isLoading?void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),t):"string"!=typeof n.nameKeyword&&null!==n.nameKeyword||"string"!=typeof n.urlKeyword&&null!==n.urlKeyword||"string"!=typeof n.customType&&null!==n.customType||!p(n.limit)?void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),t):(n.isLoading=!0,void $.getInstance().loadOpenChannelList(e,n.limit,n.nameKeyword,n.urlKeyword,n.customType,function(r,a){if(a)return n.isLoading=!1,void S(null,a,t);var o=r;try{e=String(o.next)}catch(n){e=""}e||(n.hasNext=!1);var i=o.channels,s=[];i.forEach(function(e){var n=L.upsert(e);s.push(n)}),n.isLoading=!1,S(s,null,t)})):void S([],null,t)}},Y=function(e){var n=e,t=0x8000000000000000;this.hasMore=!0,this.isLoading=!1;var r=this;this.load=function(e,a,o,i){if(3!==arguments.length&&4!==arguments.length){if("function"!=typeof i){var s=Array.prototype.slice.call(arguments);"function"==typeof s.slice(-1)[0]&&(i=s.pop())}return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),i)}if("function"==typeof o&&(i=o,o=""),o.toString().toLowerCase()===T.MESSAGE_TYPE_ADMIN||o===v.MessageTypeFilter.ADMIN?o="ADMM":o.toString().toLowerCase()===T.MESSAGE_TYPE_USER||o===v.MessageTypeFilter.USER?o="MESG":o.toString().toLowerCase()===T.MESSAGE_TYPE_FILE||o===v.MessageTypeFilter.FILE?o="FILE":null!==o&&void 0!==o&&o!==v.MessageTypeFilter.ALL||(o=""),!p(e)||"boolean"!=typeof a||"string"!=typeof o)return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),i);if(r.hasMore){if(r.isLoading)return void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),i);r.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,t,e,0,!1,a,o,"",function(a,o){if(o)return r.isLoading=!1,void S(null,o,i);var s=a.messages,c=[];for(var u in s){var l=T.build(s[u],n);l&&(c.push(l),l.createdAt<=t&&(t=l.createdAt))}(c.length<=0||c.length<e)&&(r.hasMore=!1),r.isLoading=!1,S(c,null,i)})}}},W=function(e,n){var t,r,a,o="";this.hasNext=!0,this.limit=20,this.isLoading=!1,this.userIds=[],this.metaDataKey="",this.metaDataValues=[];var i=this;switch(n&&(r=n),t=e){case W.ALL_USER:case W.BLOCKED_USER:a="users";break;case W.FILTERED_USER:this.userIds=n,a="users";break;case W.PARTICIPANT:a="participants";break;case W.MUTED_USER:a="muted_list";break;case W.BANNED_USER:a="banned_list"}this.next=function(n){if(!i.hasNext)return void S([],null,n);if(!X.getInstance().hasLoggedIn())return void(n&&S(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED),n));if(i.isLoading)return void S(null,new g("Query in progress.",Q.QUERY_IN_PROGRESS),n);if(!p(i.limit)||!Array.isArray(i.userIds)||"string"!=typeof i.metaDataKey||!Array.isArray(i.metaDataValues)||i.metaDataKey&&h(i.metaDataValues)||!i.metaDataKey&&!h(i.metaDataValues))return void S(null,new g("Invalid parameter.",Q.INVALID_PARAMETER),n);i.isLoading=!0;var s=function(t,r){if(r)return i.isLoading=!1,void S(null,r,n);(o=t.next)||(i.hasNext=!1);var s=t[a],c=[];for(var u in s)e==W.BANNED_USER?c.push(new F(s[u].user)):c.push(new F(s[u]));i.isLoading=!1,S(c,null,n)};switch(t){case W.ALL_USER:$.getInstance().loadUserList(o,i.limit,[],i.metaDataKey,i.metaDataValues,s);break;case W.FILTERED_USER:$.getInstance().loadUserList(o,i.limit,i.userIds,i.metaDataKey,i.metaDataValues,s);break;case W.BLOCKED_USER:$.getInstance().loadBlockedUserList(X.getInstance().getCurrentUserId(),o,i.limit,s);break;case W.PARTICIPANT:$.getInstance().loadOpenChannelParticipantList(r.url,o,i.limit,s);break;case W.MUTED_USER:$.getInstance().loadOpenChannelMutedList(r.url,o,i.limit,s);break;case W.BANNED_USER:$.getInstance().loadOpenChannelBanList(r.url,o,i.limit,s)}}};W.ALL_USER="alluser",W.FILTERED_USER="filtereduser",W.BLOCKED_USER="blockeduser",W.PARTICIPANT="participant",W.MUTED_USER="muteduser",W.BANNED_USER="banneduser";var Q=function(){};Q.INVALID_INITIALIZATION=800100,Q.CONNECTION_REQUIRED=800101,Q.INVALID_PARAMETER=800110,Q.NETWORK_ERROR=800120,Q.NETWORK_ROUTING_ERROR=800121,Q.MALFORMED_DATA=800130,Q.MALFORMED_ERROR_DATA=800140,Q.WRONG_CHANNEL_TYPE=800150,Q.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160,Q.QUERY_IN_PROGRESS=800170,Q.ACK_TIMEOUT=800180,Q.LOGIN_TIMEOUT=800190,Q.WEBSOCKET_CONNECTION_CLOSED=800200,Q.WEBSOCKET_CONNECTION_FAILED=800210,Q.REQUEST_FAILED=800220,Q.FILE_UPLOAD_CANCEL_FAILED=800230,Q.REQUEST_CANCELLED=800240;var J=function(n){var o,i,c=!1,u=0;n||(n=new J.WSClientHandler);var l=function(){u=(new Date).getTime()};this.getConnectionState=function(){return 1==o.readyState?X.getInstance().connectionState.OPEN:X.getInstance().connectionState.CLOSED};var d=function(){var e,r;this.ping=function(){a&&t.log("PING"),clearTimeout(e),clearTimeout(r),e=setTimeout(function(){var o=V.bPing();X.getInstance().wsClient.send(o),r=setTimeout(function(){a&&t.log("PING Timeout"),clearTimeout(e),clearTimeout(r),n.onError()},5e3)},15e3)},this.stop=function(){clearTimeout(e),clearTimeout(r)}},f=new d;this.connect=function(u,d,h){a&&t.log("WSClient connect called"),i=h;var p=null,m=!1;try{p="undefined"==typeof WebSocket?r("./node_modules/websocket/lib/browser.js").w3cwebsocket:WebSocket}catch(e){p=WebSocket}try{var g="/?p=JS&pv="+encodeURIComponent(s)+"&sv="+encodeURIComponent("3.0.48")+"&ai="+encodeURIComponent(w);if($.getInstance().sessionKey?g+="&key="+encodeURIComponent($.getInstance().sessionKey):g+="&user_id="+encodeURIComponent(u)+"&access_token="+encodeURIComponent(d),!(o=new p(i+g)))return void n.onError(e)}catch(e){return void n.onError(e)}if(a)try{window.ws=o}catch(e){}o.onopen=function(e){f&&f.ping(),a&&t.log("WSClient onopen called"),n.onOpen(e)},o.onmessage=function(e){l();var r=e.data.split("\n");for(var o in r){var i=r[o];if(i&&"string"==typeof i){try{if("PONG"==i.substring(0,4)){f&&f.ping();continue}}catch(e){a&&t.log("ws.onmessage-command check error: ",e)}n.onMessage(i)}}},o.onclose=function(e){a&&t.log("WSClient ws.onclose called - e, explicitDisconnect: ",e,c),f&&f.stop(),c?n.onClose(e):m||n.onError(e),c=!1},o.onerror=function(e){a&&t.log("WSClient ws.onerror called: ",e),f&&f.stop(),m=!0,n.onError(e)}},this.disconnect=function(e,r){a&&t.log("WSClient disconnect called [explicit]: ",e),f&&f.stop(),f=null,c=1==e,o&&(o.onopen=function(){},o.onmessage=function(){},o.onclose=function(){r&&r()},o.onerror=function(){},o.close(),o=null),c?n.onClose():n.onError(),c=!1},this.send=function(e,n){1!=o.readyState?n&&n(null,new g("Connection is not valid. Please reconnect.",Q.WEBSOCKET_CONNECTION_CLOSED)):(o.send(e.encode()),n&&n(null,null))}};J.WSClientHandler=function(){this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}};var $=function(){var e=$.getInstance();if(e)return e;this.sessionKey;var n=0;this.getMessageChangeLogsByToken=function(e,n,t,r){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(n));var o={};t&&(o.token=t),s(a,o,r)},this.setChannelInvitationPreference=function(e,n,t){var r=$.API_USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(e));d(r,{auto_accept:n},t)},this.getChannelInvitationPreference=function(e,n){var t=$.API_USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(e));s(t,n)},this.getGroupChannelCount=function(e,n,t){var r=$.API_USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(e)),a="";a=n===M.memberState.JOINED?"joined":n===M.memberState.INVITED?"invited":"all",s(r,{state:a},t)},this.getTotalUnreadMessageCount=function(e,n){var t=$.API_USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(e));s(t,n)},this.getTotalUnreadChannelCount=function(e,n){var t=$.API_USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(e));s(t,n)},this.checkRouting=function(e){if(X.getInstance()&&X.getInstance().customApiHost&&X.getInstance().customWsHost)"function"==typeof e&&e({API_HOST:X.getInstance().customApiHost,WS_HOST:X.getInstance().customWsHost});else{var t=(new Date).getTime()/1e3;0==n||n-t>300?A($.API_ROUTING_URL.replace("%s",w),{},"GET",{SendBird:u+w},function(r,a){if(a)return void e(null,new g("Server is unreachable.",Q.NETWORK_ROUTING_ERROR));o=r.ws_server,i=r.api_server,n=t,"function"==typeof e&&e({API_HOST:i,WS_HOST:o})}):e({API_HOST:X.getInstance().getCurrentApiHost(),WS_HOST:X.getInstance().getCurrentWsHost()},null)}};var t=function(e,n,t,r,a,o,i,s,l,d){if(!X.getInstance().hasLoggedIn())return void(i&&i(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(n,h){if(h)i(null,new g("Request failed.",Q.REQUEST_FAILED));else{var p=O();p.open("POST",n.API_HOST+e,!0),p.setRequestHeader("SendBird",u+w),p.setRequestHeader("Session-Key",$.getInstance().sessionKey);var m=c?new c:new FormData;r&&"undefined"!=typeof Blob?m.append("file",new Blob([t],{type:r}),t.name):m.append("file",t,t.name),o&&m.append("channel_url",o);for(var v in a){var b=parseInt(v)+1;m.append("thumbnail"+b,a[v].maxWidth+","+a[v].maxHeight)}p.onload=function(){l&&l[d]&&delete l[d],p.status>=200&&p.status<400?f(null,JSON.parse(p.responseText),i):f({status:p.status,statusText:p.statusText,response:p.responseText},null,i)},p.onerror=function(e){l&&l[d]&&delete l[d],i(null,new g(p.statusText,Q.REQUEST_FAILED))},p.onabort=function(e){l&&l[d]&&delete l[d],i(null,new g("File upload has been cancelled.",Q.REQUEST_CANCELLED))},p.upload.onprogress=function(e){e.lengthComputable&&e.loaded>=e.total&&l&&l[d]&&delete l[d],s&&s(e)},m.oldIE?(p.setRequestHeader("Content-Type","multipart/form-data; boundary="+m.boundary),p.send(m.toString())):p.send(m),l&&(l[d]=p)}})},r=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(r,a){a?t(null,new g("Request failed.",Q.REQUEST_FAILED)):A(r.API_HOST+e,n,"DELETE",{"Session-Key":$.getInstance().sessionKey,SendBird:u+w},t)})},a=function(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(n+=encodeURIComponent(e[t])+",");return n.length>1&&(n=n.substring(0,n.length-1)),n},s=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED)));var r,a="";if(n){for(var o in n)""!=a&&(a+="&"),a+=o+"="+n[o];r=e+"?"+a}else r=e;$.getInstance().checkRouting(function(e,a){a?t(null,new g("Request failed.",Q.REQUEST_FAILED)):A(e.API_HOST+r,n,"GET",{"Session-Key":$.getInstance().sessionKey,SendBird:u+w},t)})},l=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(r,a){a?t(null,a):A(r.API_HOST+e,n,"POST",{"Session-Key":$.getInstance().sessionKey,SendBird:u+w},t)})},d=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(r,a){a||A(r.API_HOST+e,n,"PUT",{"Session-Key":$.getInstance().sessionKey,SendBird:u+w},t)})};this.createUserMetaData=function(e,n,t){var r=$.API_USERS_USERID_METADATA.replace("%s",encodeURIComponent(e)),a={};a.metadata=n,l(r,a,t)},this.updateUserMetaData=function(e,n,t,r){var a=$.API_USERS_USERID_METADATA.replace("%s",encodeURIComponent(e)),o={};o.metadata=n,o.upsert=t,d(a,o,r)},this.deleteAllUserMetaData=function(e,n){var t=$.API_USERS_USERID_METADATA.replace("%s",encodeURIComponent(e));r(t,{},n)},this.deleteUserMetaData=function(e,n,t){var a=$.API_USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(a,{},t)},this.resetMyHistory=function(e,n){var t=$.API_GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(e));d(t,{},n)},this.groupChannelInvite=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(e)),a={},o=[];try{Array.isArray(n)?o=n:o.push(n)}catch(e){t(null,new g("Invalid parameter.",Q.INVALID_PARAMETER))}a.user_ids=o,l(r,a,t)},this.acceptInvitation=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(e)),a={};a.user_id=n,d(r,a,t)},this.declineInvitation=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(e)),a={};a.user_id=n,d(r,a,t)},this.groupChannelHide=function(e,n,t,r){var a=$.API_GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(e)),o={};o.user_id=n,o.hide_previous_messages=t,d(a,o,r)},this.groupChannelLeave=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(e)),a={};a.user_id=n,d(r,a,t)},this.groupChannelMarkAsRead=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD.replace("%s",encodeURIComponent(e)),a={};a.user_id=n,d(r,a,t)},this.groupChannelMarkAsReadAll=function(e,n){var t=$.API_USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(e));d(t,{},n)},this.messageList=function(e,n,t,r,a,o,i,c,u,l){var d;d=e?String($.API_OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",n)):String($.API_GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",n));var f={};f.is_sdk=String(!0),f.message_ts=String(t),f.prev_limit=String(r),f.next_limit=String(a),f.include=String(o),f.reverse=String(i),c&&(f.message_type=String(c)),u&&(f.custom_type=String(u)),s(d,f,l)},this.messageListByID=function(e,n,t,r,a,o,i,c,u,l){var d;d=e?String($.API_OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",n)):String($.API_GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",n));var f={};f.is_sdk=String(!0),f.message_id=t,f.prev_limit=String(r),f.next_limit=String(a),f.include=String(o),f.reverse=String(i),c&&(f.message_type=String(c)),u&&(f.custom_type=String(u)),s(d,f,l)},this.login=function(e,n,t){var r=$.API_USERS_USERID_LOGIN.replace("%s",encodeURIComponent(e)),a={};a.app_id=w,n&&(a.access_token=n),l(r,a,function(e,n){n?t(null,n):($.getInstance().sessionKey=e.key,$.getInstance().ekey=e.ekey,t(e,n))})},this.updateUserInfo=function(e,n,t,r){var a={};n&&(a.nickname=n),t&&(a.profile_url=t);var o=String($.API_USERS_USERID).replace("%s",encodeURIComponent(e));d(o,a,r)},this.getGroupChannel=function(e,n,t,r){var a=$.API_GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)),o={member:String(n),read_receipt:String(t)};s(a,o,r)},this.getOpenChannel=function(e,n){var t=$.API_OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e));s(t,n)},this.createGroupChannel=function(e,n,t,r,a,o,i){var s=$.API_GROUPCHANNELS,u=[];"string"==typeof e?u.push(e):e.forEach(function(e){u.push(e)});var d;r&&"string"!=typeof r?(d=c?new c:new FormData,r&&d.append("cover_file",r,r.name),d.append("user_ids",u),d.append("is_distinct",n),null!==t&&"string"==typeof t&&d.append("name",t),a&&d.append("data",a),o&&d.append("custom_type",o)):(d={},null!==r&&"string"==typeof r&&(d.cover_url=r),d.user_ids=u,d.is_distinct=n,null!==t&&"string"==typeof t&&(d.name=t),a&&(d.data=a),o&&(d.custom_type=o)),l(s,d,i)},this.createOpenChannel=function(e,n,t,r,a,o){var i,s=String($.API_OPENCHANNELS);n&&"string"!=typeof n?(i=c?new c:new FormData,n&&i.append("cover_file",n,n.name),null!==e&&"string"==typeof e&&i.append("name",e),t&&i.append("data",t),r&&(Array.isArray(r)?i.append("operators",r):i.append("operators",[r])),a&&i.append("custom_type",a)):(i={},null!==n&&"string"==typeof n&&(i.cover_url=n),null!==e&&"string"==typeof e&&(i.name=e),t&&(i.data=t),r&&(Array.isArray(r)?i.operators=r:i.operators=[r]),a&&(i.custom_type=a)),l(s,i,o)},this.updateGroupChannel=function(e,n,t,r,a,o,i){var s,u=String($.API_GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)));r&&"string"!=typeof r?(s=c?new c:new FormData,s.append("is_distinct",n),r&&s.append("cover_file",r,r.name),null!==t&&"string"==typeof t&&s.append("name",t),null!==a&&"string"==typeof a&&s.append("data",a),null!==o&&"string"==typeof o&&s.append("custom_type",o)):(s={},s.is_distinct=n,null!==r&&"string"==typeof r&&(s.cover_url=r),null!==t&&"string"==typeof t&&(s.name=t),null!==a&&"string"==typeof a&&(s.data=a),null!==o&&"string"==typeof o&&(s.custom_type=o)),d(u,s,i)},this.updateOpenChannel=function(e,n,t,r,a,o,i){var s,u=String($.API_OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)));t&&"string"!=typeof t?(s=c?new c:new FormData,t&&s.append("cover_file",t,t.name),null!==n&&"string"==typeof n&&s.append("name",n),null!==r&&"string"==typeof r&&s.append("data",r),null!==a&&(Array.isArray(a)?s.append("operators",a):s.append("operators",[a])),null!==o&&"string"==typeof o&&s.append("custom_type",o)):(s={},null!==t&&"string"==typeof t&&(s.cover_url=t),null!==n&&"string"==typeof n&&(s.name=n),null!==r&&"string"==typeof r&&(s.data=r),null!==a&&(Array.isArray(a)?s.operators=a:s.operators=[a]),null!==o&&"string"==typeof o&&(s.custom_type=o)),d(u,s,i)},this.deleteOpenChannel=function(e,n){var t=String($.API_OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)));r(t,{},n)},this.createMetaCounters=function(e,n,t,r){var a;a=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n));var o={};o.metacounter=t,l(a,o,r)},this.updateMetaCounters=function(e,n,t,r,a,o){var i;i=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n));var s={};switch(s.metacounter=t,s.upsert=r,a){case $.UPDATE_META_COUNTER_MODE_SET:s.mode="set";break;case $.UPDATE_META_COUNTER_MODE_INC:s.mode="increase";break;case $.UPDATE_META_COUNTER_MODE_DEC:s.mode="decrease"}d(i,s,o)},this.getAllMetaCounters=function(e,n,t){this.getMetaCounters(e,n,{},t)},this.getMetaCounters=function(e,n,t,r){var o;o=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n));var i=a(t);s(o,{keys:i},r)},this.deleteMetaCounter=function(e,n,t,a){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t),r(o,{},a)},this.deleteAllMetaCounters=function(e,n,t){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)),r(a,{},t)},this.createMetaData=function(e,n,t,r){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n));var o={},i={};for(var s in t){var c=t[s];i[s]=c}o.metadata=i,l(a,o,r)},this.updateMetaData=function(e,n,t,r,a){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n));var i={},s={};for(var c in t){var u=t[c];s[c]=u}i.metadata=s,i.upsert=r,d(o,i,a)},this.getAllMetaData=function(e,n,t){this.getMetaData(e,n,{},t)},this.getMetaData=function(e,n,t,r){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n));var i=a(t);s(o,{keys:i},r)},this.deleteMetaData=function(e,n,t,a){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t):$.API_GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t),r(o,{},a)},this.deleteAllMetaData=function(e,n,t){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)),r(a,{},t)},this.loadUserList=function(e,n,t,r,a,o){var i=$.API_USERS,c={token:encodeURIComponent(e),limit:String(n)};if(!h(t))try{var u="";for(var l in t){var d=t[l];u+=encodeURIComponent(d)+","}u.length>1&&(u=u.substring(0,u.length-1)),c.user_ids=u}catch(e){}if(r&&!h(a)){var f="";a.forEach(function(e){f+=encodeURIComponent(e)+","}),f.length>0&&(f=f.substring(0,f.length-1)),c.metadatakey=encodeURIComponent(r),c.metadatavalues_in=f}s(i,c,o)},this.loadBlockedUserList=function(e,n,t,r){var a=$.API_USERS_USERID_BLOCK.replace("%s",encodeURIComponent(e)),o={token:encodeURIComponent(n),limit:String(t)};s(a,o,r)},this.loadOpenChannelList=function(e,n,t,r,a,o){var i=$.API_OPENCHANNELS,c={token:encodeURIComponent(e),limit:String(n)};null!==t&&(c.name_contains=encodeURIComponent(t)),r&&(c.url_contains=encodeURIComponent(r)),null!==a&&(c.custom_type=encodeURIComponent(a)),s(i,c,o)},this.uploadFile=function(e,n,r,a,o,i,s,c){t($.API_STORAGE_FILE,0,e,n,r,a,o,i,s,c)},this.uploadProfileImage=function(e,n){t($.API_STORAGE_PROFILE,0,e,"",[],"",n)},this.loadUserGroupChannelList=function(e,n,t,r,o,i,c,u,l,d,f,h,p){var m=$.API_MYGROUPCHANNELS.replace("%s",encodeURIComponent(e)),g={token:encodeURIComponent(n),limit:String(t),show_member:!0,show_read_receipt:!0,show_empty:String(r),order:o,member_state_filter:d};if(h&&(g.custom_type=encodeURIComponent(h)),u)try{g.members_nickname_contains=encodeURIComponent(u)}catch(e){}if(f)try{g.name_contains=encodeURIComponent(f)}catch(e){}if(i.length>0)try{c?g.members_exactly_in=a(i):(g.members_include_in=a(i),g.query_type=l)}catch(e){}s(m,g,p)},this.loadOpenChannelParticipantList=function(e,n,t,r){var a=$.API_OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",e),o={token:encodeURIComponent(n),limit:String(t)};s(a,o,r)},this.loadOpenChannelMutedList=function(e,n,t,r){var a=$.API_OPENCHANNELS_CHANNELURL_MUTE.replace("%s",e),o={token:encodeURIComponent(n),limit:String(t)};s(a,o,r)},this.loadOpenChannelBanList=function(e,n,t,r){var a=$.API_OPENCHANNELS_CHANNELURL_BAN.replace("%s",e),o={token:encodeURIComponent(n),limit:String(t)};s(a,o,r)},this.setPushTemplate=function(e,n,t){var r=$.API_USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(e));d(r,{name:n},t)},this.getPushTemplate=function(e,n){var t=$.API_USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(e));s(t,n)},this.setDoNotDisturb=function(e,n,t,r,a,o,i,s){var c=$.API_USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(e));d(c,{do_not_disturb:n,start_hour:t,start_min:r,end_hour:a,end_min:o,timezone:i},s)},this.getDoNotDisturb=function(e,n){var t=$.API_USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(e));s(t,n)},this.setPushPreference=function(e,n,t,r){var a=$.API_USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n)),o={};o.enable=t,d(a,o,r)},this.getPushPreference=function(e,n,t){var r=$.API_USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));s(r,t)},this.registerGCMPushToken=function(e,n,t){var r=$.API_USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(e));l(r,{gcm_reg_token:n},t)},this.unregisterGCMPushToken=function(e,n,t){var a=$.API_USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(a,t)},this.unregisterGCMPushTokenAll=function(e,n){var t=$.API_USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(e));r(t,n)},this.registerAPNSPushToken=function(e,n,t){var r=$.API_USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(e));l(r,{apns_device_token:n},t)},this.unregisterAPNSPushToken=function(e,n,t){var a=$.API_USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(a,t)},this.unregisterAPNSPushTokenAll=function(e,n){var t=$.API_USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(e));r(t,n)},this.unregisterPushTokenAll=function(e,n){var t=$.API_USERS_USERID_PUSH.replace("%s",encodeURIComponent(e));r(t,n)},this.blockUser=function(e,n,t){var r=$.API_USERS_USERID_BLOCK.replace("%s",encodeURIComponent(e));l(r,{target_id:n},t)},this.unblockUser=function(e,n,t){var a=$.API_USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(a,{},t)},this.banUser=function(e,n,t,r,a){var o=$.API_OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(e)),i={user_id:n};t&&(i.description=t),i.seconds=String(r),l(o,i,a)},this.unbanUser=function(e,n,t){var a=$.API_OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(a,{},t)},this.muteUser=function(e,n,t){var r=$.API_OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(e));l(r,{user_id:n},t)},this.unmuteUser=function(e,n,t){var a=$.API_OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(a,{},t)},this.deleteMessage=function(e,n,t,a){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(n)).replace("%s",encodeURIComponent(t)):$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(n)).replace("%s",encodeURIComponent(t)),r(o,{},a)}},Z=null;$.getInstance=function(){return null===Z?null:Z},$.API_VERSION="v3",$.API_ROUTING_URL="https://api-p.sendbird.com/routing/%s",$.API_USERS="/%v/users".replace("%v",$.API_VERSION),$.API_USERS_USERID_LOGIN="/%v/users/%s/login".replace("%v",$.API_VERSION),$.API_USERS_USERID="/%v/users/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_METADATA="/%v/users/%s/metadata".replace("%v",$.API_VERSION),$.API_USERS_USERID_METADATA_KEY="/%v/users/%s/metadata/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_UNREAD_MESSAGE_COUNT="/%v/users/%s/unread_message_count".replace("%v",$.API_VERSION),$.API_USERS_USERID_UNREAD_CHANNEL_COUNT="/%v/users/%s/unread_channel_count".replace("%v",$.API_VERSION),$.API_USERS_USERID_MARKASREADALL="/%v/users/%s/mark_as_read_all".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_GCM_TOKEN="/%v/users/%s/push/gcm/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_GCM="/%v/users/%s/push/gcm".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSHPREFERENCE_CHANNELURL="/%v/users/%s/push_preference/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSHPREFERENCE="/%v/users/%s/push_preference/".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_TEMPLATE="/%v/users/%s/push/template".replace("%v",$.API_VERSION),$.API_USERS_USERID_BLOCK="/%v/users/%s/block".replace("%v",$.API_VERSION),$.API_USERS_USERID_BLOCK_TARGETID="/%v/users/%s/block/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_APNS_TOKEN="/%v/users/%s/push/apns/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_APNS="/%v/users/%s/push/apns".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH="/%v/users/%s/push".replace("%v",$.API_VERSION),$.API_USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE="/%v/users/%s/channel_invitation_preference".replace("%v",$.API_VERSION),$.API_USERS_USERID_GROUP_CHANNEL_COUNT="/%v/users/%s/group_channel_count".replace("%v",$.API_VERSION),$.API_OPENCHANNELS="/%v/open_channels".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL="/%v/open_channels/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MESSAGES="/%v/open_channels/%s/messages".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID="/%v/open_channels/%s/messages/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_PARTICIPANTS="/%v/open_channels/%s/participants".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METADATA="/%v/open_channels/%s/metadata".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METADATA_KEY="/%v/open_channels/%s/metadata/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METACOUNTER="/%v/open_channels/%s/metacounter".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METACOUNTER_KEY="/%v/open_channels/%s/metacounter/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_BAN="/%v/open_channels/%s/ban".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_BAN_USERID="/%v/open_channels/%s/ban/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MUTE="/%v/open_channels/%s/mute".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MUTE_USERID="/%v/open_channels/%s/mute/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS="/%v/group_channels".replace("%v",$.API_VERSION),$.API_MYGROUPCHANNELS="/%v/users/%s/my_group_channels".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL="/%v/group_channels/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_INVITE="/%v/group_channels/%s/invite".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION="/%v/group_channels/%s/accept".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION="/%v/group_channels/%s/decline".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_HIDE="/%v/group_channels/%s/hide".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_LEAVE="/%v/group_channels/%s/leave".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES="/%v/group_channels/%s/messages".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD="/%v/group_channels/%s/messages/mark_as_read".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT="/%v/group_channels/%s/messages/total_count".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT="/%v/group_channels/%s/messages/unread_count".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID="/%v/group_channels/%s/messages/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MEMBERS="/%v/group_channels/%s/members".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METADATA="/%v/group_channels/%s/metadata".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METADATA_KEY="/%v/group_channels/%s/metadata/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER="/%v/group_channels/%s/metacounter".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY="/%v/group_channels/%s/metacounter/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_RESET_USER_HISTORY="/%v/group_channels/%s/reset_user_history".replace("%v",$.API_VERSION),$.API_STORAGE_FILE="/%v/storage/file".replace("%v",$.API_VERSION),$.API_STORAGE_PROFILE="/%v/storage/profile_image".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS="/%v/open_channels/%s/messages/changelogs".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS="/%v/group_channels/%s/messages/changelogs".replace("%v",$.API_VERSION),$.UPDATE_META_COUNTER_MODE_SET=0,$.UPDATE_META_COUNTER_MODE_INC=1,$.UPDATE_META_COUNTER_MODE_DEC=2;var X=function(e){var n=X.getInstance();if(n)return n;try{if(!e.hasOwnProperty("appId"))return t.log("Must be set appId"),{}}catch(e){return t.log("Must be set appId"),{}}this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.isSessionOpened=!1,this.pushTokenRegistrationState={SUCCESS:"success",PENDING:"pending",ERROR:"error"},this.loginTimer,this.onLoginTimerCancel,this.globalTimer,this.reconnectTimer,this.onReconnectTimerCancel,this.currentUser=null,this.getCurrentUserId=function(){return X.getInstance().currentUser?X.getInstance().currentUser.userId:null},this.wsClient,this.connectionState={CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSING:"CLOSING",CLOSED:"CLOSED"},this.ConnectionState=this.connectionState,this.BaseChannel=v,this.User=F,this.Member=B,this.OpenChannel=L,this.GroupChannel=M,this.UserMessage=x,this.FileMessage=U,this.AdminMessage=P,this.channelHandlers={},this.connectionHandlers={};var r={};w=e.appId,ee=this,Z=$.getInstance(),Z||(Z=new $),this.Options={UseMemberAsMessageSender:!1},this.customApiHost=null,this.customWsHost=null,this.ChannelHandler=function(){this.onMessageReceived=function(e,n){},this.onMessageUpdated=function(e,n){},this.onMessageDeleted=function(e,n){},this.onReadReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,n){},this.onUserLeft=function(e,n){},this.onUserEntered=function(e,n){},this.onUserExited=function(e,n){},this.onUserMuted=function(e,n){},this.onUserUnmuted=function(e,n){},this.onUserBanned=function(e,n){},this.onUserUnbanned=function(e,n){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e){},this.onUserReceivedInvitation=function(e,n,t){},this.onUserDeclinedInvitation=function(e,n,t){},this.onMetaDataCreated=function(e,n){},this.onMetaDataUpdated=function(e,n){},this.onMetaDataDeleted=function(e,n){},this.onMetaCountersCreated=function(e,n){},this.onMetaCountersUpdated=function(e,n){},this.onMetaCountersDeleted=function(e,n){},this.onChannelHidden=function(e){}},this.addChannelHandler=function(e,n){X.getInstance().channelHandlers[e]=n},this.removeChannelHandler=function(e){delete X.getInstance().channelHandlers[e]},this.removeAllChannelHandlers=function(){X.getInstance().channelHandlers={}},this.ConnectionHandler=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},this.addConnectionHandler=function(e,n){X.getInstance().connectionHandlers[e]=n},this.removeConnectionHandler=function(e){delete X.getInstance().connectionHandlers[e]},this.removeAllConnectionHandlers=function(){X.getInstance().connectionHandlers={}},this.createUserListQuery=function(e){return e?new W(W.FILTERED_USER,e):new W(W.ALL_USER)},this.createBlockedUserListQuery=function(){return new W(W.BLOCKED_USER)},this.getApplicationId=function(){return w},this.getDebugMode=function(){return a},this.setDebugMode=function(e){a=e},this.setAPIHost=function(e){i=e},this.setWSHost=function(e){o=e},this.clearCurrentApiHost=function(){this.customApiHost=null},this.getCurrentApiHost=function(){return this.customApiHost?this.customApiHost:i},this.clearCurrentWsHost=function(){this.customWsHost=null},this.getCurrentWsHost=function(){return this.customWsHost?this.customWsHost:o},this.setErrorFirstCallback=function(e){N=e},this.getConnectionState=function(){if(!X.getInstance())return this.connectionState.CLOSED;try{return X.getInstance().wsClient?X.getInstance().isSessionOpened?X.getInstance().wsClient.getConnectionState():X.getInstance().connectionState.CONNECTING:X.getInstance().connectionState.CLOSED}catch(e){return X.getInstance().connectionState.CLOSED}},this.hasLoggedIn=function(){return X.getInstance().currentUser&&$.getInstance().sessionKey};var s=function(e){return r.hasOwnProperty(e)?r[e]:null},c=function(e){var n=new V(e);if(n.requestId){var r=s(n.requestId);if(null==r)return;clearTimeout(r.timer);var a=r.handler;if(a)if("EROR"==n.command){var o=n.getJsonElement(),i=o.code,c=o.message;a(n,new g(c,i))}else a(n,null)}else switch(n.command){case"LOGI":if(X.getInstance().loginTimer){clearTimeout(X.getInstance().loginTimer),X.getInstance().loginTimer=null,X.getInstance().onLoginTimerCancel=null;var d=n.getJsonElement();if(d.hasOwnProperty("error")){X.getInstance().isSessionOpened=!1;var i=d.code,c=d.message;X.getInstance().loginHandler(null,new g(c,i))}else X.getInstance().isSessionOpened=!0,d.hasOwnProperty("key")&&($.getInstance().sessionKey=d.key),d.hasOwnProperty("ekey")&&($.getInstance().ekey=d.ekey),d.hasOwnProperty("user_id")&&(X.getInstance().currentUser=new F(d)),X.getInstance().loginHandler(X.getInstance().currentUser,null)}break;case"MESG":case"FILE":case"BRDM":case"ADMM":var f="",h=!1;if("MESG"==n.command?f=new x(n.getJsonElement()):"FILE"==n.command?f=new U(n.getJsonElement()):(f=new P(n.getJsonElement()),n.getJsonElement().hasOwnProperty("silent")&&(h=n.getJsonElement().silent)),!f)return;if(f.isGroupChannel()){var p=M.cachedChannels.hasOwnProperty(f.channelUrl);M.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(a&&a(null,n));if(e.isHidden=!1,M.cachedChannels[e.url]=e,f._sender&&e.memberMap.hasOwnProperty(f._sender.userId)){var r=e.memberMap[f._sender.userId];r.nickname!=f._sender.nickname&&(r.nickname=f._sender.nickname),r.profileUrl!=f._sender.profileUrl&&(r.profileUrl=f._sender.profileUrl)}var o=X.getInstance().currentUser;if(o&&f._sender&&o.userId==f._sender.userId&&(o.nickname!=f._sender.nickname&&(o.nickname=f._sender.nickname),o.profileUrl!=f._sender.profileUrl&&(o.profileUrl=f._sender.profileUrl)),!h){p&&(e.updatedLocal?(e.lastMessage=f,f.sender&&f.sender.userId==X.getInstance().getCurrentUserId()||e.unreadMessageCount++):(!e.lastMessage||e.lastMessage.createdAt<f.createdAt)&&(e.updatedLocal=!0,e.lastMessage=f,f.sender&&f.sender.userId==X.getInstance().getCurrentUserId()||e.unreadMessageCount++));for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onChannelChanged(e)}}for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onMessageReceived(e,f)}})}else L.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(a&&a(null,n));for(var r in X.getInstance().channelHandlers)X.getInstance().channelHandlers[r].onMessageReceived(e,f)});break;case"MEDI":case"FEDI":case"AEDI":var f="";if(!(f="MEDI"==n.command?new x(n.getJsonElement()):"FEDI"==n.command?new U(n.getJsonElement()):new P(n.getJsonElement())))return;f.isGroupChannel()?M.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(a&&a(null,n));if(f._sender&&e.memberMap.hasOwnProperty(f._sender.userId)){var r=e.memberMap[f._sender.userId];r.nickname!=f._sender.nickname&&(r.nickname=f._sender.nickname),r.profileUrl!=f._sender.profileUrl&&(r.profileUrl=f._sender.profileUrl)}var o=X.getInstance().currentUser;o&&f._sender&&o.userId==f._sender.userId&&(o.nickname!=f._sender.nickname&&(o.nickname=f._sender.nickname),o.profileUrl!=f._sender.profileUrl&&(o.profileUrl=f._sender.profileUrl));for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onMessageUpdated(e,f)}):L.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(a&&a(null,n));for(var r in X.getInstance().channelHandlers)X.getInstance().channelHandlers[r].onMessageUpdated(e,f)});break;case"READ":var m=new G(n.getJsonElement()),p=M.cachedChannels.hasOwnProperty(m.channelUrl);M.getChannel(m.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(a&&a(null,n));if(m.reader.userId==X.getInstance().getCurrentUserId()){if(p){if(e.unreadMessageCount>0){e.unreadMessageCount=0;for(var r in X.getInstance().channelHandlers){var o=X.getInstance().channelHandlers[r];o.onChannelChanged(e)}}}else if(0==e.unreadMessageCount)for(var r in X.getInstance().channelHandlers){var o=X.getInstance().channelHandlers[r];o.onChannelChanged(e)}}else{e.updateReadReceipt(m.reader.userId,m.timestamp);for(var r in X.getInstance().channelHandlers){var o=X.getInstance().channelHandlers[r];o.onReadReceiptUpdated(e)}}});break;case"TPST":case"TPEN":case"MTIO":break;case"SYEV":l(n);break;case"USEV":u(n);break;case"DELM":var v=n.getJsonElement(),b=String(v.channel_type),_=String(v.channel_url),y=String(v.msg_id);switch(b){case k.CHANNEL_TYPE_OPEN:L.getChannel(_,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void t.log("Discard a command.");for(var a in X.getInstance().channelHandlers)X.getInstance().channelHandlers[a].onMessageDeleted(e,y)});break;case k.CHANNEL_TYPE_GROUP:M.getChannel(_,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void t.log("Discard a command.");for(var a in X.getInstance().channelHandlers)X.getInstance().channelHandlers[a].onMessageDeleted(e,y)})}}},u=function(e){var n=new D(e.getJsonElement());switch(n.category){case H.CATEGORY_USER_BLOCK:case H.CATEGORY_USER_UNBLOCK:var t=n.data.blocker.user_id,r=n.data.blockee.user_id;Object.keys(M.cachedChannels).forEach(function(e){var a=M.cachedChannels[e];try{X.getInstance().getCurrentUserId()===t?a.memberMap[r].isBlockedByMe=n.category===H.CATEGORY_USER_BLOCK:X.getInstance().getCurrentUserId()===r&&(a.memberMap[t].isBlockingMe=n.category===H.CATEGORY_USER_BLOCK)}catch(e){}})}},l=function(e){var n=new D(e.getJsonElement());switch(n.category){case D.CATEGORY_CHANNEL_JOIN:case D.CATEGORY_CHANNEL_LEAVE:M.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);if(n.category==D.CATEGORY_CHANNEL_JOIN){n.data.state=B.JOINED,r.addMember(new B(n.data));for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserJoined(r,i)}}else{i.userId==X.getInstance().getCurrentUserId()&&M.removeCachedChannel(n.channelUrl),r.removeMember(i);for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserLeft(r,i)}}});break;case D.CATEGORY_CHANNEL_INVITE:M.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);var i=null;n.data&&n.data.inviter&&!h(n.data.inviter)&&(i=new F(n.data.inviter));var s=[];for(var c in n.data.invitees){n.data.invitees[c].state=B.INVITED;var u=new B(n.data.invitees[c]);s.push(u),r.addMember(u)}for(var c in X.getInstance().channelHandlers)X.getInstance().channelHandlers[c].onUserReceivedInvitation(r,i,s)});break;case D.CATEGORY_CHANNEL_DECLINE_INVITE:M.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);var i=null;n.data&&n.data.inviter&&!h(n.data.inviter)&&(i=new F(n.data.inviter));var s=new F(n.data.invitee);s.userId==X.getInstance().getCurrentUserId()&&M.removeCachedChannel(n.channelUrl),r.removeMember(s);for(var c in X.getInstance().channelHandlers)X.getInstance().channelHandlers[c].onUserDeclinedInvitation(r,i,s)});break;case D.CATEGORY_TYPING_START:case D.CATEGORY_TYPING_END:M.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);n.category==D.CATEGORY_TYPING_START?r.updateTypingStatus(i,!0):r.updateTypingStatus(i,!1);for(var s in X.getInstance().channelHandlers)X.getInstance().channelHandlers[s].onTypingStatusUpdated(r)});break;case D.CATEGORY_CHANNEL_ENTER:case D.CATEGORY_CHANNEL_EXIT:L.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);n.data.hasOwnProperty("participant_count")&&(r.participantCount=n.data.participant_count);var i=new F(n.data);if(n.category==D.CATEGORY_CHANNEL_ENTER)for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserEntered(r,i)}else for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserExited(r,i)}});break;case D.CATEGORY_USER_CHANNEL_MUTE:case D.CATEGORY_USER_CHANNEL_UNMUTE:L.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);if(n.category==D.CATEGORY_USER_CHANNEL_MUTE)for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserMuted(r,i)}else for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserUnmuted(r,i)}});break;case D.CATEGORY_USER_CHANNEL_BAN:case D.CATEGORY_USER_CHANNEL_UNBAN:L.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);if(n.category==D.CATEGORY_USER_CHANNEL_BAN)for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserBanned(r,i)}else for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserUnbanned(r,i)}});break;case D.CATEGORY_CHANNEL_FREEZE:case D.CATEGORY_CHANNEL_UNFREEZE:L.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);if(r.isFrozen=n.data.freeze,n.category==D.CATEGORY_CHANNEL_FREEZE)for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onChannelFrozen(r)}else for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onChannelUnfrozen(r)}});break;case D.CATEGORY_CHANNEL_DELETED:if(n.isGroupChannel()){M.removeCachedChannel(n.channelUrl);for(var r in X.getInstance().channelHandlers){var a=X.getInstance().channelHandlers[r];a.onChannelDeleted(n.channelUrl,"group")}}else{L.removeCachedChannel(n.channelUrl);for(var r in X.getInstance().channelHandlers){var a=X.getInstance().channelHandlers[r];a.onChannelDeleted(n.channelUrl,"open")}}break;case D.CATEGORY_CHANNEL_PROP_CHANGED:n.isOpenChannel()?L.getChannelWithoutCache(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onChannelChanged(r)}):M.getChannelWithoutCache(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onChannelChanged(r)});break;case D.CATEGORY_CHANNEL_META_DATA_CHANGED:case D.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var o=n.data.hasOwnProperty("created"),i=n.data.hasOwnProperty("updated"),s=n.data.hasOwnProperty("deleted");n.isOpenChannel()?L.getChannel(n.channelUrl,function(r,a){if(N){var c=r;r=a,a=c}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);for(var u in X.getInstance().channelHandlers){var l=X.getInstance().channelHandlers[u];n.category==D.CATEGORY_CHANNEL_META_DATA_CHANGED?(o&&l.onMetaDataCreated(r,n.data.created),i&&l.onMetaDataUpdated(r,n.data.updated),s&&l.onMetaDataDeleted(r,n.data.deleted)):(o&&l.onMetaCountersCreated(r,n.data.created),i&&l.onMetaCountersUpdated(r,n.data.updated),s&&l.onMetaCountersDeleted(r,n.data.deleted))}}):M.getChannel(n.channelUrl,function(r,a){if(N){var c=r;r=a,a=c}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);for(var u in X.getInstance().channelHandlers){var l=X.getInstance().channelHandlers[u];n.category==D.CATEGORY_CHANNEL_META_DATA_CHANGED?(o&&l.onMetaDataCreated(r,n.data.created),i&&l.onMetaDataUpdated(r,n.data.updated),s&&l.onMetaDataDeleted(r,n.data.deleted)):(o&&l.onMetaCountersCreated(r,n.data.created),i&&l.onMetaCountersUpdated(r,n.data.updated),s&&l.onMetaCountersDeleted(r,n.data.deleted))}});break;case D.CATEGORY_CHANNEL_HIDE:M.getChannel(n.channelUrl,function(r,a){if(N){var o=r;r=a,a=o}if(a)return void t.log("Discard a command: "+e.command+":"+n.category);r.isHidden=!0;for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onChannelHidden(r)})}};this.setPushTemplate=function(e,n){return!e||e!==this.PUSH_TEMPLATE_DEFAULT&&e!==this.PUSH_TEMPLATE_ALTERNATIVE?void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n):this.currentUser?void $.getInstance().setPushTemplate(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);var r=e.name.toString();S(r,null,n)}):void S(null,new g("Connection must be made before you set push template",Q.CONNECTION_REQUIRED),n)},this.getPushTemplate=function(e){if(!this.currentUser)return void S(null,new g("Connection must be made before you get push template",Q.CONNECTION_REQUIRED),e);$.getInstance().getPushTemplate(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=n.name.toString();S(r,null,e)})},this.setChannelInvitationPreference=function(e,n){"boolean"!=typeof e&&S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),n),$.getInstance().setChannelInvitationPreference(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S({autoAccept:e.auto_accept},null,n)})},this.getChannelInvitationPreference=function(e){$.getInstance().getChannelInvitationPreference(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S({autoAccept:n.auto_accept},null,e)})},this.connect=function(){var e=Array.prototype.slice.call(arguments),n=null,r=null,o=null;switch("function"==typeof e.slice(-1)[0]&&(o=e.pop()),e.length){case 1:n=e[0];break;case 2:n=e[0],r=e[1];break;case 3:n=e[0],this.customApiHost=e[1],this.customWsHost=e[2];break;case 4:n=e[0],r=e[1],this.customApiHost=e[2],this.customWsHost=e[3];break;default:a&&t.log("sb.connect args length error: ",arguments)}n&&0!=n.length?(m(!0,null),_(n,r,o)):S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),o)};var d=!1,f=!1,p=!0;this.setBackgroundState=function(){!d&&p&&(d=!0,this.getConnectionState()!=this.connectionState.CLOSED?(f=!0,m(!1,null)):f=!1)},this.setForegroundState=function(){d&&p&&(d=!1,f&&this.currentUser&&(R=0,b(this.getCurrentUserId(),!0)))},this.disableStateChange=function(){p=!1},this.enableStateChange=function(){p=!0},this.disconnect=function(e){m(!0,e)},this.reconnect=function(){if(!$.getInstance().sessionKey||!this.currentUser)return!1;var e=!0;return R>0&&(e=!1),m(!1,null),R=0,b(this.getCurrentUserId(),e),!0};var m=function(e,n){var t=this;X.getInstance().loginTimer&&(clearTimeout(X.getInstance().loginTimer),X.getInstance().onLoginTimerCancel&&(X.getInstance().onLoginTimerCancel(),X.getInstance().onLoginTimerCancel=null),X.getInstance().loginTimer=null),X.getInstance().reconnectTimer&&(clearTimeout(X.getInstance().reconnectTimer),X.getInstance().onReconnectTimerCancel&&(X.getInstance().onReconnectTimerCancel(),X.getInstance().onReconnectTimerCancel=null),X.getInstance().reconnectTimer=null),X.getInstance().wsClient&&(R=0,X.getInstance().wsClient.disconnect(!0),X.getInstance().wsClient=null),function(){if(e){L.clearEnteredChannels(),L.clearCache(),M.clearCache(),X.getInstance().globalTimer&&(clearTimeout(t.globalTimer),X.getInstance().globalTimer=null);for(var r in X.getInstance().ackStateMap)clearTimeout(X.getInstance().ackStateMap[r].timer);X.getInstance().ackStateMap={},X.getInstance().currentUser=null,$.getInstance().sessionKey=null,$.getInstance().ekey=null}S(null,null,n)}()},b=function(e,n){if(X.getInstance().reconnectTimer)a&&t.log("still reconnecting");else{if((R+=1)<=1){if(n)for(var r in X.getInstance().connectionHandlers){var o=X.getInstance().connectionHandlers[r];o.onReconnectStarted(r)}j=0}else j=3e3*Math.pow(2,R-2);if(!e||!$.getInstance().sessionKey||R>=6){m(!1,null),R=0;for(var r in X.getInstance().connectionHandlers){var o=X.getInstance().connectionHandlers[r];o.onReconnectFailed(r)}return}X.getInstance().onReconnectTimerCancel=function(){R=0},X.getInstance().reconnectTimer=setTimeout(function(){X.getInstance().reconnectTimer=null,X.getInstance().onReconnectTimerCancel=null,X.getInstance().wsClient&&X.getInstance().wsClient.disconnect(!0);var n=new J.WSClientHandler;X.getInstance().wsClient=new J(n),X.getInstance().loginHandler=function(e){R=0;for(var n in L.enteredChannels)L.enteredChannels[n].enter();for(var n in X.getInstance().connectionHandlers)X.getInstance().connectionHandlers[n].onReconnectSucceeded(n)},n.onOpen=function(){a&&t.log("reconnectWS onOpen"),X.getInstance().loginTimer=setTimeout(function(){a&&t.log("reconnectWS loginTimer timedout"),X.getInstance().loginTimer=null,b(e,!0)},1e4),X.getInstance().onLoginTimerCancel=null},n.onMessage=function(e){c(e)},n.onError=function(){a&&t.log("reconnectWS onError"),b(e,!0)},n.onClose=function(){a&&t.log("reconnectWS onClose")};var r=X.getInstance().getCurrentApiHost();$.getInstance().checkRouting(function(n,t){if(t)return void b(e,!0);r!=n.API_HOST&&A(n.API_HOST,{},"GET",{},function(){}),X.getInstance().wsClient.connect(e,null,n.WS_HOST)})},j)}},_=function(e,n,r){var o=new J.WSClientHandler;X.getInstance().wsClient=new J(o),o.onMessage=function(e){c(e)},X.getInstance().loginHandler=function(e,n){if(n)X.getInstance().disconnect(null),S(null,n,r);else{clearTimeout(X.getInstance().globalTimer);var t=function(){if(M.cachedChannels)for(var e in M.cachedChannels){var n=M.cachedChannels[e];if(n.invalidateTypingStatus())for(var r in X.getInstance().channelHandlers){var a=X.getInstance().channelHandlers[r];a.onTypingStatusUpdated(n)}}X.getInstance().globalTimer=setTimeout(function(){t()},1e3)};t(),S(e,null,r)}},o.onOpen=function(e){X.getInstance().loginTimer=setTimeout(function(){X.getInstance().loginTimer=null,X.getInstance().onLoginTimerCancel=null,X.getInstance().disconnect(null),S(null,new g("Connection timeout.",Q.LOGIN_TIMEOUT),r)},1e4),X.getInstance().onLoginTimerCancel=function(){S(null,new g("Connection Cancelled.",Q.REQUEST_FAILED),r)}},o.onError=function(n){a&&t.log("WSClientHandler.onError",n),$.getInstance().sessionKey?b(e,!0):S(null,new g("Websocket connection failed.",Q.WEBSOCKET_CONNECTION_FAILED),r)},o.onClose=function(e){a&&t.log("WSClientHandler.onClose")},$.getInstance().checkRouting(function(t,a){if(a)return void S(null,new g("Connection routing failed.",Q.REQUEST_FAILED),r);A(t.API_HOST,{},"GET",{},function(){}),X.getInstance().wsClient.connect(e,n,t.WS_HOST)})};this.sendCommand=function(e,n){if(!X.getInstance().hasLoggedIn())return void(n&&n(null,new g("Connection should be made first.",Q.CONNECTION_REQUIRED)));if(null==X.getInstance().wsClient||X.getInstance().wsClient.getConnectionState()!=X.getInstance().connectionState.OPEN)return void(n&&n(null,new g("Connection is not valid. Please reconnect.",Q.WEBSOCKET_CONNECTION_CLOSED)));if(e.isAckRequired()){var t=e.requestId,a={handler:n,timer:setTimeout(function(){n(null,new g("Command received no ack.",Q.ACK_TIMEOUT)),delete r[t]},1e4)};r[t]=a,X.getInstance().wsClient.send(e,function(e,t){if(t)return clearTimeout(a.timer),void n(null,t)})}else X.getInstance().wsClient.send(e,n)},this.updateCurrentUserInfoWithProfileImage=function(e,n,t){var r=this;n?$.getInstance().uploadProfileImage(n,function(n,a){if(a)return void S(null,a,t);var o="object"==typeof n?n:JSON.parse(n),i=o.url;r.updateCurrentUserInfo(e,i,t)}):r.updateCurrentUserInfo(e,null,t)},this.updateCurrentUserInfo=function(e,n,t){var r=this;$.getInstance().updateUserInfo(r.getCurrentUserId(),e,n,function(a,o){if(o)return void S(null,o,t);r.currentUser&&(e&&(r.currentUser.nickname=e),n&&(r.currentUser.profileUrl=n)),S(r.currentUser,null,t)})},this.getPendingGCMToken=function(){return this.GCMPushToken},this.getPendingAPNSToken=function(){return this.APNSPushToken},this.registerGCMPushTokenForCurrentUser=function(e,n){var t=this;return e?this.currentUser?void $.getInstance().registerGCMPushToken(this.getCurrentUserId(),e,function(e,r){if(r)return void S(t.pushTokenRegistrationState.ERROR,r,n);t.GCMPushToken="",S(t.pushTokenRegistrationState.SUCCESS,null,n)}):(t.GCMPushToken=e,void S(t.pushTokenRegistrationState.PENDING,null,n)):void S(t.pushTokenRegistrationState.ERROR,new g("Invalid token",Q.INVALID_PARAMETER),n)},this.unregisterGCMPushTokenForCurrentUser=function(e,n){if(!e)return void S(null,new g("Invalid token",Q.INVALID_PARAMETER),n);$.getInstance().unregisterGCMPushToken(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.unregisterGCMPushTokenAllForCurrentUser=function(e){$.getInstance().unregisterGCMPushTokenAll(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.registerAPNSPushTokenForCurrentUser=function(e,n){var t=this;return e?this.currentUser?void $.getInstance().registerAPNSPushToken(this.getCurrentUserId(),e,function(e,r){if(r)return void S(t.pushTokenRegistrationState.ERROR,r,n);t.APNSPushToken="",S(t.pushTokenRegistrationState.SUCCESS,null,n)}):(t.APNSPushToken=e,void S(t.pushTokenRegistrationState.PENDING,null,n)):void S(t.pushTokenRegistrationState.ERROR,new g("Invalid token",Q.INVALID_PARAMETER),n)},this.unregisterAPNSPushTokenForCurrentUser=function(e,n){if(!e)return void S(null,new g("Invalid token",Q.INVALID_PARAMETER),n);$.getInstance().unregisterAPNSPushToken(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.unregisterAPNSPushTokenAllForCurrentUser=function(e){$.getInstance().unregisterAPNSPushTokenAll(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.unregisterPushTokenAllForCurrentUser=function(e){$.getInstance().unregisterAPNSPushTokenAll(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.setDoNotDisturb=function(e,n,t,r,a,o,i){var s=this;if(n<0||n>23||t<0||t>59||r<0||r>23||a<0||a>59)return void S(null,new g("Invalid arguments.",Q.INVALID_PARAMETER),i);$.getInstance().setDoNotDisturb(s.getCurrentUserId(),e,n,t,r,a,o,function(e,n){if(n)return void S(null,n,i);var t={doNotDisturbOn:e.do_not_disturb,startHour:e.start_hour,startMin:e.start_min,endHour:e.end_hour,endMin:e.end_min,timezone:e.timezone};S(t,null,i)})},this.getDoNotDisturb=function(e){var n=this;$.getInstance().getDoNotDisturb(n.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone};S(r,null,e)})},this.blockUser=function(e,n){if("object"!=typeof e)return void S(null,new g("You have to pass user object.",Q.INVALID_PARAMETER),n);this.blockUserWithUserId(e.userId,n)},this.blockUserWithUserId=function(e,n){if(this.getCurrentUserId()==e)return void S(null,new g("You can not block yourself.",Q.INVALID_PARAMETER),n);$.getInstance().blockUser(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(new F(e),null,n)})},this.unblockUser=function(e,n){if("object"!=typeof e)return void S(null,new g("You have to pass user object.",Q.INVALID_PARAMETER),n);this.unblockUserWithUserId(e.userId,n)},this.unblockUserWithUserId=function(e,n){if(this.getCurrentUserId()==e)return void S(null,new g("You can not unblock yourself.",Q.INVALID_PARAMETER),n);$.getInstance().unblockUser(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})}},ee=null;return X.getInstance=function(){return null===ee?null:ee},{SendBird:X}},E=null;return function(){var e=function(e){if(e.newInstance||!E){var n=new y;E=new n.SendBird(e)}return E};return e.getInstance=function(){return null===E?null:E},e.version="3.0.48",{SendBird:e}}().SendBird})},"./node_modules/websocket/lib/browser.js":function(e,n,t){function r(e,n){return n?new o(e,n):new o(e)}var a=function(){return this}(),o=a.WebSocket||a.MozWebSocket,i=t("./node_modules/websocket/lib/version.js");e.exports={w3cwebsocket:o?r:null,version:i}},"./node_modules/websocket/lib/version.js":function(e,n,t){e.exports=t("./node_modules/websocket/package.json").version},"./node_modules/websocket/package.json":function(e,n){e.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <brian@worlize.com> (https://www.worlize.com/)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.24",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.8.0"},dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.0.1"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}},"./node_modules/xhr2/lib/browser.js":function(e,n){e.exports=XMLHttpRequest},"./src/chat/actions/channel.ts":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=t("./node_modules/lodash/first.js"),c=t.n(s),u=t("./src/lib/makeActionCreator/index.ts"),l=t("./src/chat/endpoints/accounts/index.ts"),d=t("./src/chat/models/Message/index.ts"),f=t("./src/chat/actions/user.ts"),h=t("./src/chat/constants/promos.ts"),p=t("./src/chat/endpoints/sendbird/index.ts"),m=function(e){function n(e,t){return r(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"Invalid Value: '"+e+" is "+t+"'"))}return o(n,e),n}(Error),g=t("./src/chat/singleton/SendbirdSDK.ts"),v=t("./src/chat/actions/message.ts"),b=t("./src/chat/actions/promo.ts"),_=t("./src/chat/actions/tracking.ts"),y=t("./src/chat/selectors/channels.ts"),E=t("./src/chat/constants/channels.ts"),I=t("./src/chat/models/Channel/index.ts"),C=t("./src/chat/helpers/urls.ts"),O=t("./node_modules/react-router-redux/es/index.js");t.d(n,"g",function(){return S}),t.d(n,"e",function(){return w}),t.d(n,"f",function(){return R}),t.d(n,"o",function(){return j}),t.d(n,"n",function(){return T}),t.d(n,"p",function(){return P}),t.d(n,"h",function(){return x}),t.d(n,"d",function(){return U}),t.d(n,"u",function(){return k}),t.d(n,"v",function(){return L}),t.d(n,"w",function(){return M}),t.d(n,"t",function(){return D}),t.d(n,"j",function(){return H}),t.d(n,"i",function(){return G}),t.d(n,"a",function(){return F}),t.d(n,"b",function(){return B}),t.d(n,"s",function(){return V}),t.d(n,"q",function(){return z}),t.d(n,"l",function(){return q}),t.d(n,"m",function(){return K}),t.d(n,"k",function(){return Y}),t.d(n,"r",function(){return W}),t.d(n,"c",function(){return Q}),t.d(n,"J",function(){return J}),t.d(n,"x",function(){return ee}),t.d(n,"C",function(){return te}),t.d(n,"P",function(){return ie}),t.d(n,"O",function(){return ce}),t.d(n,"Q",function(){return de}),t.d(n,"L",function(){return pe}),t.d(n,"B",function(){return ye}),t.d(n,"A",function(){return Ee}),t.d(n,"H",function(){return Ie}),t.d(n,"M",function(){return Ce}),t.d(n,"E",function(){return Re}),t.d(n,"F",function(){return Te}),t.d(n,"G",function(){return Pe}),t.d(n,"y",function(){return ke}),t.d(n,"D",function(){return Le}),t.d(n,"z",function(){return Me}),t.d(n,"K",function(){return De}),t.d(n,"I",function(){return He}),t.d(n,"N",function(){return Be});var A=this,N=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},S="CHANNEL__ADD_SUCCESS",w="CHANNEL__ADD_FAIL",R="CHANNEL__CREATE_CHANNEL_START",j="CHANNEL__SELECT_BEGIN",T="CHANNEL__RESET_UNREAD_COUNT",P="CHANNEL__SELECT_END",x="CHANNEL__EXPAND_INVITE_LIST",U="CHANNEL__COLLAPSE_INVITE_LIST",k="CHANNEL__UPDATE_CHANNEL_NAME",L="CHANNEL__INVITED_UPDATE",M="CHANNEL__JOINED_UPDATE",D="CHANNEL__SET_UPDATED_CHANNEL_ON_TOP",H="CHANNEL__FETCHING_JOINED_CHANNELS",G="CHANNEL__FETCHING_INVITED_CHANNELS",F="CHANNEL__ADD_EXISTING_INVITED_CHANNELS",B="CHANNEL__ADD_EXISTING_JOINED_CHANNELS",V="CHANNEL__SET_INVITED_CHANNEL_TO_JOINED",z="CHANEL__SET_EXISTING_CHANNELS_END",q="CHANNEL__REMOVE_CHANNEL",K="CHANNEL__RESET_CHANNEL_MESSAGE_LIST",Y="CHANNEL__FETCH_FIRST_MESSAGE",W="CHANNEL__SET_FIRST_MESSAGE_ID",Q="CHANNEL__BLOCK_COMPLETED",J=Object(u.a)("CHANNEL__MUTE_TOGGLED"),$=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={removedChannelId:e},n(Z(r));case 2:case"end":return t.stop()}},t,this)}))}},Z=Object(u.a)(q),X=Object(u.a)(V),ee=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,i,s,c,u,l,d,f,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t(),o=a.channels.selected,i=a.contacts.models,s=e||o.channelId){r.next=5;break}throw new m("acceptedChannelId",s);case 5:if(c=Object(y.g)(a),u=c&&c.firstMessageId,l=!!(c&&u&&c.hasMoreMessages),d={acceptedChannelId:s},f=Object(y.m)(a),!(p=f&&!!f.find(function(e){return!!i[e.id].isNSFW}))){r.next=17;break}return r.next=14,Object(b.b)(h.a.NSFW_WARNING);case 14:if(a.promoAccepted[h.a.NSFW_WARNING]){r.next=17;break}return n(Object(O.push)(Object(C.a)(s,E.a.VIEW_NSFW_CONFIRMATION))),r.abrupt("return");case 17:return r.next=19,g.a.acceptChannelInvite().then(function(){return l&&n(Object(v.q)(u))}).then(function(){return n(X(d))}).then(function(){return n(Object(O.push)(Object(C.b)(s)))});case 19:case"end":return r.stop()}},r,this)}))}},ne=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n($(e));case 1:case"end":return t.stop()}},t,this)}))}},te=function(){return function(e,n){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=Object(y.q)(r,"memberState"),o=Object(y.q)(r,"channelId")){t.next=5;break}throw new m("declinedChannelId",o);case 5:if(a){t.next=7;break}throw new m("declinedChannelType",a);case 7:g.a.declineChannelInvite().then(function(){return e(ne(o))}).then(function(){return e(Ce(a))});case 8:case"end":return t.stop()}},t,this)}))}},re=Object(u.a)(L),ae=Object(u.a)(M),oe=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=t().user.account.id,o=e.members.filter(function(e){return e.id!==a}).map(function(e){return e.id}),n(Object(f.p)(o));case 3:case"end":return r.stop()}},r,this)}))}},ie=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,i,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t(),o=a.platform.currentPage,i=a.user.account.id,s=e.members.find(function(e){return e.id===i})){r.next=6;break}throw new m("currentUser",s);case 6:if(c=o&&o.urlParams.channelId,u=c===e.channelId,u&&(e=Object.assign({},e,{unreadMessageCount:0})),"invited"!==s.state){r.next=15;break}return r.next=12,n(re({channel:e}));case 12:n(oe(e)),r.next=17;break;case 15:return r.next=17,n(ae({channel:e}));case 17:n(u?me():Object(v.z)());case 18:case"end":return r.stop()}},r,this)}))}},se=Object(u.a)(D),ce=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.channelId,n(se({channelId:r}));case 2:case"end":return t.stop()}},t,this)}))}},ue=Object(u.a)(T),le=Object(u.a)(k),de=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=Object(y.n)(t()))){r.next=7;break}return o=Object.assign({},a,{name:e}),i=Object.assign({},a),n(le(o)),r.next=7,g.a.updateChannel(o).catch(function(e){n(le(i))});case 7:case"end":return r.stop()}},r,this)}))}},fe=Object(u.a)(j),he=Object(u.a)(P),pe=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,i,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t(),o=a.platform.currentPage,i=o&&o.urlParams.channelId,s=e||i,!(c=!!(s&&a&&a.channels&&a.channels.models&&a.channels.models[s]))||!s){r.next=22;break}return n(fe({channelId:s})),r.next=9,g.a.enterChannel(s);case 9:if(!(u=r.sent)||u.error){r.next=18;break}return r.next=13,n(Object(v.n)(u.data));case 13:return r.next=15,n(he());case 15:n(me(s)),r.next=20;break;case 18:n(Object(v.y)()),n(he());case 20:r.next=24;break;case 22:i?c||n(Ce()):n(Ce()),n(Object(v.y)());case 24:case"end":return r.stop()}},r,this)}))}},me=(Object(u.a)("MESSAGE__MARK_AS_READ"),function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=t(),e||(o=a.platform.currentPage,(i=o&&o.urlParams.channelId)&&(e=i)),n(ue(e)),r.next=5,g.a.markChannelAsRead();case 5:n(Object(v.z)());case 6:case"end":return r.stop()}},r,this)}))}}),ge=Object(u.a)(R),ve=Object(u.a)(S),be=Object(u.a)(w),_e=function(e,n,t){var r=e.map(function(e){return{user_id:e,nickname:n[e].name}});if(t){var a=t.id,o=t.name;-1===r.findIndex(function(e){return e.user_id===a})&&r.unshift({user_id:a,nickname:o})}return r},ye=function(e,n,t){return function(r,a,o){var s=o.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function o(){var c,u,l,d,f,h,m,g,v,b,y,A,N;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(c=a(),u=c.user,l=u.account,d=u.session,f=c.contacts.models,h=c.channels,m=h.joined,g=h.invited,!l||!d){o.next=31;break}if(r(ge()),v=_e(e,f,l),!(v.length<2)){o.next=7;break}return o.abrupt("return");case 7:return o.next=9,Object(p.a)(s(),d,v,n);case 9:if(b=o.sent,!b.body){o.next=29;break}if(y=b.body,A=Object(I.d)(y,E.e.JOINED),N=A.channelId,!g.sortedKeys.includes(N)){o.next=19;break}r(ee(N)),r(Object(_.f)(e,N)),o.next=27;break;case 19:if(!m.sortedKeys.includes(N)){o.next=23;break}t&&(r(Object(O.push)(Object(C.b)(N))),r(Object(_.f)(e,N))),o.next=27;break;case 23:return o.next=25,r(ve(i({},N,A)));case 25:r(Object(_.f)(e,N)),t&&r(Object(O.push)(Object(C.b)(N)));case 27:o.next=31;break;case 29:r(be()),r(Object(_.q)(e));case 31:case"end":return o.stop()}},o,this)}))}},Ee=function(e,n){return function(t,r){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.length>1&&(e=[c()(e)]),r.next=3,t(Object(f.p)(e));case 3:t(ye(e,n,!0));case 4:case"end":return r.stop()}},r,this)}))}},Ie=function(e){return function(n,t,r){var a=r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i,s,c,u,l,d,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t(),i=o.user,s=i.account,c=i.session,u=o.contacts.models,l=Object(y.q)(o,"channelSendbirdUrl"),!s||!c){r.next=9;break}return d=_e(e,u),r.next=7,Object(p.f)(a(),c,d,l);case 7:f=r.sent,f.body&&(Object(_.a)(),n(Object(O.goBack)()));case 9:case"end":return r.stop()}},r,this)}))}},Ce=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,i,s,u,l,d,f,h,p,m,g;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t(),o=a.channels,i=o.invited,s=o.joined,u=a.platform.currentPage,l=E.e.INVITED,d=E.e.JOINED,u&&u.urlParams.userIds&&(f=u.urlParams.userIds.split(","),n(Ee(f,name))),!e){r.next=18;break}h=e===l?d:l,p=function(e){return a.channels[e.toLowerCase()].sortedKeys},m=p(e).length?e:h,g=c()(p(m)),r.t0=m,r.next=r.t0===l?12:r.t0===d?14:16;break;case 12:return n(Object(O.replace)(Object(C.a)(g,E.a.VIEW_REQUEST))),r.abrupt("break",17);case 14:return n(Object(O.replace)(Object(C.b)(g))),r.abrupt("break",17);case 16:n(Object(O.replace)(C.g));case 17:return r.abrupt("return");case 18:n(i.sortedKeys[0]?Object(O.replace)(Object(C.a)(i.sortedKeys[0],E.a.VIEW_REQUEST)):s.sortedKeys[0]?Object(O.replace)(Object(C.b)(s.sortedKeys[0])):Object(O.replace)(C.g));case 19:case"end":return r.stop()}},r,this)}))}},Oe=Object(u.a)(G),Ae=Object(u.a)(H),Ne=Object(u.a)(F),Se=Object(u.a)(B),we=Object(u.a)(z),Re=function(){return function(e,n,t){t.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e(Te()),e(Pe())]);case 2:return r=n().channels.models,t.next=5,e(je(r));case 5:e(we()),e(pe());case 7:case"end":return t.stop()}},t,this)}))}},je=function(e){return function(n){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e&&function(){var t=[];for(var r in e)e[r].members.map(function(e){return t.push(e.id)});n(Object(f.p)(t))}();case 1:case"end":return t.stop()}},t,this)}))}},Te=function(){return function(e,n){return N(A,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e(Oe()),n.next=3,g.a.getExistingChannels(E.e.INVITED).then(function(n){return n&&e(je(n.channels)),n}).then(function(n){n&&e(Ne(n))}).catch(function(e){e.message});case 3:case"end":return n.stop()}},n,this)}))}},Pe=function(){return function(e,n){return N(A,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e(Ae()),n.next=3,g.a.getExistingChannels(E.e.JOINED).then(function(n){n&&e(Se(n))}).catch(function(e){e.message});case 3:case"end":return n.stop()}},n,this)}))}},xe=Object(u.a)(Q),Ue=Object(u.a)("CHANNEL__BLOCK_FAILED"),ke=function(){return function(e,n,t){var r=t.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var a,o,i,s,u,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),o=Object(y.q)(a,"memberState"),(i=Object(y.m)(a))&&(i&&i.length>0)){t.next=5;break}throw new m("blockedUser",i);case 5:if(s=c()(i).id,u=Object(y.g)(a)){t.next=9;break}throw new m("currentChannel",u);case 9:if(d=u.channelId){t.next=12;break}throw new m("blockedChannelId",d);case 12:if(o){t.next=14;break}throw new m("blockedChannelType",o);case 14:return t.next=16,Object(l.a)(r(),s);case 16:f=t.sent,f&&f.ok?g.a.hideChannel().then(function(){return e(xe({blockedChannelId:d,blockedUserId:s}))}).then(function(){return e(Ce(o))}):f&&e(Ue(f.error));case 18:case"end":return t.stop()}},t,this)}))}},Le=Object(u.a)(x),Me=Object(u.a)(U),De=(Object(u.a)("CHANNEL__MESSAGES_LOADED"),Object(u.a)(K)),He=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=t(),o=Object(y.q)(a,"memberState"),g.a.leaveChannel().then(function(){return n($(e))}).then(function(){return n(Ce(o))}).catch(function(e){return void e.message});case 3:case"end":return r.stop()}},r,this)}))}},Ge=Object(u.a)(Y),Fe=Object(u.a)(W),Be=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=t(),o=Object(y.g)(a),n(Ge({channelId:e})),g.a.getFirstMessage().then(function(e){var t=e[0];if(o&&o.hasMoreMessages){var r=Object(d.c)(t);n(Object(v.t)(i({},t.messageId,r)))}return t.messageId}).then(function(t){return n(Fe({channelId:e,firstMessageId:t}))}).catch(function(e){return void e.message});case 4:case"end":return r.stop()}},r,this)}))}}},"./src/chat/actions/container.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"c",function(){return c}),t.d(n,"b",function(){return u});var r=t("./src/chat/constants/container.ts"),a=t("./src/lib/makeActionCreator/index.ts"),o=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="CONTAINER__SIZE_CHANGED",c=Object(a.a)(s),u=function(){return function(e,n,t){t.apiContext;return i(o,void 0,void 0,regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().platform.currentPage){t.next=3;break}throw new Error("Could not open pop-out: current page not defined");case 3:window.open(a.url,"_blank","width=1024, height=768"),e(c(r.a.PILL));case 5:case"end":return t.stop()}},t,this)}))}}},"./src/chat/actions/message.ts":function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"w",function(){return g}),t.d(n,"a",function(){return v}),t.d(n,"c",function(){return y}),t.d(n,"o",function(){return I}),t.d(n,"x",function(){return C}),t.d(n,"m",function(){return O}),t.d(n,"j",function(){return N}),t.d(n,"v",function(){return S}),t.d(n,"h",function(){return w}),t.d(n,"t",function(){return R}),t.d(n,"s",function(){return j}),t.d(n,"b",function(){return T}),t.d(n,"n",function(){return x}),t.d(n,"k",function(){return U}),t.d(n,"y",function(){return k}),t.d(n,"d",function(){return L}),t.d(n,"q",function(){return M}),t.d(n,"p",function(){return D}),t.d(n,"i",function(){return H}),t.d(n,"u",function(){return F}),t.d(n,"l",function(){return B}),t.d(n,"z",function(){return z}),t.d(n,"g",function(){return q}),t.d(n,"e",function(){return K}),t.d(n,"f",function(){return Y}),t.d(n,"r",function(){return $});var a=t("./node_modules/react-router-redux/es/index.js"),o=t("./src/chat/singleton/SendbirdSDK.ts"),i=t("./src/lib/makeActionCreator/index.ts"),s=t("./src/chat/actions/tracking.ts"),c=t("./src/chat/constants/messages.ts"),u=t("./src/chat/endpoints/sendbird/index.ts"),l=t("./src/chat/endpoints/users/index.ts"),d=t("./src/chat/models/Message/index.ts"),f=t("./src/chat/selectors/channels.ts"),h=t("./src/chat/selectors/messages.ts"),p=this,m=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},g=(Object(i.a)("MESSAGE__REPORT"),function(e){return function(n,t,r){var o=r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){var r,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.message,i=e.reason,s={channelUrl:r.channelSendbirdUrl,channelType:r.channelType,createdAt:r.createdAt,customData:r.data,customType:r.customType,messageBody:r.messageData.value,messageId:r.messageId,userId:r.sender.userId,fileUrl:"",reason:i,userNickname:r.sender.nickname},Object(l.a)(o(),s).then(function(){return n(Object(a.goBack)())});case 3:case"end":return t.stop()}},t,this)}))}}),v="MESSAGE__ADD_ONE",b=Object(i.a)(v),_=function(e,n){return function(t,a){return m(p,void 0,void 0,regeneratorRuntime.mark(function i(){var c,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:c=a(),u=Object(d.b)(n),o.a.addMessage(e,n).then(function(e){var n=Object(f.q)(c,"channelId"),a=r({},e.messageId,e);n&&(t(b({message:a,channelId:n,clientMessageId:u})),t(Object(s.o)(e.messageId)))}).catch(function(){return u&&t(A({clientMessageId:u,toggle:!0}))});case 3:case"end":return i.stop()}},i,this)}))}},y="MESSAGE__ADD_PENDING_ONE",E=Object(i.a)(y),I=function(e,n){return function(t,r){return m(p,void 0,void 0,regeneratorRuntime.mark(function a(){var o,i,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o=r(),i=Object(d.a)(o,e,n),i&&(s=n===c.b.TEXT?e:"",t(E(i)),t(_(s,i.data)));case 3:case"end":return a.stop()}},a,this)}))}},C=function(e){return function(n,t){return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=t(),o=Object(h.d)(a,e),o&&(n(A({clientMessageId:e,toggle:!1})),n(_(o.messageData.value,o.data)));case 3:case"end":return r.stop()}},r,this)}))}},O="MESSAGE__TOGGLE_PENDING_MESSAGE_ERROR",A=Object(i.a)(O),N="MESSAGE__REMOVE_PENDING_ONE",S=Object(i.a)(N),w="MESSAGE__RECEIVE_ADD_ONE",R=Object(i.a)(w),j=function(e){return function(n,t,a){a.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(R(r({},e.messageId,e)));case 1:case"end":return t.stop()}},t,this)}))}},T="MESSAGE__ADD_LIST",P=Object(i.a)(T),x=function(e){return function(n,t,r){r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=Object(f.q)(t(),"channelId"),n(P(Object.assign({channelId:a},e)));case 2:case"end":return r.stop()}},r,this)}))}},U="MESSAGE__SET_MESSAGE_LIST_IS_LOADED",k=Object(i.a)(U),L="MESSAGE__DELETE_ONE",M=Object(i.a)(L),D=function(e){return function(n,t,r){r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var i,s,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=t(),s=i.messages.models,c=s[e],o.a.deleteMessage(c).then(function(){return n(M(c.messageId))}).then(function(){return n(Object(a.goBack)())});case 4:case"end":return r.stop()}},r,this)}))}},H="MESSAGE__RECEIVE_DELETE_ONE",G=Object(i.a)(H),F=function(e){return function(n,t,r){r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(G(e));case 1:case"end":return t.stop()}},t,this)}))}},B="MESSAGE__SET_UNREAD_COUNT",V=Object(i.a)(B),z=function(e){return function(n,t,r){var a=r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("number"==typeof e){r.next=11;break}if(!o.a.isConnected()){r.next=7;break}return r.next=4,o.a.getUnreadCount();case 4:e=r.sent,r.next=11;break;case 7:return r.next=9,Object(u.e)(a(),t().user.session);case 9:i=r.sent,e=parseInt(i.body.unread_count,10)||0;case 11:n(V({count:e}));case 12:case"end":return r.stop()}},r,this)}))}},q="MESSAGE__GET_PREVIOUS_MESSAGES_START",K="MESSAGE__GET_PREVIOUS_MESSAGES_END",Y="MESSAGE__GET_PREVIOUS_MESSAGES_ERROR",W=Object(i.a)(q),Q=Object(i.a)(K),J=Object(i.a)(Y),$=function(){return function(e,n,t){t.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(f.q)(n(),"channelId"),e(W(r)),!r){t.next=5;break}return t.next=5,o.a.getPreviousMessages(c.c.USER).then(function(n){return e(Q(Object.assign({channelId:r},n)))}).catch(function(){return e(J(r))});case 5:case"end":return t.stop()}},t,this)}))}}},"./src/chat/actions/platform.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return l}),t.d(n,"c",function(){return d}),t.d(n,"d",function(){return f});var r=(t("./src/config.ts"),t("./src/chat/strings/index.ts"),t("./src/lib/areUrlsEqual/index.ts")),a=(t("./src/lib/constants/index.ts"),t("./src/lib/logs/timing.js")),o=t("./src/lib/makeActionCreator/index.ts"),i=t("./src/chat/actions/channel.ts"),s=this,c=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},u="PLATFORM__HISTORY_LOCATION_SET",l="PLATFORM__INITIAL_REFERRER_SET",d="PLATFORM__PAGE_META_SET",f=function(e,n,t){return function(o,u,l){return c(s,void 0,void 0,regeneratorRuntime.mark(function s(){var c,d,f,p,m,g,v,b;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(c=Date.now(),d=u(),f=d.platform.currentPage,t){s.next=5;break}return s.abrupt("return");case 5:if(p=t.match.params.channelId,m=d.channels.selected.channelId,o(h({action:n,location:e,routeMatch:t})),!f||!Object(r.a)(f.url,e)){s.next=10;break}return s.abrupt("return");case 10:if(!t){s.next=16;break}return g=t.match,s.next=14,t.route.action(g)(o,u,l);case 14:v=t.route.meta,v&&(b=Date.now()-c,Object(a.b)({duration:b,meta:v}));case 16:p&&p!==m&&o(Object(i.L)());case 17:case"end":return s.stop()}},s,this)}))}},h=Object(o.a)(u);Object(o.a)(l),Object(o.a)(d),Object(o.a)("PLATFORM__REDIRECT_REQUESTED"),Object(o.a)("PLATFORM__MODAL_TOGGLED")},"./src/chat/actions/promo.ts":function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",function(){return f}),t.d(n,"b",function(){return p}),t.d(n,"d",function(){return m}),t.d(n,"c",function(){return v});var o=t("./src/lib/cache/index.ts"),i=t("./src/lib/constants/index.ts"),s=t("./src/lib/makeActionCreator/index.ts"),c=t("./src/chat/actions/channel.ts"),u=t("./src/chat/constants/promos.ts"),l=this,d=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},f="PROMO__DISPLAY_PROMO",h=Object(s.a)(f),p=function(e){return function(n,t,r){r.apiContext;return d(l,void 0,void 0,regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(o.b)(u.b)||[],i=r.includes(e),n(h(a({},e,i)));case 3:case"end":return t.stop()}},t,this)}))}},m=function(e){return function(n,t,s){s.apiContext;return d(l,void 0,void 0,regeneratorRuntime.mark(function t(){var s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=Object(o.b)(u.b)||[],c=[e].concat(r(s)),Object(o.d)(u.b,c,i._46),n(h(a({},e,!0)));case 4:case"end":return t.stop()}},t,this)}))}},g=Object(s.a)("PROMO__SET_NSFW_WARNING"),v=function(){return function(e,n){return d(l,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e(g(!0)),e(m(u.a.NSFW_WARNING)),e(Object(c.x)());case 3:case"end":return n.stop()}},n,this)}))}}},"./src/chat/actions/sendbird/index.ts":function(e,n,t){"use strict";function r(e){return e?e.map(a).filter(function(e){return!!e}):[]}function a(e){if(e.contact_account_id||e.id)return{id:e.contact_account_id||i._4.ACCOUNT+"_"+e.id,name:e.name,lastInteraction:e.last_interaction,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}var o=t("./src/lib/cache/index.ts"),i=t("./src/lib/constants/index.ts"),s=t("./src/lib/makeActionCreator/index.ts"),c=t("./src/chat/endpoints/accounts/index.ts"),u=t("./src/chat/selectors/contacts.ts"),l=t("./src/chat/actions/tracking.ts"),d=t("./src/chat/endpoints/sendbird/index.ts");t.d(n,"b",function(){return p}),t.d(n,"a",function(){return m}),t.d(n,"g",function(){return g}),t.d(n,"f",function(){return v}),t.d(n,"i",function(){return _}),t.d(n,"e",function(){return y}),t.d(n,"j",function(){return C}),t.d(n,"c",function(){return O}),t.d(n,"d",function(){return A}),t.d(n,"h",function(){return w});var f=this,h=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},p="SENDBIRD__DEACTIVATE_SENDBIRD_SESSION",m="SENDBIRD__ACTIVATE_SENDBIRD_SESSION",g=Object(s.a)(p),v=(Object(s.a)(m),"SENDBIRD__SET_SENDBIRD_SESSION"),b=Object(s.a)(v),_=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(n,t,r){var a=r.apiContext;return h(f,void 0,void 0,regeneratorRuntime.mark(function r(){var s,c,u,l,f,h,p,m,v,_,y;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t(),c=s.user,u=c.account,l=c.session,!l||!u){r.next=17;break}if(f=void 0,h=Object(o.c)(i.l.CHAT,"session",u.id),!(p=Object(o.b)(h))||!p.token){r.next=10;break}f=p,r.next=14;break;case 10:return r.next=12,Object(d.d)(a(),l);case 12:m=r.sent,m.ok&&(v=m.body,_=v.valid_until,y=v.sb_access_token,f={expires:_,token:y},Object(o.d)(h,f,new Date(_)));case 14:if(!f){r.next=17;break}return n(b(Object.assign({},f,{active:e}))),r.abrupt("return");case 17:n(g());case 18:case"end":return r.stop()}},r,this)}))}},y="SENDBIRD__SET_REDDIT_CONTACT_LIST",E=6*i.B,I=Object(s.a)(y),C=function(){return function(e,n,t){var a=t.apiContext;return h(f,void 0,void 0,regeneratorRuntime.mark(function t(){var s,c,u,l,f,h,p,m,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n(),c=s.contacts.models,u=Object(o.c)(i.l.CHAT,"contacts",s.user.account.id),!(l=Object(o.b)(u))||2!==l.version){t.next=7;break}return e(I(l.data)),t.abrupt("return");case 7:if(f=n().user.session){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,Object(d.b)(a(),f,25);case 12:h=t.sent,p=r(h.body),m=p.map(function(e){return c[e.id]?c[e.id]:e}),g={version:2,data:m},Object(o.d)(u,g,E),e(I(m));case 18:case"end":return t.stop()}},t,this)}))}},O="SENDBIRD__IDENTIFY_CONTACT_BEGIN",A="SENDBIRD__IDENTIFY_CONTACT_END",N=Object(s.a)(O),S=Object(s.a)(A),w=function(e){return function(n,t,r){var o=r.apiContext;return h(f,void 0,void 0,regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=Object(u.b)(t(),e.username),i||(n(N({username:e.username})),Object(c.b)(o(),e.username).then(function(t){if(t.ok){var r=a(t.body.data);if(r)return n(S({username:e.username,contact:r,valid:!0}))}else n(Object(l.r)(e.username));n(S({username:e.username,valid:!1}))}));case 2:case"end":return r.stop()}},r,this)}))}}},"./src/chat/actions/sendbird/proxy.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return u});var r=t("./src/lib/makeActionCreator/index.ts"),a=t("./src/chat/endpoints/sendbird/index.ts"),o=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="SENDBIRD__SET_SENDBIRD_PROXY_HOST",c=Object(r.a)(s),u=function(){return function(e,n,t){var r=t.apiContext;return i(o,void 0,void 0,regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(a.c)(r());case 2:t=n.sent,t.ok&&e(c(t.body));case 4:case"end":return n.stop()}},n,this)}))}}},"./src/chat/actions/sendbird/sdk.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return u}),t.d(n,"a",function(){return l}),t.d(n,"b",function(){return d}),t.d(n,"d",function(){return p}),t.d(n,"e",function(){return g});var r=t("./src/lib/makeActionCreator/index.ts"),a=t("./src/chat/actions/channel.ts"),o=t("./src/chat/actions/message.ts"),i=t("./src/chat/singleton/SendbirdSDK.ts"),s=this,c=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},u="SENDBIRD_SDK__CONNECT_FAIL",l="SENDBIRD_SDK__CONNECT_SUCCESS",d="SENDBIRD_SDK__DISCONNECT",f=Object(r.a)(l),h=Object(r.a)(u),p=function(e){return function(n,t,r){r.apiContext;return c(s,void 0,void 0,regeneratorRuntime.mark(function r(){var s,c,u,l,d,p,m,g;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:s=t(),c=s.sendbird,u=s.user,l=c.proxy,d=c.session,u.account&&l.host&&(p=u.account,m=p.id,g=p.name,i.a.connect(l.host,e||d.token,m,g,n).then(function(e){e.error?n(h(e.error)):(n(f(e.data)),n(Object(o.z)()),n(Object(a.E)()))}));case 3:case"end":return r.stop()}},r,this)}))}},m=Object(r.a)(d),g=function(){return function(e,n,t){t.apiContext;return c(s,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.a.disconnect().then(function(n){n.error||e(m(n.data))});case 1:case"end":return n.stop()}},n,this)}))}}},"./src/chat/actions/session.ts":function(e,n,t){"use strict";var r=t("./src/lib/makeActionCreator/index.ts"),a=t("./src/lib/constants/index.ts"),o=t("./src/lib/makeApiRequest/index.ts"),i=function(e,n){return Object(o.b)(e,{data:n,endpoint:"/refreshproxy",method:a.V.POST})};t.d(n,"a",function(){return u}),t.d(n,"b",function(){return l}),t.d(n,"c",function(){return d}),t.d(n,"d",function(){return h});var s=this,c=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},u="SESSION__USER_AUTHENTICATED",l="SESSION__USER_LOGGED_OUT",d="SESSION__USER_REAUTHENTICATED",f=(Object(r.a)(u),Object(r.a)(d)),h=(Object(r.a)(l),function(){return function(e,n,t){var r=t.apiContext;return c(s,void 0,void 0,regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=n().user.session)){t.next=6;break}return t.next=4,i(r(),a);case 4:o=t.sent,o.ok&&e(f(o.body));case 6:case"end":return t.stop()}},t,this)}))}})},"./src/chat/actions/theme.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return u});var r=t("./src/chat/constants/theme.ts"),a=t("./src/lib/makeActionCreator/index.ts"),o=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="THEME_CHANGED",c=Object(a.a)(s),u=function(){return function(e,n){return i(o,void 0,void 0,regeneratorRuntime.mark(function t(){var a,o,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r.b.REDDIT,o=r.b.NIGHT,i=n().user.prefs.globalTheme,s=i===a?o:a,e(c({themeKey:s}));case 4:case"end":return t.stop()}},t,this)}))}}},"./src/chat/actions/tooltip.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return a});var r=t("./src/lib/makeActionCreator/index.ts"),a=Object(r.a)("TOOLTIP__DROPDOWN_TOGGLED")},"./src/chat/actions/tracking.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/first.js"),a=t.n(r),o=t("./src/chat/constants/tracking.ts"),i=t("./src/telemetry/index.ts"),s=t("./src/chat/tracking/commonFields.ts"),c=function(e){Object(i.a)(Object.assign({noun:"beta_welcome",source:"messages_inbox",action:o.a.VIEW,chat:Object.assign({},Object(s.k)(e),Object(s.z)(e),Object(s.m)(e))},Object(s.v)(e)))},u=(t("./src/chat/tracking/events/chatPerformance.ts"),t("./src/chat/tracking/eventUtils.ts")),l=function(e){return Object(u.a)(e,function(n,t){Object(i.a)(Object.assign({noun:"chat_settings",source:"chat_settings",action:o.a.VIEW,correlationId:t,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e),Object(s.b)(n))},Object(s.v)(e)))})},d=function(e,n){return Object(u.a)(e,function(n,t){Object(i.a)(Object.assign({noun:"chat_member_block",source:"chat_settings",action:o.a.SUBMIT,correlationId:t,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e),Object(s.b)(n))},Object(s.v)(e)))},n)},f=function(e){Object(i.a)(Object.assign({noun:"view_member",source:"chat_settings",action:o.a.CLICK,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e))},Object(s.v)(e)))},h=function(e){return Object(u.a)(e,function(n,t){Object(i.a)(Object.assign({noun:"chat_settings",source:"chat_settings",action:o.a.CLICK,correlationId:t,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e),Object(s.b)(n))},Object(s.v)(e)))})},p=t("./src/chat/tracking/events/chatView.ts"),m=t("./src/chat/tracking/events/contactsList.ts"),g=t("./src/chat/tracking/events/invitationInbox.ts"),v=t("./src/chat/tracking/events/messagesInbox.ts"),b=function(e,n){Object(i.a)(Object.assign({noun:"create_chat",source:"user_profile",action:o.a.CLICK,chat:Object.assign({},Object(s.C)(e,n),Object(s.A)(e,n),Object(s.B)(e,n)),user:Object.assign({},Object(s.D)(e))},Object(s.v)(e)))},_=t("./src/chat/selectors/channels.ts"),y=t("./src/chat/selectors/contacts.ts");t.d(n,"e",function(){return C}),t.d(n,"o",function(){return O}),t.d(n,"t",function(){return A}),t.d(n,"p",function(){return N}),t.d(n,"u",function(){return S}),t.d(n,"n",function(){return w}),t.d(n,"m",function(){return R}),t.d(n,"l",function(){return j}),t.d(n,"d",function(){return T}),t.d(n,"r",function(){return P}),t.d(n,"q",function(){return x}),t.d(n,"f",function(){return U}),t.d(n,"b",function(){return k}),t.d(n,"a",function(){return L}),t.d(n,"i",function(){return M}),t.d(n,"j",function(){return D}),t.d(n,"k",function(){return H}),t.d(n,"h",function(){return G}),t.d(n,"c",function(){return F}),t.d(n,"g",function(){return B}),t.d(n,"s",function(){return V});var E=this,I=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},C=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(v.a)(n());case 1:case"end":return e.stop()}},e,this)}))}},O=function(e){return function(n,t,r){r.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(p.a)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},A=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.d)(n());case 1:case"end":return e.stop()}},e,this)}))}},N=function(e){return function(n,t,r){r.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(p.b)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},S=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l(n());case 1:case"end":return e.stop()}},e,this)}))}},w=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(_.m)(n()),t&&t.length&&(r=a()(t).id,d(n(),r));case 2:case"end":return e.stop()}},e,this)}))}},R=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n().platform.currentPage,t&&"invited"!==t.urlParams.action&&f(n());case 2:case"end":return e.stop()}},e,this)}))}},j=function(){return function(e,n){return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(n());case 1:case"end":return e.stop()}},e,this)}))}},T=function(e){return function(n,t,r){r.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(m.c)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},P=function(e){return function(n,t,r){r.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=Object(y.b)(t(),e),r&&Object(m.f)(t(),r.id);case 2:case"end":return n.stop()}},n,this)}))}},x=function(e){return function(n,t,r){r.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){var r,a,o,i,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t(),a=e&&e.filter(function(e){return e!==r.user.account.id}),o=a&&a[0],i=r.contacts.models[o],s=i&&i.name,c=Object(y.a)(t(),s),c&&Object(m.e)(t(),o,c);case 7:case"end":return n.stop()}},n,this)}))}},U=function(e,n){return function(t,r,a){a.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function t(){var a,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r(),o=e&&e.filter(function(e){return e!==a.user.account.id}),i=o&&o[0],Object(m.d)(r(),i,n);case 4:case"end":return t.stop()}},t,this)}))}},k=function(e){return function(n,t,r){r.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(m.b)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},L=function(){return function(e,n){return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(m.a)(n());case 1:case"end":return e.stop()}},e,this)}))}},M=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.c)(n());case 1:case"end":return e.stop()}},e,this)}))}},D=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.d)(n());case 1:case"end":return e.stop()}},e,this)}))}},H=function(){return function(e,n,t){t.apiContext;return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n().platform.currentPage,t&&"invited"===t.urlParams.action&&Object(g.e)(n());case 2:case"end":return e.stop()}},e,this)}))}},G=function(){return function(e,n){return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.b)(n());case 1:case"end":return e.stop()}},e,this)}))}},F=function(){return function(e,n){return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.a)(n());case 1:case"end":return e.stop()}},e,this)}))}},B=function(e){return function(n,t){return I(E,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:b(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},V=function(){return function(e,n){return I(E,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(n());case 1:case"end":return e.stop()}},e,this)}))}}},"./src/chat/actions/typingIndicator.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return u});var r=t("./src/lib/makeActionCreator/index.ts"),a=t("./src/chat/selectors/channels.ts"),o=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="TYPING_INDICATOR__UPDATE",c=Object(r.a)(s),u=function(e){var n=e.channelId,t=e.usernames;return function(e,r){return i(o,void 0,void 0,regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:i=Object(a.q)(r(),"channelId"),i===n&&e(c({usernames:t}));case 2:case"end":return o.stop()}},o,this)}))}}},"./src/chat/actions/user.ts":function(e,n,t){"use strict";function r(e){return{id:e.id,name:e.name,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}var a=t("./src/chat/actions/tracking.ts"),o=t("./src/lib/constants/index.ts"),i=function(e){var n={};for(var t in e)n[t]=r(Object.assign({id:t},e[t]));return n},s=function(e){var n=o._4.ACCOUNT+"_";return e.id.includes(n)?(e.id=e.id,e.id_without_prefix=e.id.substr(n.length)):(e.id_without_prefix=e.id,e.id=n+e.id),e},c=t("./src/lib/makeActionCreator/index.ts"),u=t("./src/chat/endpoints/accounts/index.ts"),l=t("./src/chat/endpoints/users/index.ts"),d=t("./src/chat/helpers/urls.ts"),f=t("./node_modules/react-router-redux/es/index.js");t.d(n,"a",function(){return m}),t.d(n,"c",function(){return g}),t.d(n,"b",function(){return v}),t.d(n,"d",function(){return b}),t.d(n,"k",function(){return _}),t.d(n,"l",function(){return C}),t.d(n,"o",function(){return O}),t.d(n,"i",function(){return A}),t.d(n,"f",function(){return N}),t.d(n,"p",function(){return T}),t.d(n,"e",function(){return P}),t.d(n,"j",function(){return U}),t.d(n,"h",function(){return k}),t.d(n,"n",function(){return L}),t.d(n,"g",function(){return M}),t.d(n,"m",function(){return D});var h=this,p=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},m="USER__ACCOUNT_FETCH_COMPLETED",g="USER__REDDAID_RECEIVED",v="USER__LOID_RECEIVED",b="USER__SESSION_TRACKER_RECEIVED",_=Object(c.a)(v),y=Object(c.a)("USER__ACCOUNT_FETCH_PENDING"),E=Object(c.a)(m),I=Object(c.a)("USER__ACCOUNT_FETCH_FAILED"),C=Object(c.a)(g),O=Object(c.a)(b),A=function(){return function(e,n,t){var r=t.apiContext;return p(h,void 0,void 0,regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),a.user.session){t.next=3;break}return t.abrupt("return");case 3:if(!a.user.account){t.next=5;break}return t.abrupt("return");case 5:return e(y()),t.next=8,Object(u.c)(r());case 8:o=t.sent,e(o.ok?E(s(o.body)):I(o.error));case 10:case"end":return t.stop()}},t,this)}))}},N="USER__USERS_FETCH_COMPLETED",S=Object(c.a)("USER__USERS_FETCH_PENDING"),w=Object(c.a)(N),R=Object(c.a)("USER__USERS_FETCH_FAILED"),j=function(e){return function(e,n,t){t.apiContext;return p(h,void 0,void 0,regeneratorRuntime.mark(function t(){var r,a,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n().channels,a=r.invited,o=r.joined,i=o[0]||a[0],e(R()),e(i?Object(f.push)(Object(d.b)(i)):Object(f.push)("/chat"));case 4:case"end":return t.stop()}},t,this)}))}},T=function(e){return function(n,t,r){var a=r.apiContext;return p(h,void 0,void 0,regeneratorRuntime.mark(function r(){var o,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t().contacts.models,s=e.filter(function(e){return!o[e]}),s.length){r.next=4;break}return r.abrupt("return");case 4:return n(S(e)),r.next=7,Object(l.b)(a(),s);case 7:c=r.sent,c.ok?(u=i(c.body),n(w(u))):n(j(c.error));case 9:case"end":return r.stop()}},r,this)}))}},P="USERS__USERS_ADD_SELECTED",x=Object(c.a)(P),U=function(e){return function(n,t){return p(h,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(x(e)),n(Object(a.d)(e));case 2:case"end":return t.stop()}},t,this)}))}},k="USERS__USERS_REMOVE_SELECTED",L=Object(c.a)(k),M="USERS__USERS_REMOVE_ALL_SELECTED",D=Object(c.a)(M)},"./src/chat/components/Counter/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"a",function(){return h});var i=t("./node_modules/react/index.js"),s=(t.n(i),t("./bundled-modules/styled-components/styled-components.min.js")),c=t.n(s),u=t("./src/chat/helpers/styles/mixins/index.tsx"),l=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),d=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),f=c()(function(e){return d("span",{className:e.className},void 0,e.count)}).withConfig({componentId:"dbq90v-0"})(["","color: ",";font-size: 1em;padding-left: 15px;padding-right: 15px;text-align: right;"],u.d,function(e){return e.count<=0?e.theme.activity.text.warning:""}),h=function(e){function n(){return r(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),l(n,[{key:"render",value:function(){return d(f,{count:this.props.count})}}]),n}(i.PureComponent)},"./src/chat/components/EmptyState/index.tsx":function(e,n,t){"use strict";var r=t("./src/chat/strings/index.ts"),a=t("./src/config.ts"),o=t("./node_modules/react/index.js"),i=(t.n(o),t("./bundled-modules/styled-components/styled-components.min.js")),s=t.n(i),c=t("./src/chat/controls/Button/index.tsx"),u=t("./src/chat/helpers/styles/components/index.tsx"),l=t("./src/chat/icons/svgs/ChatNew/index.tsx"),d=t("./src/chat/helpers/urls.ts"),f=t("./node_modules/react-router-dom/es/index.js"),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),p=s.a.div.withConfig({componentId:"s166672x-0"})(["display: inline-block;padding: 10px;"]),m=s.a.img.withConfig({componentId:"s166672x-1"})(["vertical-align: middle;display: inline-block;height: 180px;width: 180px;"]),g=s.a.div.withConfig({componentId:"s166672x-2"})(["vertical-align: middle;display: inline-block;max-width: 250px;padding: 20px 0 20px 30px;text-align: left;"]),v=s()(u.b).withConfig({componentId:"s166672x-3"})(["padding-bottom: 10px;font-weight: bold;"]),b=s()(c.a).withConfig({componentId:"s166672x-4"})(["font-size: 1em;height: 2.4em;margin-top: 1em;padding: 0.2em 2em;"]),_=h(l.a,{width:"1em"}),y=function(){return h(u.a,{},void 0,h(p,{},void 0,h(m,{src:a.a.assetPath+"/img/chat/empty-hero.png"}),h(g,{},void 0,h(v,{},void 0,Object(r.a)("en","app.chat.emptyState.title")),h(u.c,{},void 0,Object(r.a)("en","app.chat.emptyState.main"),h(f.Link,{to:Object(d.b)("create")},void 0,h(b,{primary:!0},void 0,_," ",Object(r.a)("en","app.chat.actions.new")))))))};n.a=y},"./src/chat/components/FrameHeader/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=(t.n(r),t("./node_modules/react-redux/es/index.js")),o=t("./node_modules/reselect/lib/index.js"),i=(t.n(o),t("./bundled-modules/styled-components/styled-components.min.js")),s=t.n(i),c=t("./src/chat/helpers/styles/mixins/index.tsx"),u=t("./src/chat/strings/index.ts"),l=t("./src/lib/constants/index.ts"),d=t("./src/chat/constants/channels.ts"),f=t("./src/chat/selectors/channels.ts"),h=t("./src/chat/selectors/contacts.ts"),p=t("./src/chat/selectors/platform.ts"),m=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),g=s.a.h1.withConfig({componentId:"u1y8gn-0"})(["",";font-weight: bold;line-height: 1.5em;display: inline-block;"],c.d),v=s()(function(e){return m("span",{className:e.className},void 0,e.count)}).withConfig({componentId:"u1y8gn-1"})(["background: ",";position: relative;display: inline-block;box-sizing: border-box;border-radius: 5em;min-width: 1.6em;min-height: 1.6em;padding: 0 0.45em;margin-left: 7px;top: -1px;font-size: .7em;font-weight: bold;line-height: 1.6em;text-align: center;color: ",";"],function(e){return e.theme.layout.header.counterBg},function(e){return e.theme.layout.header.counterText}),b=s()(function(e){return m("span",{className:e.className},void 0,e.children)}).withConfig({componentId:"u1y8gn-2"})(["",";",";font-size: 0.75em;padding-left: 0.6875em;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"],c.d,function(e){return e.warning?"color: "+function(e){return e.theme.activity.text.warning}:""}),_=function(e){var n=e.channelAction,t=e.memberCount,r=e.selectedUsersCount,a=n===d.a.INVITE_MEMBERS?t+r:r+1;if(a<d.d){var o=(d.d-a).toString();return Object(u.a)("en","app.chat.channels.addGroupMembers").replace("%0",o)}if(a===d.d)return Object(u.a)("en","app.chat.channels.maxGroupSize")+"\n      ("+(a+1)+")"},y=function(e,n,t){return m("div",{},void 0,m(g,{className:t.className},void 0,e),m(b,{className:t.className,warning:n===d.d},void 0,_(t)))},E=function(e){return m(g,{className:e.className},void 0,Object(u.a)("en","app.layout.header.title"),(e.count||0)>0&&m(v,{count:e.count}))},I=function(e,n){return m(g,{className:e.className},void 0,n+" "+Object(u.a)("en","app.chat.channels.groupMembers"))},C=function(e){return y(Object(u.a)("en","app.chat.channels.createGroup"),e.selectedUsersCount,e)},O=function(e){var n=e.memberCount+e.selectedUsersCount;return y(Object(u.a)("en","app.chat.channels.addToGroup"),n,e)},A=Object(o.createStructuredSelector)({channelAction:p.a,memberCount:function(e){return Object(f.q)(e,"memberCount")},selectedUsersCount:h.i,currentChannel:f.g}),N=Object(a.connect)(A),S=function(e){switch(e.routeName){case l._14.CHAT_MEMBERS:var n=e.currentChannel&&e.currentChannel.members.length;return n?I(e,n):null;case l._14.CHAT_CREATE:return C(e);case l._14.CHAT_INVITE:return O(e);default:return E(e)}};n.a=N(S)},"./src/chat/components/FrameNav/index.tsx":function(e,n,t){"use strict";var r=t("./src/config.ts"),a=t("./node_modules/react/index.js"),o=t.n(a),i=t("./node_modules/react-redux/es/index.js"),s=t("./node_modules/react-router-redux/es/index.js"),c=t("./node_modules/reselect/lib/index.js"),u=t("./bundled-modules/styled-components/styled-components.min.js"),l=t.n(u),d=t("./src/chat/actions/container.ts"),f=t("./src/chat/actions/tracking.ts"),h=t("./src/chat/constants/container.ts"),p=t("./src/chat/helpers/dom.ts"),m=t("./src/chat/helpers/urls.ts"),g=t("./src/chat/selectors/app.ts"),v=t("./src/chat/strings/index.ts"),b=t("./src/lib/constants/index.ts"),_=t("./src/chat/controls/Button/index.tsx"),y=t("./src/chat/controls/Svg/index.tsx"),E=t("./src/chat/icons/svgs/ChatNew/index.tsx"),I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),C=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},O=I("path",{d:"M8.622 10.616c.078.08.14.175.183.28.044.105.07.218.07.332 0 .237-.087.456-.253.62-.167.168-.385.255-.622.255-.236 0-.455-.087-.62-.254-.167-.166-.255-.385-.255-.622 0-.114.027-.227.07-.332.044-.105.105-.2.184-.28.087-.088.174-.15.288-.193.324-.13.71-.052.954.193zm-.205-6.242c1.595 0 2.466.807 2.466 1.92 0 .976-.556 1.448-1.238 1.816-.615.317-.83.518-.904.898 0 .004-.034.207-.036.21-.034.126-.087.244-.18.336-.14.14-.323.21-.524.21-.097 0-.192-.017-.29-.052-.087-.035-.165-.088-.235-.158-.14-.14-.22-.333-.22-.533 0-.11.02-.188.074-.348.16-.472.55-.896 1.056-1.17.577-.327.84-.558.84-1.07 0-.42-.357-.715-.987-.715-.496 0-.996.218-1.39.52-.26.2-.62.202-.858-.02l-.05-.05c-.313-.29-.27-.787.075-1.04.603-.444 1.394-.753 2.4-.753zM8 13.25c-2.895 0-5.25-2.355-5.25-5.25S5.105 2.75 8 2.75 13.25 5.105 13.25 8 10.895 13.25 8 13.25M8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7"}),A=function(e){return o.a.createElement(y.a,C({},e,{viewBox:"0 0 16 16"}),O)},N=t("./src/chat/icons/svgs/NavClose/index.tsx"),S=t("./src/chat/icons/svgs/NavMinimize/index.tsx"),w=t("./src/chat/icons/svgs/NavPopout/index.tsx"),R=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),j=l()(_.c).withConfig({componentId:"labmny-0"})(["width: 1em;height: 1em;margin: 0 0.3em;padding: 0;box-sizing: content-box;border: 0;"," {vertical-align: unset;}"],y.a),T=Object(c.createStructuredSelector)({isReady:g.c,enableClose:function(e){return!!(e.user.account&&e.user.account.features&&e.user.account.features.chat_menu_notification)}}),P=function(e,n){return{createChannel:function(){e(Object(s.push)(Object(m.b)("create"))),e(Object(f.e)())},close:function(){return e(Object(d.c)(h.a.HIDDEN))},popout:function(){return e(Object(d.b)())},expand:function(){return e(Object(d.c)(h.a.EMBED))},minimize:function(){return e(Object(d.c)(h.a.PILL))}}},x=Object(i.connect)(T,P),U=R(E.a,{}),k=R(A,{}),L=R(w.a,{}),M=R(S.a,{}),D=R(N.a,{}),H=function(e){return R("nav",{className:e.className},void 0,e.isReady&&e.containerSize!==h.a.HIDDEN&&e.containerSize!==h.a.PILL&&e.routeName!==b._14.CHAT_CREATE&&R(j,{onClick:Object(p.b)(e.createChannel),title:Object(v.a)("en","app.layout.header.newChat")},void 0,U),e.isReady&&e.containerSize!==h.a.HIDDEN&&e.containerSize!==h.a.PILL&&R("button",{onClick:function(e){return e.stopPropagation()}},void 0,R(j,{href:r.a.redditHelpUrl.chat,title:Object(v.a)("en","app.layout.header.help")},void 0,k)),e.isReady&&e.containerSize!==h.a.FULL&&R(j,{onClick:Object(p.b)(e.popout),title:Object(v.a)("en","app.layout.header.popout")},void 0,L),e.isReady&&e.containerSize===h.a.EMBED&&R(j,{onClick:Object(p.b)(e.minimize),title:Object(v.a)("en","app.layout.header.minimize")},void 0,M),e.enableClose&&e.containerSize!==h.a.FULL&&R(j,{onClick:Object(p.b)(e.close),title:Object(v.a)("en","app.layout.header.close")},void 0,D))};n.a=x(H)},"./src/chat/components/LongList/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"a",function(){return h});var i=t("./node_modules/react/index.js"),s=t.n(i),c=t("./bundled-modules/styled-components/styled-components.min.js"),u=t.n(c),l=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),d=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),f=u.a.div.withConfig({componentId:"s1kzxq2y-0"})(["overflow-y: auto;overflow-x: hidden;height: 100%;"]),h=function(e){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.isBatchLoading=!1,e.isScrolling=!1,e.addScrollListener=e.addScrollListener.bind(e),e.removeScrollListener=e.removeScrollListener.bind(e),e.onScroll=e.onScroll.bind(e),e.scrollCapture=e.scrollCapture.bind(e),e.scrollRelease=e.scrollRelease.bind(e),e}return o(n,e),d(n,[{key:"componentDidMount",value:function(){this.scrollCapture(),this.props.autoScrollBottom&&!this.isScrolling&&(this.list.scrollTop=this.list.scrollHeight)}},{key:"componentWillUpdate",value:function(){var e=this.list,n=e.clientHeight,t=e.scrollTop,r=e.scrollHeight;this.isScrolling=t+n!==r}},{key:"componentDidUpdate",value:function(){var e=this.list,n=e.scrollHeight,t=e.scrollTop,r=this.props.autoScrollBottom;r&&this.isScrolling&&this.isBatchLoading&&(this.list.scrollTop=t+(n-this.previousScrollHeight),this.isBatchLoading=!1),r&&!this.isScrolling&&(this.list.scrollTop=n)}},{key:"componentWillUnmount",value:function(){this.scrollRelease()}},{key:"addScrollListener",value:function(e,n){e.addEventListener("wheel",n,!1)}},{key:"removeScrollListener",value:function(e,n){e.removeEventListener("wheel",n,!1)}},{key:"onScroll",value:function(e){var n=this.list,t=n.clientHeight,r=n.scrollHeight,a=n.scrollTop,o=this.props,i=o.autoScrollBottom,s=o.loadMoreRows,c=o.threshold,u=e.deltaY,l=u>0;if(void 0!==c&&s){var d=i&&a<=c,f=!i&&a>=r-t-c;(d||f)&&(this.isBatchLoading=!0,this.previousScrollHeight=r,s())}l&&u>r-t-a?(this.list.scrollTop=r,e.preventDefault()):!l&&-u>a&&(this.list.scrollTop=0,e.preventDefault())}},{key:"scrollCapture",value:function(){this.list&&this.addScrollListener(this.list,this.onScroll)}},{key:"scrollRelease",value:function(){this.list&&this.removeScrollListener(this.list,this.onScroll)}},{key:"resetScrollPosition",value:function(){this.props.autoScrollBottom?this.list.scrollTop=this.list.scrollHeight:this.list.scrollTop=0}},{key:"render",value:function(){var e=this,n=this.props,t=n.children,r=n.className;return l(f,{innerRef:function(n){return e.list=n},className:r},void 0,t)}}]),n}(s.a.Component)},"./src/chat/components/LongListItem/index.tsx":function(e,n,t){"use strict";var r=t("./bundled-modules/styled-components/styled-components.min.js"),a=t.n(r);n.a=a.a.li.withConfig({componentId:"s1c3ndu3-0"})(["cursor: pointer;list-style: none;&:hover {background-color: ",";}"],function(e){return e.theme.chat.list.item.hoverBg})},"./src/chat/components/MessageListHeader/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function u(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function f(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var h,p=t("./node_modules/react/index.js"),m=t("./bundled-modules/styled-components/styled-components.min.js"),g=t.n(m),v=t("./node_modules/lodash/noop.js"),b=t.n(v),_=t("./src/config.ts"),y=t("./node_modules/react-redux/es/index.js"),E=t("./node_modules/react-router-redux/es/index.js"),I=t("./node_modules/reselect/lib/index.js"),C=t("./src/chat/constants/channels.ts");!function(e){e.BLOCK="block",e.ADD_TO_GROUP="addToGroup",e.LEAVE="leave",e.PROFILE="profile",e.VIEW_MEMBERS="members",e.RENAME_GROUP="renameGroup"}(h||(h={}));var O=h,A=O.ADD_TO_GROUP,N=O.BLOCK,S=O.LEAVE,w=O.PROFILE,R=O.VIEW_MEMBERS,j=O.RENAME_GROUP,T={directChannel:[w,N],groupJoinedChannel:[j,R,A,S]},P=t("./src/chat/constants/page.ts"),x=t("./src/chat/helpers/urls.ts"),U=t("./src/chat/strings/index.ts"),k=t("./src/higherOrderComponents/asTooltip.tsx"),L=t("./src/chat/actions/channel.ts"),M=t("./src/chat/actions/tooltip.ts"),D=t("./src/chat/actions/tracking.ts"),H=t("./src/chat/controls/Button/index.tsx"),G=t("./src/chat/controls/Dropdown/index.tsx"),F=t("./src/chat/helpers/styles/functions/index.tsx"),B=t("./src/chat/helpers/styles/mixins/index.tsx"),V=t("./src/reddit/layout/row/Inline/index.tsx"),z=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),q=g.a.div.withConfig({componentId:"s14sujjb-0"})(["display: inline-block;vertical-align: middle;margin-right: 2px;width: 26px;"]),K=g.a.span.withConfig({componentId:"s14sujjb-1"})(["","display: inline-block;vertical-align: middle;"],B.d),Y=Object(m.withTheme)(function(e){return z(V.a,{id:e.id,className:e.className,onClick:e.onClick?e.onClick:function(){},role:"button"},void 0,e.children&&z(q,{},void 0,e.children),z(K,{},void 0,e.displayText))}),W=g()(Y).withConfig({componentId:"s14sujjb-2"})(["color: ",";font-weight: ",";display: block;white-space: nowrap;text-transform: capitalize;",";background-color: ",";border: 1px solid ",";border-bottom: 0;&:last-of-type { border-bottom: 1px solid ",";}&:first-of-type { border-bottom: 0; }&:hover {background-color: ",";border-color: ",";","{color: ",";}}"],function(e){return e.isSelected?e.theme.activity.button.active:e.theme.activity.text.contrast},function(e){return e.isSelected?"bold":"normal"},Object(F.b)(),function(e){return e.theme.layout.body},function(e){return e.theme.post.separator},function(e){return e.theme.post.separator},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},K,function(e){return e.theme.activity.button.text}),Q=t("./src/chat/icons/svgs/MenuOverflow/index.tsx"),J=t("./src/chat/models/Channel/index.ts"),$=t("./src/chat/selectors/channels.ts"),Z=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),X=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),ee="MessageListHeader--Select",ne=g()(Object(k.a)(G.a)).withConfig({componentId:"o7ozpu-0"})(["left: auto !important;right: 0;"]),te=g()(W).withConfig({componentId:"o7ozpu-1"})(["border: none;cursor: pointer;&:hover {background-color: transparent;}"]),re=g()(W).withConfig({componentId:"o7ozpu-2"})(["cursor: pointer;padding: .7em 1em;min-width: 6em;"]),ae=g()(H.c).withConfig({componentId:"o7ozpu-3"})(["width: 1.6em;height: 1.6em;padding: 0.1em 0.3em 0.2em;"]),oe=X(ae,{},void 0,X(Q.a,{})),ie=function(e){return e.menu?X(te,{displayText:"",id:ee,onClick:e.onClick},void 0,oe):null},se=Object(I.createStructuredSelector)({channelId:function(e){return Object($.q)(e,"channelId")},dropdownIsOpen:function(e){return e.tooltipId===ee},selectedChannel:function(e){return Object($.n)(e)}}),ce=function(e,n){return{onOpenDropdown:function(){e(Object(M.a)({tooltipId:ee})),e(Object(D.u)())},onInviteToChannel:function(n){return e(Object(E.push)(Object(x.a)(n,C.a.INVITE_MEMBERS_CONFIRMATION)))},onMuteChannel:function(){return e(Object(L.J)())},onBlockChannel:function(n){return e(Object(E.push)(Object(x.a)(n,C.a.BLOCK)))},onLeaveChannel:function(n){return e(Object(E.push)(Object(x.a)(n,C.a.LEAVE)))},onViewMembers:function(n){return e(Object(E.push)(Object(x.a)(n,C.a.VIEW_MEMBERS)))},onUpdateChannelName:function(n){return e(Object(L.Q)(n))},onViewProfile:function(){e(Object(D.k)()),e(Object(D.m)()).then(function(){window.open(_.a.redditUrl+"/user/"+(n.inviterName||n.name))})}}},ue=Object(y.connect)(se,ce),le=function(e){return e.children},de=function(e){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.onOptionClick=function(n){switch(n){case h.ADD_TO_GROUP:return e.props.onInviteToChannel(e.props.channelId);case h.BLOCK:return e.props.onBlockChannel(e.props.channelId);case h.LEAVE:return e.props.onLeaveChannel(e.props.channelId);case h.PROFILE:return e.props.onViewProfile();case h.RENAME_GROUP:return e.props.toggleChannelNameInput();case h.VIEW_MEMBERS:return e.props.onViewMembers(e.props.channelId);default:return b.a}},e}return o(n,e),Z(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.dropdownIsOpen,r=n.menu,a=n.onOpenDropdown;return X(le,{},void 0,X(ie,{menu:!!r,onClick:a}),X(ne,{isOpen:t,tooltipId:ee,container:document.getElementById(P.a),excludeContainerPosition:!0},void 0,this.getDropdownGroupOptions.map(function(n,t){return X(re,{displayText:Object(U.a)("en","app.chat.message.dropdown.options."+n),isSelected:!1,onClick:function(){return e.onOptionClick(n)}},t)})))}},{key:"getDropdownGroupOptions",get:function(){var e=this.props.selectedChannel;return e&&e.type===J.a.Group?T.groupJoinedChannel:T.directChannel}}]),n}(p.Component),fe=ue(de),he=t("./src/chat/components/Counter/index.tsx"),pe=t("./src/chat/controls/ChannelNameInput/index.tsx"),me=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ge=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),ve=u(["\n  margin-right: 0.46875em;\n  font-size: 0.9375em;\n"],["\n  margin-right: 0.46875em;\n  font-size: 0.9375em;\n"]),be=u(["\n  margin-left: 0.46875em;\n  font-size: 0.9375em;\n"],["\n  margin-left: 0.46875em;\n  font-size: 0.9375em;\n"]),_e=g()(function(e){return ge("div",{className:e.className},void 0,e.children)}).withConfig({componentId:"s1kr8w06-0"})(["","display: flex;align-items: center;width: 100%;overflow: hidden;border-bottom: 1px solid;position: absolute;left: 0;background-color: ",";z-index: 1;max-height: ",";top: calc(100% + 1px);border-color: ",";transition: all 0.3s;"],B.d,function(e){return e.theme.layout.body},function(e){return e.isShown?"6.250em":"0"},function(e){return e.isShown?e.theme.layout.colsBorder:"transparent"}),ye=g.a.div.withConfig({componentId:"s1kr8w06-1"})(["width: 100%;padding: 0 16px;margin-top: 0.859375em;"]),Ee=g.a.span.withConfig({componentId:"s1kr8w06-2"})(["display: flex;justify-content: flex-end;width: 100%;padding-top: 5px;"]),Ie=H.a.extend(ve),Ce=H.a.extend(be),Oe=function(e,n){return{onUpdateChannelName:function(n){return e(Object(L.Q)(n))}}},Ae=Object(y.connect)(void 0,Oe),Ne=function(e){function n(e){i(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleChannelNameInput=function(e){return t.setState({groupName:e})},t.submitGroupName=function(){t.props.onUpdateChannelName(t.state.groupName.trim()),t.props.hideChannelNameInput()},t.state={groupName:t.props.name||""},t}return c(n,e),me(n,[{key:"componentWillReceiveProps",value:function(e){this.props.channelId!==e.channelId&&(this.setState(function(n){return{groupName:e.name}}),this.props.hideChannelNameInput()),this.props.name===e.name||this.props.isShown||this.setState(function(n){return{groupName:e.name}})}},{key:"render",value:function(){var e=this.props,n=e.hideChannelNameInput,t=e.isShown;return ge(_e,{isShown:t},void 0,ge(ye,{},void 0,ge(pe.a,{handleChannelNameInput:this.handleChannelNameInput,placeholder:Object(U.a)("en","app.chat.channels.groupRename"),withBackground:!0,value:this.state.groupName},void 0,ge(he.a,{count:this.getAvailableCharacters})),ge(Ee,{},void 0,ge(Ie,{secondaryNoBorder:!0,onClick:n},void 0,Object(U.a)("en","app.button.cancel")),ge(Ce,{primaryNoBorder:!0,disabled:this.getAvailableCharacters<0||this.getAvailableCharacters>=C.c,onClick:this.submitGroupName},void 0,Object(U.a)("en","app.button.save")))))}},{key:"getAvailableCharacters",get:function(){return C.c-this.state.groupName.length}}]),n}(p.Component),Se=Ae(Ne),we=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),Re=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),je=g.a.div.withConfig({componentId:"s1lpwew0-0"})(["align-items: center;border-bottom: 1px solid ",";display: flex;flex: 0 0 auto;justify-content: space-between;height: 1.8em;padding: 0px .75em 0px 1em;position: relative;"],function(e){return e.theme.layout.colsBorder}),Te=g.a.h4.withConfig({componentId:"s1lpwew0-1"})(["color: ",";font-size: 0.8em;line-height: 1.12em;font-weight: bold;width: 100%;-webkit-font-smoothing: antialiased;"],function(e){return e.theme.activity.text.regular}),Pe=function(e){function n(e){l(this,n);var t=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.toggleChannelNameInput=function(){return t.setState(function(e){return{isRenameGroupShown:!e.isRenameGroupShown}})},t.hideChannelNameInput=function(){return t.setState(function(e){return{isRenameGroupShown:!1}})},t.state={isRenameGroupShown:!1},t}return f(n,e),Re(n,[{key:"componentWillReceiveProps",value:function(e){this.props.channelId!==e.channelId&&this.hideChannelNameInput()}},{key:"render",value:function(){var e=this.state.isRenameGroupShown;return we(je,{className:this.props.className},void 0,we(Te,{},void 0,this.props.name),we(fe,{inviterName:this.props.inviterName,menu:this.props.menu,toggleChannelNameInput:this.toggleChannelNameInput}),this.props.renameGroup&&we(Se,{channelId:this.props.channelId,name:this.props.name,isShown:e,hideChannelNameInput:this.hideChannelNameInput}))}}]),n}(p.Component);n.a=Pe},"./src/chat/components/OverlayCreateChannel/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function d(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function h(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function p(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var m=t("./node_modules/lodash/uniqBy.js"),g=t.n(m),v=t("./node_modules/lodash/noop.js"),b=t.n(v),_=t("./node_modules/react/index.js"),y=t.n(_),E=t("./node_modules/react-redux/es/index.js"),I=t("./node_modules/react-router-redux/es/index.js"),C=t("./node_modules/reselect/lib/index.js"),O=t("./bundled-modules/styled-components/styled-components.min.js"),A=t.n(O),N=t("./src/chat/actions/channel.ts"),S=t("./src/chat/actions/sendbird/index.ts"),w=t("./src/chat/actions/tracking.ts"),R=t("./src/chat/actions/user.ts"),j=t("./src/chat/components/Counter/index.tsx"),T=t("./src/chat/components/LongList/index.tsx"),P=t("./src/chat/components/LongListItem/index.tsx"),x=t("./node_modules/lodash/last.js"),U=t.n(x),k=t("./node_modules/react-dom/index.js"),L=t("./src/chat/constants/keys.ts"),M=t("./src/chat/helpers/dom.ts"),D=t("./src/chat/helpers/styles/functions/index.tsx"),H=t("./src/chat/helpers/styles/mixins/index.tsx"),G=t("./src/chat/strings/index.ts"),F=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),B=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),V=A()(T.a).withConfig({componentId:"f41d28-0"})(["","display: flex;min-height: 3em;max-height: 6.71875em;border-bottom: 1px solid ",";"],H.d,function(e){return e.theme.layout.colsBorder}),z=A.a.span.withConfig({componentId:"f41d28-1"})(["padding: 0.725em 0.1875em 0 1em;"]),q=A.a.span.withConfig({componentId:"f41d28-2"})(["display: flex;flex-wrap: wrap;width: 100%;"]),K=A.a.input.withConfig({componentId:"f41d28-3"})(["flex: 1 1;min-width: 0;outline: none;padding: 0.125em;"]),Y=A.a.span.withConfig({componentId:"f41d28-4"})(["align-self: start;border-radius: 3px;cursor: pointer;margin: 0.2734375em;padding: 0.390625em;outline: 0;white-space: nowrap;",";color: ",";background-color: ",";&:active,&:focus {color: ",";background-color: ",";}"],Object(D.b)("all","0.1s"),function(e){return e.theme.activity.input.color},function(e){return e.theme.activity.input.ownerBg},function(e){return e.theme.activity.input.focusColor},function(e){return e.theme.activity.input.focusBg}),W=function(e){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.bubbleRefs={},t.searchBarInputRef={},t.timeoutToken=null,t.onBubbleKey=function(e){return function(n){switch(n.key){case L.d:case L.c:return Object(k.findDOMNode)(t.searchBarInputRef).focus(),t.props.onUnselect(e.id);case L.a:var r=n.target;if(r.previousElementSibling){r.previousElementSibling.focus()}break;case L.b:var a=n.target;if(a.nextElementSibling){a.nextElementSibling.focus()}}}},t.onBubbleKey=t.onBubbleKey.bind(t),t.onFilterChange=t.onFilterChange.bind(t),t.stopEnter=t.stopEnter.bind(t),t.searchKeyHandler=t.searchKeyHandler.bind(t),t}return o(n,e),B(n,[{key:"stopEnter",value:function(e){e.key===L.e&&e.preventDefault()}},{key:"onFilterChange",value:function(e){this.props.onFilterContacts(e.currentTarget.value)}},{key:"searchKeyHandler",value:function(e){var n=this.props,t=n.onFilterContacts,r=n.onIdentifyContact,a=n.onIdentifyContactTimeout,o=e.currentTarget,i=function(){return o.value};switch(this.timeoutToken&&clearTimeout(this.timeoutToken),this.timeoutToken=setTimeout(function(){i()&&r(i())},a),e.key){case L.e:return r(function(){return o.id}());case L.a:case L.d:case L.c:if(0===i().length){var s=U()(this.props.selectedContacts);s&&s.name&&Object(k.findDOMNode)(this.bubbleRefs[s.name]).focus()}}return t(i())}},{key:"render",value:function(){var e=this,n=this.props,t=n.filter,r=n.innerRef,a=n.resetFilter,o=n.selectedContacts,i=n.onFilterReset,s=a?"":t;return F(V,{autoScrollBottom:!0},void 0,F(z,{},void 0,Object(G.a)("en","app.chat.contactList.to")),F(q,{},void 0,o&&o.length>0&&o.map(function(n,t){return y.a.createElement(Y,{key:"selected-contact-"+t,tabIndex:0,onKeyDown:Object(M.a)(e.onBubbleKey(n)),ref:function(t){e.bubbleRefs[n.name]=t}},n.name)}),y.a.createElement(K,{key:"search-bar",type:"text",autoFocus:!0,value:s,onFocus:i,onChange:this.onFilterChange,onKeyDown:this.stopEnter,onKeyUp:this.searchKeyHandler,ref:function(n){e.searchBarInputRef=n},innerRef:function(e){return r(e)}})))}}]),n}(y.a.Component),Q=W;W.defaultProps={onIdentifyContactTimeout:1e3};var J=t("./src/chat/controls/Checkbox/index.tsx"),$=t("./src/chat/icons/Userpic/index.tsx"),Z=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),X=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ee=A()(J.a).withConfig({componentId:"s1kgoqxu-0"})(["padding: 0.625em 0;width: 100%;&:focus,&:hover {background-color: ",";}"],function(e){return e.theme.chat.list.item.hoverBg}),ne=A()($.a).withConfig({componentId:"s1kgoqxu-1"})(["display: inline-block;margin-right: 0.625em;height: 1.875em;width: 1.875em;"]),te=A.a.span.withConfig({componentId:"s1kgoqxu-2"})(["display: inline-block;vertical-align: middle;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;width: calc(100% - 3.2em);"]),re=function(e){function n(){i(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.CONTACT_FORM_NAME="contactForm",e}return c(n,e),X(n,[{key:"render",value:function(){var e=this.props,n=e.contact,t=n.id,r=n.name,a=e.formName,o=e.isChecked,i=e.onChange;return Z(ee,{type:"checkbox",name:a,value:r,onChange:i,checked:o(t),id:t},void 0,Z(ne,{userId:t}),Z(te,{},void 0,r))}}]),n}(_.Component),ae=re,oe=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),ie=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),se=A.a.span.withConfig({componentId:"s1a3mby8-0"})(["display: flex;align-items: center;justify-content: space-between;height: 2.8em;padding: 0 0.9375em;opacity: 0.6;"]),ce=A.a.span.withConfig({componentId:"s1a3mby8-1"})(["","display: flex;padding-right: 1em;min-width: 0;"],H.d),ue=A()($.a).withConfig({componentId:"s1a3mby8-2"})(["margin-right: 0.625em;height: 1.875em;min-width: 1.875em;"]),le=A.a.span.withConfig({componentId:"s1a3mby8-3"})(["overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"]),de=A.a.span.withConfig({componentId:"s1a3mby8-4"})(["",""],H.d),fe=function(e){function n(){return u(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),ie(n,[{key:"render",value:function(){var e=this.props,n=e.contact,t=n.id,r=n.name,a=e.context;return oe(se,{},void 0,oe(ce,{},void 0,oe(ue,{userId:t}),oe(le,{},void 0,r)),oe(de,{},void 0,a))}}]),n}(_.Component),he=fe,pe=t("./src/chat/controls/ChannelNameInput/index.tsx"),me=t("./src/chat/controls/ModalControlBar/index.tsx"),ge=t("./src/chat/controls/Overlay/index.tsx"),ve=t("./src/chat/constants/channels.ts"),be=t("./src/chat/selectors/channels.ts"),_e=t("./src/chat/selectors/contacts.ts"),ye=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Ee=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),Ie=A.a.div.withConfig({componentId:"s76eq8c-0"})(["flex: 1 1 auto;align-items: center;"]),Ce=A()(J.a).withConfig({componentId:"s76eq8c-1"})(["padding: 10px 0;width: 100%;&:focus,&:hover {background-color: ",";}"],function(e){return e.theme.chat.list.item.hoverBg}),Oe=A()(T.a).withConfig({componentId:"s76eq8c-2"})(["height: 100%;max-height: calc(100vh - 7.313em);"]),Ae=A()(P.a).withConfig({componentId:"s76eq8c-3"})(["border-bottom: 1px solid ",";&:last-of-type { border-bottom: 0; }"],function(e){return e.theme.layout.colsBorder}),Ne=A()(Ae).withConfig({componentId:"s76eq8c-4"})(["&:hover {background: initial;cursor: initial;}"]),Se=A.a.h4.withConfig({componentId:"s76eq8c-5"})(["","font-weight: bold;padding: 10px 15px;"],H.d),we=A.a.span.withConfig({componentId:"s76eq8c-6"})(["display: inline-block;vertical-align: middle;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;width: calc(100% - 3.2em);"]),Re=A.a.span.withConfig({componentId:"s76eq8c-7"})(["","display: block;color: ",";"],H.d,function(e){return e.theme.activity.input.error}),je=A()(pe.a).withConfig({componentId:"s76eq8c-8"})(["padding-left: 0.390625em;"]),Te=A()(function(e){return Ee("div",{className:e.className},void 0,e.children)}).withConfig({componentId:"s76eq8c-9"})(["","display: flex;align-items: center;width: 100%;overflow: hidden;border-bottom: 1px solid;height: ",";border-color: ",";transition: all 0.2s;"],H.d,function(e){return e.isShown?"3em":"0"},function(e){return e.isShown?e.theme.layout.colsBorder:"transparent"});Te.displayName="InputWrapper";var Pe=function(e){return{onCreateNewChannel:function(n,t){return e(Object(N.B)(n,t,!0))},onInviteUsersToExistingChannel:function(n){return e(Object(N.H)(n))},onIdentifyContact:function(n){return e(Object(S.h)({username:n}))},onCancelAndGoBack:function(n){e(Object(I.goBack)()),e(Object(w.b)(n))},onSelectUser:function(n){return e(Object(R.j)(n))},onUnselectUser:function(n){return e(Object(R.n)(n))},removeAllSelectedUsers:function(){return e(Object(R.m)())},requestSuggestedContacts:function(){return e(Object(S.j)())}}},xe=function(e){return e.toLocaleLowerCase()},Ue=Object(C.createStructuredSelector)({channelAction:function(e){return e.platform.currentPage.urlParams.action},contacts:_e.f,isCreatingChannel:be.v,loadedContacts:_e.g,knownContacts:_e.e,memberCount:function(e){return Object(be.q)(e,"memberCount")},existingGroupUsers:function(e){var n=Object(be.q)(e,"members");return n&&n.map(function(e){return e.id})},selectedUsers:_e.h,selectedUsersCount:_e.i}),ke=Object(E.connect)(Ue,Pe),Le=function(e){function n(e){f(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.isUserSelected=function(e){return t.props.selectedUsers.includes(e)},t.isExistingGroupUser=function(e){return!!t.props.existingGroupUsers&&t.props.existingGroupUsers.includes(e)&&!t.props.selectedUsers.includes(e)},t.isSubmitDisabled=function(e){var n=t.props,r=n.channelAction,a=n.isCreatingChannel,o=n.memberCount,i=n.selectedUsersCount,s=r===ve.a.CREATE,c=i&&o,u=e<0||e===ve.c;return!i||a||s&&i>1&&u||c>=ve.d},t.primaryButtonText=function(){return t.props.channelAction===ve.a.INVITE_MEMBERS?Object(G.a)("en","app.chat.channels.addToGroup"):Object(G.a)("en","app.button.init")},t.getSelectedContacts=t.getSelectedContacts.bind(t),t.onContactsSelect=t.onContactsSelect.bind(t),t.onFilterContacts=t.onFilterContacts.bind(t),t.onFilterReset=t.onFilterReset.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onCancel=t.onCancel.bind(t),t.handleChannelNameInput=t.handleChannelNameInput.bind(t),t.state={filter:"",resetFilter:!1,groupName:""},t}return p(n,e),ye(n,[{key:"componentWillMount",value:function(){this.props.requestSuggestedContacts()}},{key:"componentWillUnmount",value:function(){this.props.removeAllSelectedUsers()}},{key:"onContactsSelect",value:function(e){var n=e.target.id,t=this.props,r=t.onSelectUser,a=t.onUnselectUser,o=t.selectedUsers,i=t.selectedUsersCount;o.includes(n)?a(n):(i<ve.d||i<1)&&(this.setState(function(e){return Object.assign({},e,{resetFilter:!0})}),r(n)),this.searchBarElement.focus()}},{key:"onFilterContacts",value:function(e){this.setState({filter:e})}},{key:"onFilterReset",value:function(){this.setState({filter:"",resetFilter:!1})}},{key:"handleChannelNameInput",value:function(e){this.setState({groupName:e})}},{key:"onSubmit",value:function(){var e=this.props,n=e.channelAction,t=e.onCreateNewChannel,r=e.onInviteUsersToExistingChannel,a=this.state.groupName,o=this.getSelectedContacts().map(function(e){return e.id});o&&o.length&&(n!==ve.a.INVITE_MEMBERS?t(o,a.trim()):r(o))}},{key:"onCancel",value:function(){this.props.onCancelAndGoBack(this.props.selectedUsers)}},{key:"getSelectedContacts",value:function(){var e=this.props,n=e.loadedContacts,t=e.selectedUsers,r=[];return t.map(function(e){for(var t in n)xe(n[t].id)===e&&r.push(n[t])}),r}},{key:"getFilteredContacts",value:function(){var e=this.props.contacts,n=this.state.filter;return n?e.filter(function(e){return xe(e.name).includes(xe(n))}):e}},{key:"getLoadedContact",value:function(){var e=this;return this.props.loadedContacts.find(function(n){return n&&xe(n.name)===xe(e.state.filter)})}},{key:"getIsValidUser",value:function(e){var n=this.props.knownContacts[xe(e)];return!n||!n.loaded||n.valid}},{key:"availableCharacters",value:function(e){return ve.c-e.length}},{key:"render",value:function(){var e=this,n=this.props,t=n.channelAction,r=n.className,a=n.onIdentifyContact,o=n.selectedUsersCount,i=this.state,s=i.filter,c=i.resetFilter,u=i.groupName,l=this.isUserSelected,d=this.isExistingGroupUser,f=this.onFilterReset,h=this.onFilterContacts,p=this.onContactsSelect,m=this.onSubmit,v=this.onCancel,_=this.getSelectedContacts(),y=this.getFilteredContacts(),E=this.getLoadedContact(),I=!!s&&!E,C=!!E,O=!this.getIsValidUser(s),A=this.handleChannelNameInput,N=this.availableCharacters(u),S=this.isSubmitDisabled(N),w=this.primaryButtonText(),R=t===ve.a.CREATE;return Ee(ge.a,{className:r,onSubmit:Object(M.a)(m),form:!0},void 0,Ee(Ie,{},void 0,R&&Ee(Te,{isShown:o>1},void 0,Ee(je,{handleChannelNameInput:A,placeholder:Object(G.a)("en","app.chat.channels.groupName")},void 0,Ee(j.a,{count:N}))),Ee(Q,{innerRef:function(n){return e.searchBarElement=n},filter:s,resetFilter:c,selectedContacts:_,onFilterReset:f,onFilterContacts:h,onIdentifyContact:a,onUnselect:this.props.onUnselectUser}),Ee(Oe,{loadMoreRows:b.a,threshold:0},void 0,g()(y,function(e){return e.name}).map(function(e){return Ee(Ae,{},void 0,!R&&d(e.id)?Ee(he,{contact:e,context:Object(G.a)("en","app.chat.contactList.existingGroupContact")}):Ee(ae,{formName:"contactForm",contact:e,onChange:p,isChecked:l}))}),(I||C)&&Ee(Ne,{},void 0,Ee(Se,{},void 0,Object(G.a)("en","app.chat.contactList.potentialsHeader"))),I&&!C&&Ee(Ae,{},void 0,Ee(Ce,{type:"checkbox",disabled:!0,name:"contactForm",value:s,onChange:p},void 0,Ee(we,{},void 0,s,O&&Ee(Re,{},void 0,Object(G.a)("en","app.chat.contactList.invalidUser"))))),C&&E&&Ee(Ae,{},void 0,!R&&d(E.id)?Ee(he,{contact:E,context:Object(G.a)("en","app.chat.contactList.existingGroupContact")}):Ee(ae,{formName:"contactForm",contact:E,onChange:p,isChecked:l})))),Ee(me.a,{primaryButtonText:w,primaryButtonDisabled:S,secondaryButtonAction:v}))}}]),n}(y.a.Component);n.a=ke(Le)},"./src/chat/components/Root/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){return q(O,{},void 0,q(e,{},void 0,q(u.Route,{component:function(e){return c.a.createElement(z,e,q(b,{},void 0,q(u.Switch,{location:e.location},void 0,n)))}})))}var s=t("./node_modules/react/index.js"),c=t.n(s),u=t("./node_modules/react-router/es/index.js"),l=(t("./assets/fonts/BentonSans/font.less"),t("./src/chat/components/Root/normalize.css"),t("./node_modules/react-redux/es/index.js")),d=t("./node_modules/reselect/lib/index.js"),f=t("./src/chat/icons/Loader/index.tsx"),h=t("./src/chat/selectors/app.ts"),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),m=Object(d.createStructuredSelector)({isReady:h.c,alert:h.a}),g=Object(l.connect)(m),v=function(e){return e.isReady?e.children:p(f.a,{textType:e.alert||"",isFadeOut:e.isReady,zIndex:2})},b=g(v),_=t("./bundled-modules/styled-components/styled-components.min.js"),y=t.n(_),E=t("./src/chat/models/Theme/index.ts"),I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),C=function(e){var n=e.children;return I(_.ThemeProvider,{theme:E.b},void 0,n)},O=C,A=t("./node_modules/react-router-redux/es/index.js"),N=t("./src/chat/actions/channel.ts"),S=t("./src/chat/actions/container.ts"),w=t("./src/chat/components/FrameHeader/index.tsx"),R=t("./src/chat/components/FrameNav/index.tsx"),j=t("./src/chat/constants/container.ts"),T=t("./src/chat/constants/page.ts"),P=t("./src/chat/helpers/dom.ts"),x=t("./src/chat/helpers/urls.ts"),U=t("./src/chat/selectors/platform.ts"),k=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),L=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),M=y()(function(e){return L("header",{className:e.className,onClick:e.onClick},void 0,e.children)}).withConfig({componentId:"f9gjvf-0"})(["",";display: flex;height: 1.6875em;flex-direction: row-reversed;flex: 0 0;margin-top:-1px;line-height: 1.7em;justify-content: space-between;align-items: center;padding: 0 .625em;min-height: 1.6875em;"],function(e){return e.isEmbedded?"cursor: pointer":""}),D=y.a.div.withConfig({componentId:"f9gjvf-1"})(["position: relative;display: flex;flex: 1 0;border-top: 1px solid ",";min-height: 10em;"],function(e){return e.theme.layout.colsBorder}),H=Object(d.createStructuredSelector)({containerSize:function(e){return e.container.size},routeName:U.b,unreadCount:function(e){return e.messages.unread.count}}),G=function(e,n){return{expand:function(){e(Object(S.c)(j.a.EMBED)),e(n.history&&n.history.length>1?Object(A.goBack)():Object(N.M)())},minimize:function(){e(Object(S.c)(j.a.PILL)),e(Object(A.push)(x.f))}}},F=Object(l.connect)(H,G),B=function(e){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onHeaderClickHandler=t.onHeaderClickHandler.bind(t),t}return o(n,e),k(n,[{key:"onHeaderClickHandler",value:function(){this.isEmbedded&&(this.isMinimized?this.props.expand():this.props.minimize())}},{key:"render",value:function(){var e=this.props,n=e.children,t=e.className,r=e.containerSize,a=e.routeName,o=e.unreadCount;return L("main",{role:"main",className:t,id:T.a},void 0,L(M,{onClick:Object(P.b)(this.onHeaderClickHandler),isEmbedded:this.isEmbedded},void 0,L(w.a,{count:o,routeName:a}),L(R.a,{containerSize:r,routeName:a})),!this.isMinimized&&n&&L(D,{},void 0," ",n," "))}},{key:"isEmbedded",get:function(){return this.props.containerSize!==j.a.FULL}},{key:"isMinimized",get:function(){return this.props.containerSize===j.a.PILL||this.props.containerSize===j.a.HIDDEN}}]),n}(s.Component),V=Object(u.withRouter)(B),z=y()(F(V)).withConfig({componentId:"f9gjvf-2"})(["background-color: ",";height: 100%;width: 100%;display: flex;flex-direction: column;overflow: hidden;"],function(e){return e.theme.layout.body});n.a=i;var q=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}()},"./src/chat/components/Root/normalize.css":function(e,n){},"./src/chat/constants/channels.ts":function(e,n,t){"use strict";t.d(n,"e",function(){return a}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return r}),t.d(n,"c",function(){return i}),t.d(n,"d",function(){return s});var r,a={ALL:"ALL",JOINED:"JOINED",INVITED:"INVITED"},o={DIRECT:"direct",GROUP:"group"};!function(e){e.BLOCK="block",e.CREATE="create",e.VIEW_REQUEST="request",e.DECLINE_REQUEST="decline",e.INVITE_MEMBERS="invite",e.INVITE_MEMBERS_CONFIRMATION="invite_confirmation",e.LEAVE="leave",e.VIEW_MEMBERS="members",e.VIEW_NSFW_CONFIRMATION="nsfw"}(r||(r={}));var i=30,s=100},"./src/chat/constants/container.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a});var r={PILL:"pill",EMBED:"embed",FULL:"full",HIDDEN:"hidden"},a={pill:{width:190,height:26},embed:{width:520,height:350},full:{width:void 0,height:void 0},hidden:{height:0,width:0}}},"./src/chat/constants/keys.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"e",function(){return a}),t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i}),t.d(n,"d",function(){return s});var r="Backspace",a="Enter",o="ArrowLeft",i="ArrowRight",s="Delete"},"./src/chat/constants/messages.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return o});var r;!function(e){e.ADMIN="admin",e.USER="user",e.PENDING="pending"}(r||(r={}));var a;!function(e){e.TEXT="text",e.POST="post",e.SNOOMOJI="snoomoji"}(a||(a={}));var o;!function(e){e.DELETE="delete",e.REPORT="report"}(o||(o={}))},"./src/chat/constants/page.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r="tooltip-container"},"./src/chat/constants/promos.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"a",function(){return r});var r,a="chat.promo";!function(e){e.NSFW_WARNING="nsfwWarning",e.WELCOME_BETA="welcomeBeta"}(r||(r={}))},"./src/chat/constants/theme.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return a});var r={REDDIT:"REDDIT",NIGHT:"NIGHT"},a=r.REDDIT},"./src/chat/constants/tracking.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r={VIEW:"view",CLICK:"click",SUBMIT:"submit",HEARTBEAT:"heartbeat",LOAD:"load"}},"./src/chat/constants/zIndex.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"c",function(){return a}),t.d(n,"a",function(){return o});var r=10,a=80,o=2147483646},"./src/chat/controls/Button/index.tsx":function(e,n,t){"use strict";t.d(n,"a",function(){return g}),t.d(n,"c",function(){return v}),t.d(n,"b",function(){return E}),t.d(n,"d",function(){return O});var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./bundled-modules/styled-components/styled-components.min.js"),i=t.n(o),s=t("./src/chat/icons/svgs/Flag/index.tsx"),c=t("./src/chat/icons/svgs/Trash/index.tsx"),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),l=Object(o.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.text},function(e){return e.theme.activity.button.text}),d=Object(o.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],function(e){return e.theme.layout.body},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.text.body}),f=Object(o.css)(["background: none;border: none;padding: 0;"]),h=Object(o.css)(["","color: ",";"],f,function(e){return e.theme.activity.text.active}),p=Object(o.css)(["","color: ",";"],f,function(e){return e.theme.activity.text.fade}),m=Object(o.css)(["","color: ",";"],f,function(e){return e.theme.activity.text.warning}),g=i()(function(e){return e.href?u("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",title:e.title,className:e.className,tabIndex:0},void 0,e.children):u("button",{type:e.type||"button",tabIndex:0,className:e.className,onClick:e.onClick,disabled:e.disabled,title:e.title},void 0,e.children)}).withConfig({componentId:"s958gzo-0"})(["&[disabled] { opacity: 0.6 };display: inline-block;padding: 0.1em 0.8em;transition: background 0.2s;background: ",";height: ",";width: ",";","",";",";",";",";",";"],function(e){return e.theme.layout.body},function(e){return e.height?e.height:"auto"},function(e){return e.width?e.width:"auto"},"\n  vertical-align: middle;\n  border: 1px solid transparent;\n  box-sizing: border-box;\n  border-radius: 4px;\n  cursor: pointer;\n  outline: none;\n\n  line-height: 2em;\n  font-size: 0.8em;\n  font-weight: 500;\n  text-align: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  white-space: nowrap;\n  -webkit-font-smoothing: antialiased;\n\n  &:focus {\n    outline: none;\n  }\n",function(e){return e.primary?l:""},function(e){return e.primaryNoBorder?h:""},function(e){return e.secondary?d:""},function(e){return e.secondaryNoBorder?p:""},function(e){return e.warningNoBorder?m:""}),v=i()(g).withConfig({componentId:"s958gzo-1"})(["font-size: inherit;line-height: normal;padding: 0.1em 0.8em 0.2em;height: 100%;svg {height: 100%;vertical-align: middle;}&:hover svg {fill: ",";}"],function(e){return e.theme.activity.icon.hover}),b=i.a.button.withConfig({componentId:"s958gzo-2"})(["background-color: ",";border: 1px solid ",";box-sizing: border-box;border-radius: 4px;cursor: pointer;height: 1.1875em;outline: none;vertical-align: middle;width: 1.875em;line-height: 0;"],function(e){return e.theme.layout.body},function(e){return e.theme.message.list.item.button}),_=i()(s.a).withConfig({componentId:"s958gzo-3"})(["fill: ",";height: 65%;"],function(e){return e.theme.message.list.item.button}),y=u(_,{}),E=function(e){return a.a.createElement(b,e,y)},I=i()(c.a).withConfig({componentId:"s958gzo-4"})(["fill: ",";height: 70%;"],function(e){return e.theme.message.list.item.button}),C=u(I,{}),O=function(e){return a.a.createElement(b,e,C)}},"./src/chat/controls/ChannelNameInput/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t("./node_modules/react/index.js"),s=t.n(i),c=t("./bundled-modules/styled-components/styled-components.min.js"),u=t.n(c),l=t("./src/chat/helpers/styles/mixins/index.tsx"),d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),p=u.a.input.withConfig({componentId:"tzrz2j-0"})(["","background: transparent;font-size: 1em;height: 2.1875em;padding-left: .78125em;outline: none;width: 100%;"],l.d),m=Object(c.css)(["background-color: ",";border: 1px solid ",";border-radius: 0.3125em;"],function(e){return e.theme.activity.input.channelRename},function(e){return e.theme.activity.input.border}),g=u()(function(e){return h("label",{className:e.className},void 0,h(p,{placeholder:e.placeholder,onChange:e.onChange,value:e.value}),e.children)}).withConfig({componentId:"tzrz2j-1"})(["display: flex;align-items: center;border-radius: 0.3125em;width: 100%;",""],function(e){return e.withBackground?m:""}),v=function(e){function n(){r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.onChange=function(n){var t=n.currentTarget.value;e.props.handleChannelNameInput(t)},e}return o(n,e),f(n,[{key:"render",value:function(){return s.a.createElement(g,d({withBackground:this.props.withBackground,onChange:this.onChange},this.props),this.props.children)}}]),n}(s.a.Component);n.a=v},"./src/chat/controls/Checkbox/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./bundled-modules/styled-components/styled-components.min.js"),i=t.n(o),s=t("./src/chat/controls/Svg/index.tsx"),c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),l=i()(function(e){return u("circle",{className:e.className,cy:"10",cx:"10",r:"10"})}).withConfig({componentId:"dt3fl8-0"})(["fill: ",";"],function(e){return e.theme.activity.checkbox.checked}),d=i()(function(e){return u("path",{className:e.className,d:"M8.9310375,15.1995 C8.70135,15.41825 8.38963125,15.541375 8.0647875,15.541375 C8.052975,15.541375 8.04181875,15.54075 8.03000625,15.54075 C7.69335,15.531375 7.37506875,15.39075 7.15063125,15.151375 L4.0879125,11.88075 C3.637725,11.400125 3.68169375,10.662625 4.18700625,10.23325 C4.6916625,9.805125 5.4660375,9.846375 5.91688125,10.327625 L8.115975,12.676375 L14.8550063,6.25825 C15.3327563,5.802625 16.1091,5.802625 16.5875063,6.25825 C17.0659125,6.71325 17.0659125,7.452625 16.5875063,7.907625 L8.9310375,15.1995 Z"})}).withConfig({componentId:"dt3fl8-1"})(["fill: ",";"],function(e){return e.theme.activity.checkbox.mark}),f=u("g",{},void 0,u(l,{}),u(d,{})),h=function(e){return a.a.createElement(s.a,c({},e,{viewBox:"0 0 20 20"}),f)},p=h,m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},g=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),v=i()(function(e){return g("circle",{className:e.className,cy:"10",cx:"10",r:"9"})}).withConfig({componentId:"s1m6fab-0"})(["fill: ",";stroke: ",";"],function(e){return e.theme.activity.checkbox.unchecked},function(e){return e.theme.activity.checkbox.uncheckedBorder}),b=g("g",{},void 0,g(v,{})),_=function(e){return a.a.createElement(s.a,m({},e,{viewBox:"0 0 20 20"}),b)},y=_,E=t("./src/chat/helpers/styles/mixins/index.tsx"),I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),C=i.a.input.withConfig({componentId:"s996vvi-0"})(["position: absolute;appearance: none;visibility: hidden;"]),O=i()(p).withConfig({componentId:"s996vvi-1"})(["display: none;width 1.1em; height: 1.1em;"]),A=i()(y).withConfig({componentId:"s996vvi-2"})(["display: inline-block;width 1.1em; height: 1.1em;"]),N=i.a.span.withConfig({componentId:"s996vvi-3"})(["vertical-align: middle;display: table;padding: 0 15px;"]),S=i.a.span.withConfig({componentId:"s996vvi-4"})(["","vertical-align: middle;display: table-cell;padding-right: 1em;max-width: 0;"],E.d),w=i.a.span.withConfig({componentId:"s996vvi-5"})(["vertical-align: middle;display: table-cell;width: 1%;"]),R=I(O,{}),j=I(A,{}),T=i()(function(e){return I("label",{className:e.className},void 0,I(N,{},void 0,e.children?I(S,{},void 0,e.children):null,I(w,{},void 0,I(C,{tabIndex:0,type:e.type||"checkbox",checked:e.checked,disabled:e.disabled,name:e.name,value:e.value,onChange:e.onChange,id:e.id}),R,j)))}).withConfig({componentId:"s996vvi-6"})(["height: ",";width: ",";vertical-align: middle;display: inline-block;cursor: pointer;position: relative;","{&:checked ~ {"," { display: inline-block; }"," { display: none; }}}"],function(e){return e.height?e.height:"auto"},function(e){return e.width?e.width:"auto"},C,O,A);n.a=T},"./src/chat/controls/Dropdown/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),o=t.n(a),i=t("./src/chat/constants/zIndex.ts"),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),c=function(e){return s("div",{className:e.className,onMouseEnter:function(n){e.isFixed&&(document.body.style.overflow="hidden")},onMouseLeave:function(n){e.isFixed&&(document.body.style.overflow="auto")},style:e.style},void 0,e.children)};n.a=o()(c).withConfig({componentId:"s1fijtxd-0"})(["margin-top: 2px;border-radius: 3px;overflow: hidden;position: absolute;z-index: ",";background-color: ",";"],function(e){var n=e.isOverlay;return void 0!==n&&n?i.c:i.b},function(e){return e.theme.layout.body})},"./src/chat/controls/ModalControlBar/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=(t.n(r),t("./node_modules/react-redux/es/index.js")),o=t("./node_modules/react-router-redux/es/index.js"),i=t("./bundled-modules/styled-components/styled-components.min.js"),s=t.n(i),c=t("./src/chat/controls/Button/index.tsx"),u=t("./src/chat/helpers/dom.ts"),l=t("./src/chat/helpers/styles/mixins/index.tsx"),d=t("./src/chat/strings/index.ts"),f=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),h=s()(c.a).withConfig({componentId:"gcawkf-0"})(["margin: 0 4px;min-width: 6.328em;",""],l.a),p=function(e){return{onSubmit:function(){},onCancel:Object(u.b)(function(){return e(Object(o.goBack)())})}},m=Object(a.connect)(void 0,p),g=s()(m(function(e){return f("div",{className:e.className},void 0,f(h,{onClick:e.secondaryButtonAction||e.onCancel,primary:!!e.secondaryButtonOnly,secondary:!e.secondaryButtonOnly},void 0,e.secondaryButtonText),!e.secondaryButtonOnly&&f(h,{type:"submit",primary:!0,onClick:e.primaryButtonAction||e.onSubmit,disabled:e.primaryButtonDisabled},void 0,e.primaryButtonText))})).withConfig({componentId:"gcawkf-1"})(["background: ",";border-top: 1px solid ",";display: flex;flex: 0 0 auto;justify-content: flex-end;padding: 9px 12px;"],function(e){return e.theme.layout.body},function(e){return e.theme.layout.colsBorder});g.defaultProps={primaryButtonText:Object(d.a)("en","app.button.submit"),secondaryButtonText:Object(d.a)("en","app.button.cancel")},g.displayName="ModalControlBar",n.a=g},"./src/chat/controls/Overlay/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./bundled-modules/styled-components/styled-components.min.js"),i=t.n(o),s=t("./src/chat/components/MessageListHeader/index.tsx"),c=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),u=function(){function e(e,n){var t=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=i.a.div.withConfig({componentId:"s1ducgcx-0"})(["flex: 1 1 auto;overflow-y: auto;"]),d=i()(function(e){var n=e.form?"form":"div",t=a.a.Children.toArray(e.children),r=u(t,2),o=r[0],i=r[1];return c(n,{className:e.className,onSubmit:e.onSubmit},void 0,e.headerName&&c(s.a,{name:e.headerName,menu:e.headerMenu,inviterName:e.inviter&&e.inviter.name}),c(l,{},void 0,o),i)}).withConfig({componentId:"s1ducgcx-1"})(["display: flex;flex-direction: column;height: 100%;width: 100%;"]);d.displayName="Overlay",n.a=d},"./src/chat/controls/Svg/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),o=t.n(a),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}();n.a=o()(function(e){return i("svg",{className:e.className,viewBox:e.viewBox},void 0,e.children)}).withConfig({componentId:"unllzc-0"})(["height: ",";width: ",";vertical-align: middle;transition: all 0.2s;fill: ",";",";"],function(e){return e.height?e.height:"100%"},function(e){return e.width?e.width:"100%"},function(e){return e.disable?e.theme.activity.icon.disable:e.active?e.theme.activity.icon.active:e.hover?e.theme.activity.icon.hover:e.theme.activity.icon.default},function(e){return!1!==e.hover?"&:hover {\n        fill: "+function(e){return e.disable?e.theme.activity.icon.disable:e.theme.activity.icon.hover}+";\n    };":""})},"./src/chat/customMiddleware/containerSize.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/once.js"),a=t.n(r),o=t("./src/chat/actions/container.ts"),i=t("./src/chat/constants/container.ts"),s=t("./src/chat/customMiddleware/noop.ts"),c=t("./src/chat/selectors/app.ts"),u=t("./src/lib/cache/index.ts"),l=t("./src/lib/constants/index.ts"),d=t("./src/lib/messageIframeParent/index.ts"),f=i.a.HIDDEN,h=i.a.EMBED,p=function(e){return e&&i.b[e]&&e!==i.a.FULL&&e||f||h},m=void 0,g=function(){try{return p(Object(u.b)(m))}catch(e){return i.a.EMBED}},v=function(e){Object(u.d)(m,e,u.a)},b=function(e){return Object(d.a)("resize.chat",{size:e,dimensions:i.b[e]})},_=a()(function(e){var n=e.getState(),t=void 0;t=n.meta.isRedesign?h:g(),e.dispatch(Object(o.c)(t)),b(t)}),y=function(e){if("undefined"==typeof window)return s.a;var n=e.getState(),t=n.user.account,r=t&&t.id||"unknown",a=Object(c.b)(n);return m=Object(u.c)(l.l.CHAT,"container",r),a?(Object(c.a)(n)||_(e),window.addEventListener("storage",function(e){switch(e.key){case m:;}}),function(e){return function(n){var t=e(n);switch(n.type){case o.a:var r=p(n.payload);v(r),b(r)}return t}}):(g()===i.a.HIDDEN?v(i.a.PILL):e.dispatch(Object(o.c)(i.a.FULL)),s.a)};n.a=y},"./src/chat/customMiddleware/heartbeat.ts":function(e,n,t){"use strict";var r=t("./src/lib/constants/index.ts"),a=t("./src/chat/constants/tracking.ts"),o=t("./src/telemetry/index.ts"),i=t("./src/chat/tracking/commonFields.ts"),s=function(e){Object(o.a)(Object.assign({noun:"timing",source:"global",action:a.a.HEARTBEAT},Object(i.v)(e)))},c=function(e){var n=e.getState();return s(n),setInterval(function(){return s(n)},30*r._19),function(t){return function(r){var a=t(r);return n=e.getState(),a}}};n.a=c},"./src/chat/customMiddleware/iframeDispatcher.ts":function(e,n,t){"use strict";var r,a=t("./node_modules/lodash/once.js"),o=t.n(a),i=t("./node_modules/react-router-redux/es/index.js"),s=t("./node_modules/url/url.js"),c=t("./src/chat/actions/channel.ts"),u=t("./src/chat/actions/container.ts"),l=t("./src/chat/actions/message.ts"),d=t("./src/chat/constants/container.ts"),f=t("./src/chat/customMiddleware/noop.ts"),h=t("./src/chat/helpers/urls.ts"),p=t("./src/chat/constants/tracking.ts"),m=t("./src/telemetry/index.ts"),g=t("./src/chat/tracking/commonFields.ts"),v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nav",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.a.CLICK;Object(m.a)(Object.assign({noun:n,source:t,action:r,chat:Object.assign({},Object(g.d)(e),Object(g.o)(e),Object(g.l)(e),Object(g.z)(e),Object(g.q)(e))},Object(g.v)(e)))},b=t("./src/lib/constants/index.ts"),_=t("./src/lib/messageIframeParent/index.ts");!function(e){e.Navigate="navigate.chat",e.Websocket="websocket.chat",e.Expand="expand.chat",e.UnreadCount="unreadCount.chat"}(r||(r={}));var y=function(e){try{return JSON.parse(e.data)}catch(e){return}},E=o()(function(e){window.addEventListener("message",function(n){var t=y(n);if(t)switch(t.type){case r.Navigate:var a=Object(s.parse)(t.data.href).pathname||h.g;e.dispatch(Object(i.push)(a)),e.dispatch(Object(u.c)(d.a.EMBED));break;case r.Websocket:e.dispatch(Object(l.z)());break;case r.Expand:var o=e.getState();e.dispatch(Object(u.c)(d.a.EMBED));var f=o.platform.currentPage;f&&f.meta&&f.meta.name===b._14.CHAT_MINIMIZE&&e.dispatch(Object(c.M)());var p=t.data.telemetry,m=p.action,g=p.noun,_=p.source;v(o,g,_,m)}})}),I=function(e){return"undefined"==typeof window?f.a:(E(e),function(e){return function(n){switch(n.type){case l.l:Object(_.a)(r.UnreadCount,n.payload)}return e(n)}})};n.a=I},"./src/chat/customMiddleware/loggedOutPreferencesSync.ts":function(e,n,t){"use strict";var r=t("./node_modules/js-cookie/src/js.cookie.js"),a=t.n(r),o=t("./node_modules/lodash/pick.js"),i=t.n(o),s=t("./src/config.ts"),c=t("./src/chat/actions/theme.ts"),u=new Set([c.a]),l=function(e){return function(n){return function(t){var r=n(t);if(u.has(t.type)){var o=e.getState().user,c=i()(o.prefs,["layout","globalTheme"]),l=o.language,d={prefs:c,language:l};a.a.set("USER",btoa(JSON.stringify(d)),{domain:s.a.cookieDomain})}return r}}};n.a=l},"./src/chat/customMiddleware/noop.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r=function(e){return function(n){return e(n)}}},"./src/chat/customMiddleware/sendbirdToken.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/defer.js"),a=t.n(r),o=t("./src/chat/actions/channel.ts"),i=t("./src/chat/actions/container.ts"),s=t("./src/chat/actions/message.ts"),c=t("./src/chat/actions/platform.ts"),u=t("./src/chat/actions/sendbird/index.ts"),l=t("./src/chat/actions/sendbird/sdk.ts"),d=t("./src/chat/actions/session.ts"),f=t("./src/chat/constants/container.ts"),h=t("./src/chat/customMiddleware/noop.ts"),p=t("./src/chat/selectors/platform.ts"),m=t("./src/chat/actions/sendbird/proxy.ts"),g=t("./src/lib/constants/index.ts"),v=this,b=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},_=function(e,n){var t=n&&n.type===i.a?n.payload:e.container.size,r=t===f.a.PILL||t===f.a.HIDDEN,a=n&&n.type===c.a?n.payload&&n.payload.routeMatch&&n.payload.routeMatch.route.meta.name===g._14.CHAT_MINIMIZE:e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name===g._14.CHAT_MINIMIZE;return!r&&a},y=function(e){if("undefined"==typeof window)return h.a;var n=void 0,t=function(t){var r=new Date,a=new Date(t.expires||0),o=Math.floor(.9*(a.getTime()-r.getTime()));n=setTimeout(function(){e.dispatch(Object(u.i)())},o)},r=function(){var n=e.getState().sendbird.session;n.expires&&n.active?t(n):a()(function(){return e.dispatch(Object(u.i)())})};return Object(p.b)(e.getState())===g._14.CHAT_MINIMIZE?a()(function(){return b(v,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!_(e.getState())){n.next=4;break}r(),n.next=9;break;case 4:return n.next=6,e.dispatch(Object(u.i)(!1));case 6:if(!e.getState().sendbird.session.token){n.next=9;break}return n.next=9,e.dispatch(Object(s.z)());case 9:case"end":return n.stop()}},n,this)}))}):r(),function(t){return function(s){var h=!e.getState().sendbird.sdk.active;switch(s.type){case i.a:if(!s.payload)break;var p=s.payload!==f.a.PILL&&s.payload!==f.a.HIDDEN;h&&p&&r();break;case c.a:var g=_(e.getState(),s);h&&g?r():g&&e.dispatch(Object(o.M)());break;case u.f:if(!s.payload)break;if(!s.payload.active)break;a()(function(){return b(v,void 0,void 0,regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.dispatch(Object(m.b)());case 2:if(!s.payload||!s.payload.token){n.next=6;break}return t=s.payload.token,n.next=6,e.dispatch(Object(l.d)(t));case 6:case"end":return n.stop()}},n,this)}))});break;case d.b:e.dispatch(Object(u.g)()),e.dispatch(Object(l.e)()),clearTimeout(n),n=null}return t(s)}}};n.a=y},"./src/chat/customMiddleware/title.ts":function(e,n,t){"use strict";var r=t("./src/chat/actions/message.ts"),a=function(e){var n="undefined"!=typeof window,t=n?window.document.title:"";return function(e){return function(a){switch(e(a),a.type){case r.l:var o=a.payload.count;n&&(window.document.title=o>0?"("+o+") "+t:t)}}}};n.a=a},"./src/chat/customMiddleware/tokenRefresher.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/throttle.js"),a=t.n(r),o=t("./src/lib/constants/index.ts"),i=t("./src/chat/actions/session.ts"),s=5*o.W,c=function(e){var n=a()(function(){e.dispatch(Object(i.d)())},s),t=void 0,r=void 0,o=function(){var t=e.getState().user.session;if(t&&r){var a=new Date(t.expires),o=r+Math.floor(.8*(a.getTime()-r));Date.now()>o&&n&&n()}},c=function(e){r=Date.now();var a=new Date(e.expires),o=a.getTime()-r,i=.8+.1*Math.random(),s=Math.min(Math.floor(i*e.expiresIn*1e3),Math.floor(i*o));t=setTimeout(n,s)},u=e.getState();return u.user.session&&c(u.user.session),window.addEventListener("focus",o),window.addEventListener("touchend",o),document.body.addEventListener("mouseenter",o),function(e){return function(n){return n.type!==i.a&&n.type!==i.c||c(n.payload),n.type===i.b&&(clearTimeout(t),t=null),e(n)}}};n.a=c},"./src/chat/customMiddleware/tracking.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/get.js"),a=t.n(r),o=t("./node_modules/lodash/isEmpty.js"),i=t.n(o),s=t("./node_modules/lodash/once.js"),c=t.n(s),u=t("./src/chat/actions/channel.ts"),l=t("./src/chat/actions/message.ts"),d=t("./src/chat/actions/platform.ts"),f=t("./src/chat/actions/sendbird/index.ts"),h=t("./src/chat/selectors/channels.ts"),p=t("./src/chat/selectors/platform.ts"),m=t("./src/chat/tracking/events/chatPerformance.ts"),g=t("./src/chat/tracking/events/chatView.ts"),v=t("./src/chat/tracking/events/contactsList.ts"),b=t("./src/chat/tracking/events/invitationInbox.ts"),_=t("./src/chat/tracking/events/messagesInbox.ts"),y=t("./src/lib/logs/timing.js"),E=c()(function(e,n){e.messages.firstLoaded&&e.channels.firstLoaded&&Object(_.b)(e),n&&i()(e.channels.models)&&Object(m.c)(e,n)}),I=c()(function(e,n){Object(m.c)(e,n)}),C=Object(y.d)(function(e,n,t){var r=Object(h.g)(e);r&&r.isMessageListLoaded?Object(m.a)(n,t):Object(m.b)(n,t)}),O=function(e){Object(p.c)()&&Object(g.c)(e)},A=function(e){var n=a()(e,"platform.currentPage.urlParams.action");n&&"create"===n&&Object(v.g)(e)},N=function(e){var n=a()(e,"platform.currentPage.urlParams.action");n&&"invited"===n&&Object(b.f)(e)},S=function(e){return function(n){return function(t){return function(r){var a=t(r),o=n.getState();switch(r.type){case d.a:E(o,e),A(o);break;case u.o:C(o,!0);break;case u.q:A(o);break;case u.p:E(o,e),N(o),O(o),I(o,e),C(o);break;case l.k:E(o,e);break;case f.b:I(o,e)}return a}}}};n.a=S},"./src/chat/customMiddleware/unreadMessageCount.ts":function(e,n,t){"use strict";var r=t("./src/chat/actions/message.ts"),a=t("./src/chat/customMiddleware/noop.ts"),o=t("./src/lib/cache/index.ts"),i=t("./src/lib/constants/index.ts"),s=void 0,c=void 0,u=function(e){Object(o.d)(s,e,5*i.W)},l=void 0,d=function(){l&&clearInterval(l),l=setInterval(function(){void 0===Object(o.b)(s)&&Object(r.z)()},5*i.W)},f=function(e){if("undefined"==typeof window)return a.a;var n=e.getState(),t=n.user.account,l=t&&t.id||"unknown";s=Object(o.c)(i.l.CHAT,"unread_message_count",l),u(n.messages.unread.count),d();try{window.parent.addEventListener("focus",d)}catch(e){}return window.addEventListener("storage",function(n){switch(n.key){case s:var t=Object(o.b)(s)||0;c=t,e.dispatch(Object(r.z)(t))}}),function(e){return function(n){var t=e(n);switch(n.type){case r.l:var a=n.payload.count;a!==c&&u(a)}return t}}};n.a=f},"./src/chat/endpoints/accounts/index.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return s}),t.d(n,"a",function(){return c}),t.d(n,"b",function(){return u});var r=t("./src/lib/constants/index.ts"),a=t("./src/lib/makeApiRequest/index.ts"),o=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s=function(e){return i(o,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{endpoint:e.apiUrl+"/api/v1/me",method:r.V.GET,data:{raw_json:1}}));case 1:case"end":return n.stop()}},n,this)}))},c=function(e,n){return i(o,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(a.b)(e,{data:{account_id:n,raw_json:1},endpoint:e.apiUrl+"/api/block_user",method:r.V.POST}));case 1:case"end":return t.stop()}},t,this)}))},u=function(e,n){return i(o,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(a.b)(e,{endpoint:e.apiUrl+"/user/"+n+"/about",method:r.V.GET,data:{raw_json:1}}));case 1:case"end":return t.stop()}},t,this)}))}},"./src/chat/endpoints/sendbird/index.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return u}),t.d(n,"d",function(){return l}),t.d(n,"b",function(){return d}),t.d(n,"a",function(){return f}),t.d(n,"f",function(){return h}),t.d(n,"e",function(){return p});var r=t("./src/config.ts"),a=t("./src/lib/constants/index.ts"),o=t("./src/lib/makeApiRequest/index.ts"),i=this,s=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},c="api/v1/sendbird",u=function(e){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/config",method:a.V.GET}));case 1:case"end":return n.stop()}},n,this)}))},l=function(e,n){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/me",method:a.V.GET}));case 1:case"end":return n.stop()}},n,this)}))},d=function(e,n,t){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/contacts?limit="+t,method:a.V.GET}));case 1:case"end":return n.stop()}},n,this)}))},f=function(e,n,t,u){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{data:{users:t,name:u},endpoint:r.a.sendbirdServiceUrl+"/"+c+"/group_channels",method:a.V.POST,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},n,this)}))},h=function(e,n,t,u){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{data:{users:t},endpoint:r.a.sendbirdServiceUrl+"/"+c+"/group_channels/"+u+"/invite",method:a.V.POST,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},n,this)}))},p=function(e,n){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/unread_message_count",method:a.V.GET,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},n,this)}))}},"./src/chat/endpoints/users/index.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i});var r=t("./src/lib/constants/index.ts"),a=t("./src/lib/makeApiRequest/index.ts"),o=function(e,n){return Object(a.b)(e,{method:r.V.POST,endpoint:e.apiUrl+"/api/report_user",data:{details:JSON.stringify({sendbirdChatMessage:n}),reason:n.reason,user:n.userNickname}})},i=function(e,n){return Object(a.b)(e,{method:r.V.GET,endpoint:e.apiUrl+"/api/user_data_by_account_ids",data:{raw_json:1,ids:n.join(",")}})}},"./src/chat/helpers/dom.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a});var r=function(e){return function(n){if(n.preventDefault(),e&&"function"==typeof e)return e(n)}},a=function(e){return function(n){if(n.preventDefault(),n.stopPropagation(),e&&"function"==typeof e)return e(n)}}},"./src/chat/helpers/styles/components/index.tsx":function(e,n,t){"use strict";t.d(n,"b",function(){return c}),t.d(n,"c",function(){return u}),t.d(n,"d",function(){return l}),t.d(n,"a",function(){return h});var r=t("./node_modules/react/index.js"),a=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),o=t.n(a),i=t("./src/chat/helpers/styles/mixins/index.tsx"),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),c=o.a.h2.withConfig({componentId:"s12zvnlt-0"})(["",";padding: 0;margin: 0;"],i.b),u=o.a.p.withConfig({componentId:"s12zvnlt-1"})(["",";padding: 0;margin: 0;"],i.d),l=o.a.sub.withConfig({componentId:"s12zvnlt-2"})(["",";"],i.e),d=o.a.div.withConfig({componentId:"s12zvnlt-3"})(["display: table;width: 100%;height: 100%;"]),f=o.a.div.withConfig({componentId:"s12zvnlt-4"})(["display: table-cell;vertical-align: middle;text-align: center;"]),h=function(e){return s(d,{className:e.className},void 0,s(f,{},void 0,e.children))}},"./src/chat/helpers/styles/functions/index.tsx":function(e,n,t){"use strict";function r(){return"transition: "+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all")+" "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.2s")+";"}function a(e){return"\n    animation-name: "+e+";\n    animation-duration: "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:".2s")+";\n    animation-iteration-count: "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)+";\n    animation-direction: "+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal")+";\n    animation-timing-function: "+(arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ease")+";\n    animation-fill-mode: "+(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"forwards")+";\n  "}n.b=r,n.a=a},"./src/chat/helpers/styles/mixins/index.tsx":function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return l}),t.d(n,"d",function(){return d}),t.d(n,"e",function(){return f}),t.d(n,"c",function(){return h}),t.d(n,"f",function(){return p}),t.d(n,"g",function(){return m});var r=t("./bundled-modules/styled-components/styled-components.min.js"),a=(t.n(r),t("./src/chat/helpers/styles/functions/index.tsx")),o=Object(r.css)(["color: ",";",";"],function(e){return e.theme.activity.text.body},Object(a.b)("color")),i=Object(r.css)(["font-family: BentonSans,sans-serif;font-size: 1em;line-height: 1.5em;"]),s=Object(r.css)(["font-family: BentonSans,sans-serif;font-size: 0.8em;line-height: 1.5em;"]),c=Object(r.css)(["font-family: BentonSans,sans-serif;font-size: 0.7em;line-height: 1.5em;"]),u=Object(r.css)(["outline: none;&:focus {box-shadow: 0 0 3px 1px ",";}"],function(e){return e.theme.activity.input.focusBg}),l=Object(r.css)(["","","-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;"],o,i),d=Object(r.css)(["","","-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;"],o,s),f=Object(r.css)(["","","-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;"],o,c),h=Object(r.css)(["cursor: pointer;color: ",";border-bottom: 1px solid ",";",";&:hover{color: ",";border-bottom: 1px solid ",";}"],function(e){return e.theme.activity.link.staticText},function(e){return e.theme.activity.link.staticUnderline},Object(a.b)(),function(e){return e.theme.activity.link.hoverText},function(e){return e.theme.activity.link.hoverText}),p=Object(r.css)(["word-break: break-all;line-break: strict;overflow-wrap: break-word;word-break: break-word;word-break: break-all;word-wrap: break-word;hyphens: auto;"]),m=Object(r.css)(["display: inline-block;overflow-wrap: break-word;word-wrap: break-word;a {","}"],p)},"./src/chat/icons/Loader/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),o=t.n(a),i=t("./src/chat/helpers/styles/functions/index.tsx"),s=t("./src/chat/helpers/styles/mixins/index.tsx"),c=t("./src/chat/icons/svgs/RedditLogo/index.tsx"),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),l=o.a.div.withConfig({componentId:"s1r1vd7j-0"})(['position: absolute;display: inline-block;text-align: center;width: 10%;top: 50%;left: 50%;margin-left: -5%;margin-top: -5%;:after {content: "";display: block;padding-bottom: 100%;}']),d=o.a.div.withConfig({componentId:"s1r1vd7j-1"})(["display: inline-block;text-align: center;position: absolute;font-size:0;height: 100%;width: 100%;margin-left: -50%;&:before {content: '';position: absolute;width: 100%;height: 100%;opacity: .75;border-radius: 100%;background-color: #ff4500;z-index: -1;","}@keyframes scaleout {0%   { transform: scale(1); }100% { transform: scale(1.5); opacity: 0; }}"],Object(i.a)("scaleout","1.5s","infinite","normal","ease-in-out")),f=o()(function(e){return u("div",{role:"progressbar",className:e.className},void 0,e.children)}).withConfig({componentId:"s1r1vd7j-2"})(["position: absolute;top:0; right:0; left:0; bottom:0;display: ",";z-index: ",";box-shadow: inset 0px 0px 150px 2000px ",";text-align: center;@keyframes fadeInIcon {0%   { transform: scale(0.5); opacity: 0;}100% { transform: scale(1); opacity: 1;}}@keyframes fadeOutIcon {0%   { transform: scale(1); opacity: 1;}100% { transform: scale(0.5); opacity: 0;}}@keyframes fadeOutWrap {0%    { box-shadow: inset 0px 0px 150px 2000px ","; height:100%; width:100%;}99.9% { box-shadow: inset 0px 0px 150px 0px ","; height:100%; width:100%;}100%  { box-shadow: inset 0px 0px 150px 0px ","; height:0; width:0;}}"],function(e){return e.isFadeOut?"none":"block"},function(e){return e.zIndex?e.zIndex:1},function(e){return e.theme.layout.body},function(e){return e.theme.layout.body},function(e){return e.theme.layout.body},function(e){return e.theme.layout.body}),h=o.a.div.withConfig({componentId:"s1r1vd7j-3"})(["","font-size: 12px;line-height: 1em;white-space: nowrap;position: absolute;margin-top: 30px;margin-left: -100px;width: 200px;left: 50%;top: 100%;z-index: 1;"],s.d),p=u(c.a,{});n.a=function(e){return u(f,{isFadeOut:e.isFadeOut,zIndex:e.zIndex},void 0,u(l,{},void 0,u(d,{},void 0,p,u(h,{},void 0,e.textType))))}},"./src/chat/icons/Snoo/index.tsx":function(e,n,t){"use strict";t.d(n,"b",function(){return u});var r=t("./src/config.ts"),a=t("./node_modules/react/index.js"),o=(t.n(a),t("./bundled-modules/styled-components/styled-components.min.js")),i=t.n(o),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),c=i.a.img.withConfig({componentId:"s1ji7qpg-0"})(["width: 100%;height: auto;"]),u=["snoo","snoo_simple_smile","snoo_smile","snoo_joy","snoo_tongue","snoo_wink","snoo_sad","snoo_biblethump","snoo_angry","snoo_disapproval","snoo_trollface","snoo_dealwithit","snoo_facepalm","snoo_shrug","snoo_scream","snoo_thoughtful","snoo_surprised","snoo_hearteyes","snoo_tableflip","snoo_putback","snoo_hug","snoo_feelsbadman","snoo_feelsgoodman","upvote","downvote","karma","cake","redditgold","illuminati","kappa","sloth","cat_blep","pupper","partyparrot","orly","hamster","doge"],l={simple_smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_simple_smile.png"}),smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_smile.png"}),joy:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_joy.png"}),tongue:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tongue.png"}),wink:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_wink.png"}),sad:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_sad.png"}),biblethump:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_cry.png"}),angry:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_angry.png"}),disapproval:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_disapproval.png"}),trollface:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_trollface.png"}),dealwithit:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_dealwithit.png"}),facepalm:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_facepalm.png"}),shrug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_shrug.png"}),scream:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_scream.png"}),thoughtful:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_thoughtful.png"}),surprised:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_surprised.png"}),hearteyes:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hearteyes.png"}),tableflip:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tableflip.png"}),putback:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_putback.png"}),hug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hug.png"}),feelsbadman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsbadman.png"}),feelsgoodman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsgoodman.png"}),snoo:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo.png"}),snoo_simple_smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_simple_smile.png"}),slightly_smiling:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_simple_smile.png"}),snoo_smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_smile.png"}),snoo_joy:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_joy.png"}),snoo_tongue:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tongue.png"}),stuck_out_tongue:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tongue.png"}),snoo_wink:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_wink.png"}),snoo_sad:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_sad.png"}),snoo_biblethump:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_cry.png"}),cry:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_cry.png"}),snoo_angry:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_angry.png"}),snoo_disapproval:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_disapproval.png"}),snoo_trollface:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_trollface.png"}),snoo_dealwithit:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_dealwithit.png"}),sunglasses:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_dealwithit.png"}),snoo_facepalm:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_facepalm.png"}),snoo_shrug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_shrug.png"}),snoo_scream:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_scream.png"}),snoo_thoughtful:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_thoughtful.png"}),snoo_surprised:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_surprised.png"}),flushed:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_surprised.png"}),snoo_hearteyes:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hearteyes.png"}),heart_eyes:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hearteyes.png"}),snoo_tableflip:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tableflip.png"}),table_flip:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tableflip.png"}),snoo_putback:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_putback.png"}),table:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_putback.png"}),snoo_hug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hug.png"}),snoo_feelsbadman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsbadman.png"}),feels_bad_man:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsbadman.png"}),snoo_feelsgoodman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsgoodman.png"}),feels_good_man:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsgoodman.png"}),upvote:s(c,{src:r.a.assetPath+"/img/snoomoji/upvote.png"}),downvote:s(c,{src:r.a.assetPath+"/img/snoomoji/downvote.png"}),karma:s(c,{src:r.a.assetPath+"/img/snoomoji/karma.png"}),cake:s(c,{src:r.a.assetPath+"/img/snoomoji/cake.png"}),redditgold:s(c,{src:r.a.assetPath+"/img/snoomoji/redditgold.png"}),gold:s(c,{src:r.a.assetPath+"/img/snoomoji/redditgold.png"}),illuminati:s(c,{src:r.a.assetPath+"/img/snoomoji/illuminati.png"}),kappa:s(c,{src:r.a.assetPath+"/img/snoomoji/kappa.png"}),sloth:s(c,{src:r.a.assetPath+"/img/snoomoji/sloth.png"}),cat_blep:s(c,{src:r.a.assetPath+"/img/snoomoji/cat_blep.png"}),pupper:s(c,{src:r.a.assetPath+"/img/snoomoji/pupper.png"}),partyparrot:s(c,{src:r.a.assetPath+"/img/snoomoji/partyparrot.gif"}),party_parrot:s(c,{src:r.a.assetPath+"/img/snoomoji/partyparrot.gif"}),orly:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),o_rly_owl:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),party_pigeon:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),partypigeon:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),hamster:s(c,{src:r.a.assetPath+"/img/snoomoji/hamster.png"}),doge:s(c,{src:r.a.assetPath+"/img/snoomoji/doge.png"})};n.a=l},"./src/chat/icons/Userpic/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t("./node_modules/react/index.js"),s=t.n(i),c=t("./node_modules/react-redux/es/index.js"),u=t("./node_modules/reselect/lib/index.js"),l=t("./bundled-modules/styled-components/styled-components.min.js"),d=t.n(l),f=t("./src/config.ts"),h=t("./src/lib/constants/index.ts"),p=["#FF4500","#0DD3BB","#24A0ED","#FFB000","#FF8717","#46D160","#25B79F","#0079D3","#4856A3","#C18D42","#A06A42","#46A508","#008985","#7193FF","#7E53C1","#FFD635","#DDBD37","#D4E815","#94E044","#FF66AC","#DB0064","#FF585B","#EA0027","#A5A4A4","#545452"],m=t("./src/chat/strings/index.ts"),g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),b=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),_=function(e){return e.replace(h._4.ACCOUNT+"_","")},y=function(e){var n=parseInt(e,36),t=p.length;return{imageIndex:n%30+1,colorIndex:Math.floor(n/30)%t}},E=Object(l.css)(["border-radius: 3px;text-align: center;display: inline-block;vertical-align: middle;"]),I=d.a.i.withConfig({componentId:"s1nmg3w6-0"})(["","border: 1px solid ",";background: ",";"],E,function(e){return e.theme.layout.colsBorder},function(e){return e.theme.layout.body}),C=d()(function(e){return b("i",{className:e.className})}).withConfig({componentId:"s1nmg3w6-1"})(["","height: ",";width: ",';background-size: 100% 100%;background-position: center bottom;background-image: url("',"/img/userpic-icons/",'.png");background-color: ',""],E,function(e){return e.height?e.height:"25px"},function(e){return e.width?e.width:"25px"},f.a.assetPath,function(e){return e.imageIndex},function(e){return p[e.colorIndex]}),O=function(e){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={profileImgFailed:!1},t.onError=t.onError.bind(t),t}return o(n,e),v(n,[{key:"onError",value:function(){this.setState({profileImgFailed:!0})}},{key:"render",value:function(){var e=this.props,n=e.className,t=e.contact,r=e.currentUser,a=e.userId,o=this.state.profileImgFailed,i="",s="";return r.id===a?(i=r.subreddit&&r.subreddit.icon_img||"",s=r.name):t&&(i=t.profileImg||"",s=t.name),o||!i?b(I,{className:n,title:s+" "+Object(m.a)("en","app.chat.user.snoovatar")}):b("img",{onError:this.onError,className:n,src:i,alt:s+" "+Object(m.a)("en","app.chat.user.snoovatar")})}}]),n}(s.a.Component),A=d()(O).withConfig({componentId:"s1nmg3w6-2"})(["","height: ",";width: ",";color: transparent;"],E,function(e){return e.height?e.height:"25px"},function(e){return e.width?e.width:"25px"}),N=Object(u.createStructuredSelector)({contact:function(e,n){return e.contacts.models[n.userId]},currentUser:function(e){return e.user.account}}),S=Object(c.connect)(N),w=function(e){var n=e.className,t=e.contact,r=e.currentUser,a=e.height,o=e.width,i=e.userId,c=_(i),u=t&&t.profileImg,l=i===r.id,d=r.subreddit&&r.subreddit.icon_img,f=y(c);return u||l&&d?b(A,{contact:t,currentUser:r,className:n,height:a,width:o,userId:i}):s.a.createElement(C,g({className:n,height:a,width:o,userId:c},f))};n.a=S(w)},"./src/chat/icons/svgs/ChatNew/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M10.625 8.656h-1.97v1.97c0 .36-.293.655-.655.655-.362 0-.656-.293-.656-.655v-1.97h-1.97c-.36 0-.655-.293-.655-.655 0-.362.293-.656.655-.656h1.97v-1.97c0-.36.293-.655.655-.655.362 0 .656.293.656.655v1.97h1.97c.36 0 .655.293.655.655 0 .362-.293.656-.655.656M8 1C4.14 1 1 4.14 1 8c0 1.222.317 2.372.87 3.373l-.824 2.476c-.105.313-.024.66.21.894.167.167.39.256.62.256.09 0 .185-.015.275-.045l2.478-.825c1 .553 2.15.87 3.372.87 3.86 0 7-3.14 7-7s-3.14-7-7-7"});n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 16 16"}),c)}},"./src/chat/icons/svgs/Flag/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M9.554 4.38l1.7-3.188c.133-.25.125-.554-.022-.8C11.086.15 10.822 0 10.538 0H.81C.363 0 0 .363 0 .81V11.19c0 .448.362.81.81.81.45 0 .81-.362.81-.81V8.757h8.918c.284 0 .548-.15.694-.394.147-.243.155-.547.02-.798L9.555 4.38z"});n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 12 12"}),c)}},"./src/chat/icons/svgs/MenuOverflow/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("g",{transform:"translate(-475.000000, -286.000000)"},void 0,i("path",{d:"M485.479375,287.804009 C485.479375,288.796214 486.265328,289.608018 487.225938,289.608018 C488.186547,289.608018 488.9725,288.796214 488.9725,287.804009 C488.9725,286.811804 488.186547,286 487.225938,286 C486.265328,286 485.479375,286.811804 485.479375,287.804009 M480.239688,287.804009 C480.239688,288.796214 481.025641,289.608018 481.98625,289.608018 C482.946859,289.608018 483.732813,288.796214 483.732813,287.804009 C483.732813,286.811804 482.946859,286 481.98625,286 C481.025641,286 480.239688,286.811804 480.239688,287.804009 M478.493125,287.804009 C478.493125,286.811804 477.707172,286 476.746563,286 C475.785953,286 475,286.811804 475,287.804009 C475,288.796214 475.785953,289.608018 476.746563,289.608018 C477.707172,289.608018 478.493125,288.796214 478.493125,287.804009"}));n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 14 4"}),c)}},"./src/chat/icons/svgs/NavClose/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M9.212 8l4.537-4.537c.334-.335.334-.877 0-1.212-.336-.334-.878-.334-1.213 0L8 6.79 3.463 2.25c-.335-.334-.877-.334-1.212 0-.334.336-.334.878 0 1.213L6.79 8 2.25 12.537c-.334.335-.334.877 0 1.212.168.166.388.25.607.25.22 0 .44-.084.606-.25L8 9.21l4.537 4.537c.167.166.386.25.606.25.22 0 .44-.084.606-.25.334-.336.334-.878 0-1.213L9.21 8z"});n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 16 16"}),c)}},"./src/chat/icons/svgs/NavMinimize/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("g",{transform:"translate(-418.000000, -286.000000)"},void 0,i("rect",{height:"1",id:"minimize",width:"8",x:"418",y:"286"}));n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 8 1"}),c)}},"./src/chat/icons/svgs/NavPopout/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M471.941082 10.73459716c-.115-.115-.25375-.2075-.40625-.27-.30625-.12625-.65-.12625-.95625 0-.1525.0625-.29125.155-.40625.27l-3.75 3.75000004c-.4875.4875-.4875 1.27875 0 1.7675.48875.4875 1.28.4875 1.76875 0l1.615-1.61625v8.2325c0 .69.56 1.25 1.25 1.25.69125 0 1.25-.56 1.25-1.25v-8.2325l1.61625 1.61625c.245.24375.565.36625.88375.36625.32 0 .64-.1225.885-.36625.4875-.48875.4875-1.28 0-1.7675l-3.75-3.75000004z",transform:"rotate(45 252.42066803 -549.56052525)"});n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 12 12"}),c)}},"./src/chat/icons/svgs/RedditLogo/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("g",{},void 0,i("circle",{fill:"#ff4500",cx:"10",cy:"10",r:"10"}),i("path",{fill:"#ffffff",d:"M16.67,10A1.46,1.46,0,0,0,14.2,9a7.12,7.12,0,0,0-3.85-1.23L11,4.65,13.14,5.1a1,1,0,1,0,.13-0.61L10.82,4a0.31,0.31,0,0,0-.37.24L9.71,7.71a7.14,7.14,0,0,0-3.9,1.23A1.46,1.46,0,1,0,4.2,11.33a2.87,2.87,0,0,0,0,.44c0,2.24,2.61,4.06,5.83,4.06s5.83-1.82,5.83-4.06a2.87,2.87,0,0,0,0-.44A1.46,1.46,0,0,0,16.67,10Zm-10,1a1,1,0,1,1,1,1A1,1,0,0,1,6.67,11Zm5.81,2.75a3.84,3.84,0,0,1-2.47.77,3.84,3.84,0,0,1-2.47-.77,0.27,0.27,0,0,1,.38-0.38A3.27,3.27,0,0,0,10,14a3.28,3.28,0,0,0,2.09-.61A0.27,0.27,0,1,1,12.48,13.79Zm-0.18-1.71a1,1,0,1,1,1-1A1,1,0,0,1,12.29,12.08Z"}));n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 20 20"}),c)}},"./src/chat/icons/svgs/Trash/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),a=t.n(r),o=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M8.167 9.375c0 .207-.17.375-.38.375s-.382-.168-.382-.375V5.25c0-.207.17-.375.38-.375.212 0 .382.168.382.375v4.125zm-2.286 0c0 .207-.17.375-.38.375s-.38-.168-.38-.375V5.25c0-.207.17-.375.38-.375s.38.168.38.375v4.125zm-2.284 0c0 .207-.17.375-.38.375-.212 0-.382-.168-.382-.375V5.25c0-.207.17-.375.38-.375s.382.168.382.375v4.125zM9.62 3c.21 0 .38.168.38.375v7.5C10 11.495 9.49 12 8.86 12H2.143C1.513 12 1 11.495 1 10.875v-7.5C1 3.168 1.17 3 1.38 3h8.24zm0-2.25c.21 0 .38.168.38.375v.75c0 .207-.17.375-.38.375H1.38c-.21 0-.38-.168-.38-.375v-.75c0-.207.17-.375.38-.375h2.255L4.2.125C4.272.045 4.376 0 4.485 0h2.03c.11 0 .213.046.286.125l.565.625H9.62z",fillRule:"evenodd"});n.a=function(e){return a.a.createElement(o.a,s({},e,{viewBox:"0 0 12 12"}),c)}},"./src/chat/models/Channel/index.ts":function(e,n,t){"use strict";function r(e){return{id:e.userId,name:e.nickname}}function a(e){if(e)return{id:e.user_id,name:e.nickname}}function o(e){return e.map(function(e){return{id:e.user_id||e.userId,isOnline:e.is_online||e.isOnline,lastSeenAt:e.last_seen_at||e.lastSeenAt,name:e.nickname,profileUrl:e.profile_url||e.profileUrl,state:e.state,isBlockedByMe:e.isBlockedByMe}})}function i(e,n){return{channelId:d(e.channel_url),channelSendbirdUrl:e.channel_url,memberState:n,fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,inviter:a(e.inviter),coverUrl:e.cover_url,createdAt:e.created_at,customType:e.custom_type,data:e.data,maxLengthMessage:-1,memberCount:e.member_count,name:e.name,type:e.is_distinct?l.Direct:l.Group,lastMessage:void 0,unreadMessageCount:e.unread_message_count,members:o(e.members)}}function s(e,n){var t=e.coverUrl,a=e.createdAt,i=e.customType,s=e.data,c=e.memberCount,f=e.name,h=e.isDistinct,p=e.lastMessage,m=e.unreadMessageCount,g=e.inviter,v=e.url,b=e.members;return{channelId:d(v),channelSendbirdUrl:v,memberState:n,coverUrl:t,createdAt:Number(a),customType:i,data:s,maxLengthMessage:-1,memberCount:c,name:f,inviter:r(g),type:h?l.Direct:l.Group,lastMessage:p?Object(u.c)(p):void 0,unreadMessageCount:m,members:o(b),fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1}}var c=t("./src/chat/constants/channels.ts"),u=t("./src/chat/models/Message/index.ts");t.d(n,"e",function(){return d}),t.d(n,"b",function(){return f}),t.d(n,"a",function(){return l}),n.d=i,n.c=s;var l,d=function(e){return e.replace("sendbird_group_channel_","")},f=function(e){return"sendbird_group_channel_"+e};!function(e){e[e.Direct=0]="Direct",e[e.Group=1]="Group"}(l||(l={}));c.e.ALL,l.Direct},"./src/chat/models/Message/index.ts":function(e,n,t){"use strict";function r(e){var n=e.channelUrl,t=e.messageType,r=e.messageId,a=e.createdAt,o=e.updatedAt,i=e.channelType,u=e.message,l=e.data,d=e.sender,f=e.reqId,h=e.customType;return{channelId:Object(c.e)(n),channelSendbirdUrl:n,messageType:s.c[t],messageId:r,createdAt:a,updatedAt:o,channelType:i,data:l,messageData:g(u,l),sender:d,reqId:f,customType:h}}function a(e,n,t){var r=i()(),a=b.n(e);if(a)return{channelId:a.channelId,clientMessageId:r,createdAt:(new Date).getTime(),data:JSON.stringify(v(n,t,r)),messageData:d[t](n),messageType:s.c.PENDING,error:!1,sender:{nickname:_.b(e),userId:_.a(e)}}}var o=t("./node_modules/uuid/v4.js"),i=t.n(o),s=t("./src/chat/constants/messages.ts"),c=t("./src/chat/models/Channel/index.ts"),u=t("./src/chat/helpers/urls.ts"),l=t("./src/chat/icons/Snoo/index.tsx"),d={text:function(e){return{type:s.b.TEXT,value:e}},post:function(e){return{type:s.b.POST,value:e,subreddit:Object(u.d)(e)}},snoomoji:function(e){var n=l.a[e],t=l.a[0];return{type:s.b.SNOOMOJI,value:e,icon:n||t}}},f=s.b.TEXT,h=s.b.POST,p=s.b.SNOOMOJI,m=function(e){if(e){return JSON.parse(e).v1.clientMessageId||void 0}},g=function(e,n){if(n&&n.length){var t=JSON.parse(n),r=t.v1,a=r.snoomoji,o=r.embed_data;if(a){var i=a;return d[p](i)}if(o&&o.url)return d[h](o.url)}return d[f](e)},v=function(e,n,t){return{v1:Object.assign({clientMessageId:t},n===p?{snoomoji:e}:{},n===h?{embed_data:{url:e}}:{})}},b=t("./src/chat/selectors/channels.ts"),_=t("./src/chat/selectors/user.ts");t.d(n,"b",function(){return y}),n.c=r,n.a=a;var y=m},"./src/chat/models/Theme/index.ts":function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"b",function(){return s}),t.d(n,"a",function(){return c}),t.d(n,"c",function(){return u});var a,o=t("./node_modules/polished/dist/polished.es.js"),i=t("./src/chat/constants/theme.ts"),s={activity:{icon:{default:"#353535",active:"#24A0ED",disable:"#CCCCCA",hover:"#AAAAAA",nsfw:{bg:"#000",text:"#FFF"}},text:{regular:"#373C3F",active:"#24A0ED",body:"#353535",fade:"#A5A4A4",contrast:"#000",light:"#CCCCCA",warning:"#EA0027"},button:{active:"#3683D2",text:"#FFFFFF"},send:{active:"#24A0ED",disable:"#AAAAAA",hover:Object(o.a)(.08,"#24A0ED")},checkbox:{checked:"#0DD3BB",mark:"#FFF",unchecked:"#FCFCFB",uncheckedBorder:"#F1F1EF"},input:{border:"#EFEFED",focusColor:"#FFFFFF",focusBg:"#0DD3BB",ownerBg:"#EFEFED",color:"#373C3F",error:"#F00",channelRename:"#F7F7F5"},link:{staticUnderline:"rgba(34,153,255,.4)",staticText:"rgba(34,153,255,1)",hoverText:"rgba(255,69,0,1);"}},layout:{body:"#FFFFFF",bodyBorder:"rgba(0,0,0,0.2)",colsBorder:"#EFEFED",header:{counterBg:"#FF4500",counterText:"#FFF"}},chat:{list:{item:{selectedBg:"#EFEFED",hoverBg:"#F8F8F8"}}},message:{list:{item:{ownerBg:"#EFEFED",button:"#AAAAAA"},separator:{line:"#DFDEDF"}}},post:{separator:"#EFEFED"}},c={activity:{icon:{default:"#FFFFFF",active:"#24A0ED",disable:"#CCCCCA",hover:"#AAAAAA",nsfw:{bg:"#000",text:"#FFF"}},text:{regular:"#FFF",active:"#24A0ED",body:"#FFF",fade:"#A5A4A4",contrast:"#FFF",light:"#CCCCCA",warning:"#EA0027"},button:{active:"#3683D2",text:"#FFFFFF"},send:{active:"#24A0ED",disable:"#AAAAAA",hover:Object(o.a)(.08,"#24A0ED")},checkbox:{checked:"#0DD3BB",mark:"#000",unchecked:"#000",uncheckedBorder:"#2b2a2a"},input:{border:"#EFEFED",focusColor:"#FFFFFF",focusBg:"#0DD3BB",ownerBg:"#444444",color:"#FFFFFF",error:"#F00",channelRename:"#F7F7F5"},link:{staticUnderline:"rgba(34,153,255,.4)",staticText:"rgba(34,153,255,1)",hoverText:"rgba(255,69,0,1);"}},layout:{body:"#000",bodyBorder:"rgba(255,255,255,0.2)",colsBorder:"#2b2a2a",header:{counterBg:"#FF4500",counterText:"#FFF"}},chat:{list:{item:{selectedBg:"#444",hoverBg:"#383837"}}},message:{list:{item:{ownerBg:"#2b2a2a",button:"#AAAAAA"},separator:{line:"#DFDEDF"}}},post:{separator:"#EFEFED"}},u=(a={},r(a,i.b.REDDIT,s),r(a,i.b.NIGHT,c),a)},"./src/chat/pageLoaders/async.ts":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var u=t("./src/lib/constants/index.ts"),l=t("./node_modules/react/index.js"),d=t.n(l),f=t("./src/chat/components/OverlayCreateChannel/index.tsx"),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),p=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),m=h(f.a,{}),g=function(e){function n(){return r(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),p(n,[{key:"render",value:function(){return m}}]),n}(d.a.Component),v=g,b=t("./src/chat/components/EmptyState/index.tsx"),_=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,a){var o=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),y=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),E=_(b.a,{}),I=function(e){function n(){return i(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,e),y(n,[{key:"render",value:function(){return E}}]),n}(d.a.Component),C=I,O=function(e){return function(){switch(e){case u.m.CHAT:return t.e("ChatPage").then(t.bind(null,"./src/chat/pages/Chat.tsx")).then(function(e){return e.default});case u.m.CHAT_EMPTY:return Promise.resolve(C);case u.m.CHAT_CREATE:return Promise.resolve(v);case u.m.CHAT_MINIMIZE:return t.e("Minimize").then(t.bind(null,"./src/chat/pages/Minimize.tsx")).then(function(e){return e.default});case u.m.CHAT_MEMBERS:return t.e("ChatMembers").then(t.bind(null,"./src/chat/pages/Members.tsx")).then(function(e){return e.default});case u.m.CHAT_INVITE:return t.e("ChatMembers").then(t.bind(null,"./src/chat/pages/Invite.tsx")).then(function(e){return e.default});case u.m.CHAT_TEST:return t.e("ChatTest").then(t.bind(null,"./src/chat/pages/ChatTest.tsx")).then(function(e){return e.default});default:throw new Error("Route is not defined for '"+e+"'.")}}};n.a=O},"./src/chat/reducers/index.ts":function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function u(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function l(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n){return e===n||(0===e.length&&0===n.length||!(0===e.length&&n.length>0)&&(!(e.length>0&&0===n.length)&&(1===e.length&&1===n.length?e[0]===n[0]:2===e.length&&2===n.length?e[0]===n[0]&&e[1]===n[1]:3===e.length&&3===n.length?e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]:Xe()(e,n))))}var p=t("./node_modules/redux/es/index.js"),m=t("./node_modules/redux-form/es/index.js"),g=t("./src/chat/actions/channel.ts"),v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case g.q:return!0;default:return e}},b=v,_=t("./node_modules/lodash/uniq.js"),y=t.n(_),E={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,n=arguments[1];switch(n.type){case g.i:return Object.assign({},e,{fetchingChannels:!0});case g.a:var t=n.payload,a=t.channels,o=t.hasMoreChannels,i=Object.keys(a);return{fetchingChannels:!1,hasMoreChannels:o&&!!i.length,sortedKeys:[].concat(r(e.sortedKeys),r(i))};case g.s:var s=n.payload.acceptedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==s})});case g.c:var c=n.payload.blockedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==c})});case g.l:var u=n.payload.removedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==u})});case g.w:var l=n.payload.channel.channelId;return e.sortedKeys.indexOf(l)>-1?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==l})}):e;case g.v:var d=n.payload.channel;return Object.assign({},e,{sortedKeys:y()([d.channelId].concat(r(e.sortedKeys)))});default:return e}},C=I,O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case g.d:return!1;case g.h:return!0;default:return e}},A=O,N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case g.f:return!0;case g.g:case g.e:return!1;default:return e}},S=t("./src/chat/actions/message.ts"),w={fetchingChannels:!1,hasMoreChannels:!0,sortedKeys:[]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments[1];switch(n.type){case g.j:return Object.assign({},e,{fetchingChannels:!0});case g.b:var t=n.payload,r=t.channels,o=t.hasMoreChannels,i=Object.keys(r);return{fetchingChannels:!1,hasMoreChannels:o&&!!i.length,sortedKeys:[].concat(a(e.sortedKeys),a(i))};case g.l:var s=n.payload.removedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==s})});case g.c:var c=n.payload.blockedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==c})});case g.s:var u=n.payload.acceptedChannelId;return Object.assign({},e,{sortedKeys:[u].concat(a(e.sortedKeys))});case g.g:var l=Object.keys(n.payload);return Object.assign({},e,{sortedKeys:y()([].concat(a(l),a(e.sortedKeys)))});case g.t:var d=n.payload.channelId;return Object.assign({},e,{sortedKeys:y()([d].concat(a(e.sortedKeys)))});case S.a:var f=n.payload.channelId;return Object.assign({},e,{sortedKeys:y()([f].concat(a(e.sortedKeys)))});default:return e}},j=R,T=t("./node_modules/lodash/omit.js"),P=t.n(T),x=t("./node_modules/lodash/first.js"),U=t.n(x),k=t("./src/chat/constants/channels.ts"),L={},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,n=arguments[1];switch(n.type){case g.g:return Object.assign({},e,n.payload);case g.b:case g.a:return Object.assign({},e,n.payload.channels);case g.n:var t=n.payload,r=e[t];return 0===r.unreadMessageCount?e:Object.assign({},e,o({},t,Object.assign({},r,{unreadMessageCount:0})));case g.s:var a=n.payload.acceptedChannelId,i=Object.assign({},e[a],{memberState:k.e.JOINED});return Object.assign({},e,o({},i.channelId,i));case g.w:var s=n.payload.channel,c=e[s.channelId],u=Object.assign({},c,P()(s,"hasMoreMessages","isMessageListLoaded")),l=o({},s.channelId,u);return Object.assign({},e,l);case g.v:var d=n.payload.channel,f=e[d.channelId],h=Object.assign({},f,d,{memberState:k.e.INVITED}),p=o({},d.channelId,h);return Object.assign({},p,e);case g.c:var m=n.payload.blockedChannelId,v=P()(e,m);return Object.assign({},v);case g.l:var b=P()(e,n.payload.removedChannelId);return Object.assign({},b);case g.u:var _=n.payload,y=_.channelId,E=_.name,I=Object.assign({},e[y],{name:E});return Object.assign({},e,o({},y,Object.assign({},I)));case S.a:var C=n.payload.channelId,O=Number(U()(Object.keys(n.payload.message))),A=Object.assign({},e[C],{lastMessage:n.payload.message[O]});return Object.assign({},e,o({},C,A));case S.g:var N=n.payload;return Object.assign({},e,o({},N,Object.assign({},e[N],{fetchingMessages:!0,fetchingMessagesError:!1})));case S.b:case S.e:var w=n.payload,R=w.hasMore,j=w.channelId;return Object.assign({},e,o({},j,Object.assign({},e[j],{isMessageListLoaded:!0,hasMoreMessages:R,fetchingMessages:!1,fetchingMessagesError:!1})));case S.f:var T=n.payload;return Object.assign({},e,o({},T,Object.assign({},e[T],{fetchingMessages:!1,fetchingMessagesError:!0})));case g.k:var x=n.payload.channelId;return Object.assign({},e,o({},x,Object.assign({},e[x],{fetchingFirstMessage:!0})));case g.r:var M=n.payload,D=M.channelId,H=M.firstMessageId;return Object.assign({},e,o({},D,Object.assign({},e[D],{fetchingFirstMessage:!1,firstMessageId:H})));default:return e}},D=M,H={channelId:void 0,isLoaded:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,n=arguments[1];switch(n.type){case g.o:var t=Object.assign({},e,{isLoaded:!1});if(n.payload){var r=n.payload.channelId;r&&(t.channelId=r)}return t;case g.p:return Object.assign({},e,{isLoaded:!0});case g.l:return Object.assign({},e,{channelId:""});default:return e}},F=G,B=Object(p.combineReducers)({isCreatingChannel:N,firstLoaded:b,inviteListExpanded:A,invited:C,joined:j,models:D,selected:F}),V=t("./node_modules/lodash/values.js"),z=t.n(V),q=t("./src/chat/actions/sendbird/index.ts"),K=t("./src/chat/actions/user.ts"),Y={SEARCH:"search",CONTACTS:"contacts"},W={},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,n=arguments[1];switch(n.type){case q.e:return Object.assign({},e,n.payload.reduce(function(e,n){return e[n.name.toLowerCase()]={loaded:!0,userId:n.id,valid:!0,method:Y.CONTACTS},e},{}));case q.c:var t=n.payload.username;return Object.assign({},e,i({},t,{loaded:!1,userId:null,valid:!1,method:Y.SEARCH}));case q.d:var r=n.payload,a=r.contact,o=r.username,s=r.valid,c=!!(s&&a&&a.id);return Object.assign({},e,i({},o.toLowerCase(),{loaded:!0,userId:a?a.id:null,valid:c,method:Y.SEARCH}));case K.f:var u=n.payload;return Object.assign({},e,z()(u).reduce(function(e,n){return e[n.name.toLowerCase()]={loaded:!0,userId:n.id,valid:!0,method:Y.SEARCH},e},{}));default:return e}},J=Q,$={},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,n=arguments[1];switch(n.type){case q.e:return Object.assign({},e,n.payload.reduce(function(e,n){return e[n.id]=n,e},{}));case q.d:var t=n.payload.contact;return t?Object.assign({},e,s({},t.id,t)):e;case K.f:return Object.assign({},e,n.payload||{});case g.c:var r=n.payload.blockedUserId;return r?P()(e,r):e;default:return e}},X=Z,ee=[],ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,n=arguments[1];switch(n.type){case K.e:return[].concat(c(e),[n.payload]);case K.h:return e.filter(function(e){return e!==n.payload});case K.g:return ee;default:return e}},te=ne,re=[],ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,n=arguments[1];switch(n.type){case q.e:return[].concat(u(e),u(n.payload.map(function(e){return e.id})));case g.c:return e.filter(function(e){return e!==n.payload.blockedUserId});default:return e}},oe=ae,ie=Object(p.combineReducers)({knownContacts:J,models:X,selectedUserIds:te,suggestedKeys:oe}),se=t("./src/chat/actions/container.ts"),ce=t("./src/chat/constants/container.ts"),ue={size:ce.a.EMBED},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,n=arguments[1];switch(n.type){case se.a:if(ce.b[n.payload])return Object.assign({},e,{size:n.payload});default:return e}},de=le,fe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case S.b:case S.k:return!0;default:return e}},he=fe,pe={},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,n=arguments[1];switch(n.type){case S.b:var t=n.payload.messages;return Object.assign({},e,t);case S.a:return Object.assign({},e,n.payload.message);case S.h:return Object.assign({},e,n.payload);case S.d:case S.i:return P()(e,n.payload);case S.e:var r=n.payload.messages;return Object.assign({},e,r);case g.m:var a=n.payload;return Object.assign({},P.a.apply(void 0,[e].concat(l(a))));default:return e}},ge=me,ve={},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,n=arguments[1];switch(n.type){case S.c:var t=n.payload;return Object.assign({},e,d({},t.clientMessageId,t));case S.m:var r=n.payload,a=r.clientMessageId,o=r.toggle;if(a){var i=e[a];return Object.assign({},e,d({},a,Object.assign({},i,{error:o})))}return Object.assign({},e);case S.a:case S.j:var s=n.payload.clientMessageId;return Object.assign({},s?P()(e,s):e);default:return e}},_e=be,ye={count:0},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,n=arguments[1];switch(n.type){case S.l:var t=n.payload.count;return e.count===t?e:Object.assign({},e,{count:t})}return e},Ie=Ee,Ce=Object(p.combineReducers)({firstLoaded:he,models:ge,pending:_e,unread:Ie}),Oe=t("./src/chat/reducers/meta/index.ts"),Ae=t("./node_modules/history/index.js"),Ne=t("./src/chat/actions/platform.ts"),Se={currentPage:null,referrers:{},metas:{}},we=function(e,n){return{key:e,locationState:{},queryParams:{},routeMatch:null,status:404,url:n,urlParams:{}}},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,n=arguments[1];switch(n.type){case Ne.a:if(!n.payload)return e;var t=e.currentPage,r=n.payload,a=r.routeMatch,o=r.location,i=o.key,s=Object(Ae.createPath)(o),c=a?{key:i,locationState:o.state,meta:a.route.meta,queryParams:a.match.queryParams,routeMatch:P()(a,["route.action"]),status:200,url:s,urlParams:a.match.params}:we(i,s),u=e.referrers;if("PUSH"===r.action){var l=t&&t.url||"";u=Object.assign({},u,f({},i,l))}return Object.assign({},e,{referrers:u,currentPage:c});case Ne.c:if(!n.payload)return e;var d=n.payload,h=d.key,p=d.title,m=d.description,g=d.icon,v=d.type;return Object.assign({},e,{metas:Object.assign({},e.metas,f({},h,{description:m,icon:g,title:p,type:v}))});case Ne.b:return n.payload,e;default:return e}},je=Re,Te=t("./src/chat/actions/promo.ts"),Pe={nsfwWarning:!1,welcomeBeta:!1},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,n=arguments[1];switch(n.type){case Te.a:var t=n.payload;return Object.assign({},e,t);default:return e}},Ue=xe,ke=t("./src/chat/actions/sendbird/proxy.ts"),Le={host:void 0},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,n=arguments[1];switch(n.type){case ke.a:return e.host=n.payload.proxy_host,e;default:return e}},De=Me,He=t("./src/chat/actions/sendbird/sdk.ts"),Ge={active:!1,connectionStatus:"offline"},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,n=arguments[1];switch(n.type){case He.a:return Object.assign({},e,{active:!0,connectionStatus:n.payload.connectionStatus});case He.c:var t=Object.assign({},n.payload);return Object.assign({},e,{error:t,active:!1});case He.b:return Object.assign({},e,{active:!1});default:return e}},Be=Fe,Ve={expires:void 0,token:void 0,active:!1},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,n=arguments[1];switch(n.type){case q.f:return Object.assign({},e,n.payload);case q.a:return Object.assign({},e,{active:!0});case q.b:return Object.assign({},e,{active:!1});default:return e}},qe=ze,Ke=Object(p.combineReducers)({proxy:De,session:qe,sdk:Be}),Ye=t("./src/chat/actions/theme.ts"),We=t("./src/chat/models/Theme/index.ts"),Qe={current:We.b,cached:{}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,n=arguments[1];switch(n.type){case Ye.a:return e.current=We.c[n.payload.themeKey],Object.assign({},e);default:return e}},$e=Je,Ze=t("./node_modules/lodash/isEqual.js"),Xe=t.n(Ze),en=t("./src/chat/actions/typingIndicator.ts"),nn={usernames:[]},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,n=arguments[1];switch(n.type){case en.a:var t=n.payload.usernames;return h(t,e.usernames)?e:{usernames:t};case g.o:return{usernames:[]};default:return e}},rn=tn,an=t("./src/lib/reducers/addAuthentication/index.ts"),on=function(e,n){switch(void 0===e&&(e=null),n.type){case K.a:return n.payload;default:return e}},sn=Object(an.a)(on,null),cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un=function(e){return Object.keys(e).reduce(function(n,t){var r=e[t];return"boolean"==typeof r&&(n[t]=r),"object"===(void 0===r?"undefined":cn(r))&&(n[t]=ln(r)),n},{})},ln=function(e){return{experimentId:e.experiment_id,owner:e.owner,variant:e.variant}},dn={},fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,n=arguments[1];switch(n.type){case K.a:return un(n.payload.features);default:return e}},hn=Object(an.a)(fn,dn),pn=t("./src/lib/constants/index.ts"),mn=pn.s,gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn;return arguments[1].type,e},vn=Object(an.a)(gn,mn),bn={blob:"",loid:"",loidCreated:"",version:-1},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,n=arguments[1];switch(n.type){case K.b:return n.payload;default:return e}},yn=_n,En=t("./src/chat/constants/theme.ts"),In={globalTheme:En.a},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In,n=arguments[1];switch(n.type){case Ye.a:var t=n.payload.themeKey;return Object.assign({},e,{globalTheme:t});default:return e}},On=Cn,An=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1];switch(n.type){case K.c:return n.payload;default:return e}},Nn=An,Sn=t("./src/chat/actions/session.ts"),wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1];switch(n.type){case Sn.a:case Sn.c:return n.payload;case Sn.b:return null;default:return e}},Rn=wn,jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1];switch(n.type){case K.d:return n.payload;default:return e}},Tn=jn,Pn=Object(p.combineReducers)({account:sn,experiments:hn,language:vn,loid:yn,prefs:On,reddaid:Nn,session:Rn,sessionTracker:Tn}),xn=t("./src/app/reducers/tooltipId/index.ts");n.a=Object(p.combineReducers)({contacts:ie,container:de,form:m.reducer,meta:Oe.b,platform:je,user:Pn,themes:$e,sendbird:Ke,tooltipId:xn.a,channels:B,messages:Ce,promoAccepted:Ue,typingIndicator:rn})},"./src/chat/reducers/meta/index.ts":function(e,n,t){"use strict";var r=t("./src/lib/makeActionCreator/index.ts");Object(r.a)("META__META_RECEIVED");t.d(n,"a",function(){return a});var a={country:"",domain:"",isBot:!1,isRedesign:!1,method:"",protocol:"",sessionReferrerDomain:"",userAgent:""},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,n=arguments[1];switch(n.type){case"META__META_RECEIVED":return n.payload;default:return e}};n.b=o},"./src/chat/routes/index.ts":function(e,n,t){"use strict";function r(e){var n=this;return function(t){return function(r,a,o){return d(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(u.i)()(r,a,o);case 2:return n.next=4,e(t)(r,a,o);case 4:case"end":return n.stop()}},n,this)}))}}}function a(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var i=t("./src/lib/constants/index.ts"),s=t("./src/chat/actions/channel.ts"),c=t("./src/chat/actions/tracking.ts"),u=t("./src/chat/actions/user.ts"),l=this,d=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},f=r(function(e){return function(e,n,t){return d(l,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),h=r(function(e){return function(e,n,t){return d(l,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),p=r(function(e){return function(e,n,t){return d(l,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),m=r(function(e){return function(e,n,t){return d(l,void 0,void 0,regeneratorRuntime.mark(function t(){var r,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.platform.currentPage,!(o=a&&a.urlParams.userIds.split(","))){t.next=7;break}return e(Object(c.g)(o)),e(Object(s.A)(o,name)),t.abrupt("return");case 7:case"end":return t.stop()}},t,this)}))}}),g={action:f,chunk:i.m.CHAT,exact:!0,meta:{name:i._14.CHAT},path:"/chat/*"},v=g,b={action:f,chunk:i.m.CHAT,exact:!0,meta:{name:i._14.CHAT},path:"/chat/"},_={action:f,chunk:i.m.CHAT_EMPTY,exact:!0,meta:{name:i._14.CHAT_EMPTY},path:"/chat/empty/"},y={action:h,chunk:i.m.CHAT_CREATE,exact:!0,meta:{name:i._14.CHAT_CREATE},path:"/chat/channel/:action(create)/"},E={action:h,chunk:i.m.CHAT_INVITE,exact:!0,meta:{name:i._14.CHAT_INVITE},path:"/chat/channel/:channelId/:action(invite)/"},I={action:h,chunk:i.m.CHAT_MEMBERS,exact:!0,meta:{name:i._14.CHAT_MEMBERS},path:"/chat/channel/:channelId/:action(members)/"},C={action:p,chunk:i.m.CHAT_MINIMIZE,exact:!0,meta:{name:i._14.CHAT_MINIMIZE},path:"/chat/minimize/"},O=["/chat/channel/:channelId/:action(invite_confirmation|block|invited|leave|nsfw|request|decline)/","/chat/channel/:channelId/:messageId?/:action(delete|report)?"],A=O.map(function(e){return{action:h,chunk:i.m.CHAT,exact:!0,meta:{name:i._14.CHAT},path:e}}),N=["/chat/user_id/:userIds/"],S=N.map(function(e){return{action:m,chunk:i.m.CHAT,exact:!0,meta:{name:i._14.CHAT},path:e}}),w=[b,_,C,E,y,I].concat(a(A),a(S)),R=this,j=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},T=function(e){var n=this;return function(t){return function(r,a,o){return j(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(t)(r,a,o);case 2:case"end":return n.stop()}},n,this)}))}}}(function(e){return function(e,n,t){return j(R,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),P=["/chat/test"],x=P.map(function(e){return{action:T,chunk:i.m.CHAT_TEST,exact:!0,meta:{name:i._14.CHAT_TEST},path:e}}),U=x,k=[].concat(o(w),o(U),[v]);n.a=k},"./src/chat/selectors/app.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return a}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return i});var r=t("./src/chat/strings/index.ts"),a=function(e){return!(!(e.user.account&&e.sendbird.session.active&&e.sendbird.sdk.active&&e.channels.firstLoaded)||i(e))},o=function(e){return window.parent!==window||!!(e&&e.meta&&e.meta.isRedesign)},i=function(e){if(!e.user.account)return Object(r.a)("en","app.error.signIn")}},"./src/chat/selectors/channels.ts":function(e,n,t){"use strict";t.d(n,"i",function(){return o}),t.d(n,"j",function(){return i}),t.d(n,"e",function(){return s}),t.d(n,"g",function(){return c}),t.d(n,"n",function(){return u}),t.d(n,"h",function(){return l}),t.d(n,"f",function(){return d}),t.d(n,"m",function(){return f}),t.d(n,"d",function(){return h}),t.d(n,"c",function(){return p}),t.d(n,"k",function(){return m}),t.d(n,"o",function(){return g}),t.d(n,"p",function(){return v}),t.d(n,"q",function(){return b}),t.d(n,"l",function(){return _}),t.d(n,"s",function(){return y}),t.d(n,"b",function(){return E}),t.d(n,"w",function(){return I}),t.d(n,"t",function(){return C}),t.d(n,"r",function(){return O}),t.d(n,"a",function(){return A}),t.d(n,"u",function(){return N}),t.d(n,"v",function(){return S});var r=t("./node_modules/lodash/values.js"),a=t.n(r),o=(t("./src/chat/models/Channel/index.ts"),function(e){return e.channels.invited.sortedKeys.length}),i=function(e){return e.channels.joined.sortedKeys.length},s=function(e,n){if(n)return e.channels.models[n]},c=function(e){var n=e.platform.currentPage,t=n&&n.urlParams.channelId;if(t)return s(e,t)},u=function(e){var n=e.channels.selected.channelId;if(n)return s(e,n)},l=function(e){return c(e)||u(e)},d=function(e,n){return n&&n.members.map(function(e){return e.id})},f=function(e){var n=e.user,t=l(e);if(t&&t.members)return t.members.filter(function(e){return e.id!==n.account.id})},h=function(e){var n=f(e);return n&&n.filter(function(e){return e.isBlockedByMe})},p=function(e){var n=[],t=e.user.account.id;return a()(e.channels.models).forEach(function(e){var r=e.members.filter(function(e){return e.id!==t}),a=r.map(function(e){return e.id});a.length&&n.push(a)}),n.length&&n},m=function(e){var n=l(e);return n&&n.lastMessage},g=function(e){return a()(e.messages.models).filter(function(n){return n.channelId===e.channels.selected.channelId})},v=function(e){return a()(e.messages.pending).filter(function(n){return n.channelId===e.channels.selected.channelId})},b=function(e,n){var t=u(e);return t&&t[n]},_=function(e){var n=u(e);if(n&&n.lastMessage)return n.lastMessage.sender.userId},y=function(e){return e.channels.joined.hasMoreChannels},E=function(e){return e.channels.joined.fetchingChannels},I=function(e){return e.channels.joined.sortedKeys.map(function(n){return e.channels.models[n]})},C=function(e){return e.channels.inviteListExpanded},O=function(e){return e.channels.invited.hasMoreChannels},A=function(e){return e.channels.invited.fetchingChannels},N=function(e){return e.channels.invited.sortedKeys.map(function(n){return e.channels.models[n]})},S=function(e){return e.channels.isCreatingChannel}},"./src/chat/selectors/contacts.ts":function(e,n,t){"use strict";t.d(n,"f",function(){return o}),t.d(n,"g",function(){return i}),t.d(n,"b",function(){return c}),t.d(n,"a",function(){return u}),t.d(n,"c",function(){return l}),t.d(n,"e",function(){return d}),t.d(n,"h",function(){return f}),t.d(n,"i",function(){return h}),t.d(n,"d",function(){return p});var r=t("./node_modules/lodash/values.js"),a=t.n(r),o=function(e){return e.contacts.suggestedKeys.map(function(n){return e.contacts.models[n]})},i=function(e){var n=e.contacts,t=n.knownContacts,r=n.models;return Object.keys(t).map(function(e){return t[e]}).filter(function(e){return e&&e.loaded&&e.valid}).map(function(e){return e.userId&&r[e.userId]}).filter(function(e){return!!e})},s=function(e,n){return a()(e.contacts.models).find(function(e){return e.id===n})},c=function(e,n){return a()(e.contacts.models).find(function(e){return e.name.toLowerCase()===n.toLowerCase()})},u=function(e,n){var t=e.contacts.knownContacts,r=t[n.toLowerCase()];return r&&r.method},l=function(e,n){if(n&&n.inviter)return e.contacts.models[n.inviter.id]},d=function(e){return e.contacts.knownContacts},f=function(e){return e.contacts.selectedUserIds},h=function(e){return f(e).length},p=function(e){var n=e.contacts.selectedUserIds;return n.length&&n.map(function(n){var t=s(e,n);return t&&t.id})}},"./src/chat/selectors/messages.ts":function(e,n,t){"use strict";t.d(n,"e",function(){return a}),t.d(n,"b",function(){return i}),t.d(n,"c",function(){return s}),t.d(n,"d",function(){return c}),t.d(n,"a",function(){return u});var r=t("./src/chat/selectors/channels.ts"),a=function(e){var n=Object(r.i)(e);return e.messages.unread.count-n||0},o=function(e,n){if(n)return e.messages.models[n]},i=function(e,n){var t=o(e,n);return t&&t.sender},s=function(e,n){var t=o(e,n);return t&&t.messageData.type},c=function(e,n){return e.messages.pending[n]},u=function(e){var n=Object(r.g)(e);if(n&&n.firstMessageId)return e.messages.models[n.firstMessageId]}},"./src/chat/selectors/platform.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return o});var r=function(e){return/chat\/channel\/(\w+)$/.test(e||window.location.pathname)},a=function(e){var n=e.platform.currentPage;if(n&&n.meta)return n.meta.name},o=function(e){var n=e.platform.currentPage;if(n&&n.urlParams)return n.urlParams.action}},"./src/chat/selectors/user.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a});var r=function(e){return e.user.account.id},a=function(e){return e.user.account.name}},"./src/chat/singleton/SendbirdSDK.ts":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var a,o=t("./src/config.ts"),i=t("./src/chat/actions/channel.ts"),s=t("./src/chat/actions/message.ts"),c=t("./src/chat/actions/tracking.ts"),u=t("./src/chat/actions/typingIndicator.ts");!function(e){e[e.Channels=50]="Channels",e[e.Messages=30]="Messages"}(a||(a={}));var l=t("./src/chat/constants/channels.ts"),d=t("./src/chat/constants/messages.ts"),f=t("./node_modules/sendbird/SendBird.min.js"),h=t.n(f),p=t("./src/chat/models/Message/index.ts"),m=t("./src/chat/models/Channel/index.ts"),g=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),v=o.a.sendbirdAppId,b=function(){function e(){var n=this;r(this,e),this.channels={},this.channelUniqueHandlerID=[],this.switchChannel=function(e){return n.channel=e,n.messageListQuery=n.channel.createPreviousMessageListQuery(),n.getPreviousMessages(d.c.USER)},this.self=new h.a({appId:v})}return g(e,[{key:"connect",value:function(e,n,t,r,a){var o=this;return new Promise(function(i){o.dispatch=a,o.self.connect(t,n,"https://"+e,"wss://"+e,function(e,n){o.toggleUpdateListeners(!0),o.self.updateCurrentUserInfo(r),i({data:e,error:n})})})}},{key:"isConnected",value:function(){return!!this.self.currentUser}},{key:"disconnect",value:function(){var e=this;return new Promise(function(n){e.isConnected()&&(e.toggleUpdateListeners(!1),e.self.disconnect(function(){n()}))})}},{key:"toggleUpdateListeners",value:function(e){var n=this;e?(this.onChannelChanged(),this.onReceiveInvite(),this.onReceiveMessage(),this.onDeleteMessage(),this.onUserActions(),this.onTypingStatusUpdated()):this.channelUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(function(e){n.self.removeChannelHandler(e)})}},{key:"onReceiveInvite",value:function(){var e=this,n=new this.self.ChannelHandler;n.onUserReceivedInvitation=function(n){var t=Object(m.c)(n,n.memberState);e.dispatch(Object(i.P)(t))},this.self.addChannelHandler("RECEIVE_CHANNEL_INVITE",n),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_INVITE")}},{key:"onReceiveMessage",value:function(){var e=this,n=new this.self.ChannelHandler;n.onMessageReceived=function(n,t){if(t.messageType!==d.c.ADMIN){var r=Object(m.c)(n,n.memberState),a=Object(p.c)(t);e.dispatch(Object(s.s)(a)),e.dispatch(Object(i.P)(r)),e.dispatch(Object(i.O)(r))}},this.self.addChannelHandler("RECEIVE_CHANNEL_MESSAGE",n),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_MESSAGE")}},{key:"onDeleteMessage",value:function(){var e=this,n=new this.self.ChannelHandler;n.onMessageDeleted=function(n,t){e.dispatch(Object(s.u)(t))},this.self.addChannelHandler("DELETE_CHANNEL_MESSAGE",n),this.channelUniqueHandlerID.push("DELETE_CHANNEL_MESSAGE")}},{key:"onTypingStatusUpdated",value:function(){var e=this,n=new this.self.ChannelHandler;n.onTypingStatusUpdated=function(n){var t=Object(m.e)(n.url),r=n.getTypingMembers().map(function(e){return e.nickname});e.dispatch(Object(u.b)({channelId:t,usernames:r}))},this.self.addChannelHandler("TYPING_STATUS_UPDATED",n),this.channelUniqueHandlerID.push("TYPING_STATUS_UPDATED")}},{key:"onUserActions",value:function(){var e=this,n=void 0;!function(e){e.onUserLeft="USER_LEFT_CHANNEL"}(n||(n={})),Object.keys(n).map(function(t){var r=new e.self.ChannelHandler,a=n[t];r[t]=function(n,t){var r=Object(m.c)(n,n.memberState);e.dispatch(Object(i.P)(r))},e.self.addChannelHandler(a,r),e.channelUniqueHandlerID.push(a)})}},{key:"onChannelChanged",value:function(){var e=this,n=new this.self.ChannelHandler;n.onChannelChanged=function(n){var t=Object(m.c)(n,n.memberState);e.dispatch(Object(i.P)(t))},this.self.addChannelHandler("ON_CHANNEL_CHANGED",n),this.channelUniqueHandlerID.push("ON_CHANNEL_CHANGED")}},{key:"enterChannel",value:function(e){var n=this;return new Promise(function(t,r){if(n.isConnected()){var a=Object(m.b)(e),o=n.channels[e];o?n.switchChannel(o).then(function(e){return t({data:e})}):n.self.GroupChannel.getChannel(a,function(a,o){o?r():(n.channels[e]=a,n.switchChannel(a).then(function(e){return t({data:e})}))})}})}},{key:"updateChannel",value:function(e){var n=this,t=e.name,r=e.coverUrl,a=e.data;return new Promise(function(e,o){n.channel?n.channel.updateChannel(t,r,a,function(n,t){return n?e():o(t)}):o("No channel selected")})}},{key:"hideChannel",value:function(){var e=this;return new Promise(function(n){if(e.channel)return e.channel.hide(),n();n()})}},{key:"leaveChannel",value:function(){var e=this;return new Promise(function(n,t){if(e.channel)return e.channel.leave(function(e,n){n&&t(n)}),n();t("No channel selected")})}},{key:"acceptChannelInvite",value:function(){var e=this;return new Promise(function(n){if(e.channel)return e.channel.acceptInvitation(),n();n()})}},{key:"declineChannelInvite",value:function(){var e=this;return new Promise(function(n){if(e.channel)return e.channel.declineInvitation(),n();n()})}},{key:"getExistingChannels",value:function(e){var n=this;return new Promise(function(t,r){var o=void 0;e===l.e.INVITED?n.channelListQueryInvited?o=n.channelListQueryInvited:(n.channelListQueryInvited=n.self.GroupChannel.createMyGroupChannelListQuery(),o=n.channelListQueryInvited):n.channelListQueryJoined?o=n.channelListQueryJoined:(n.channelListQueryJoined=n.self.GroupChannel.createMyGroupChannelListQuery(),o=n.channelListQueryJoined),o.includeEmpty=!0,o.limit=a.Channels,o.memberStateFilter=n.self.GroupChannel.memberState[e],o.hasNext&&o.next(function(n,a){if(a)r(a);else{var i=o.hasNext,s={};n.length&&n.forEach(function(n){var t=Object(m.c)(n,e);t.memberCount<2||(s[t.channelId]=t)}),t({channels:s,hasMoreChannels:i})}})})}},{key:"startTypingIndicator",value:function(){this.channel&&this.channel.startTyping()}},{key:"endTypingIndicator",value:function(){this.channel&&this.channel.endTyping()}},{key:"getPreviousMessages",value:function(e){var n=this;return new Promise(function(t,r){if(n.channel){var o={};n.messageListQuery.load(a.Messages,!0,e,function(e,a){if(a)r();else{e.forEach(function(e){o[e.messageId]=Object(p.c)(e)});var i=n.messageListQuery.hasMore;t({messages:o,hasMore:i})}})}else r()})}},{key:"addMessage",value:function(e,n){var t=this;return new Promise(function(r,a){t.channel&&t.channel.sendUserMessage(e,n,function(e,n){n?(t.dispatch(Object(c.t)()),a()):r(Object(p.c)(e))})})}},{key:"deleteMessage",value:function(e){var n=this;return new Promise(function(t){n.channel&&n.channel.deleteMessage(e,function(e,n){n||t(e)})})}},{key:"getFirstMessage",value:function(){var e=this;return new Promise(function(n,t){e.channel?e.channel.getNextMessagesByTimestamp(0,!0,1,!0,"","",function(e,t){t||n(e)}):t()})}},{key:"getUnreadCount",value:function(){var e=this;return new Promise(function(n){e.self.GroupChannel.getTotalUnreadMessageCount(function(e){n(e)})})}},{key:"markChannelAsRead",value:function(){var e=this;return new Promise(function(n){e.channel.markAsRead(),n()})}}]),e}(),_=new b;n.a=_},"./src/chat/strings/index.ts":function(e,n,t){"use strict";function r(e,n){var t=[n,e].join(".");return o()(i,t,"")}var a=t("./node_modules/lodash/get.js"),o=t.n(a),i={app:{layout:{header:{title:{en:"Chats"},newChat:{en:"Start a new chat"},help:{en:"Help"},popout:{en:"Open chat in new window"},minimize:{en:"Minimize chat"},expand:{en:"Expand chat"},close:{en:"Close chat"}},contactList:{en:"Contact List"},currentConversation:{en:"Current Conversation"}},chat:{actions:{new:{en:"New Chat"},invited:{en:"Let's go"}},list:{new:{en:"Wants to message you"},showMore:{en:"Show more"},collapse:{en:"Collapse"},prefix:{messageOwner:{en:"You:"},sentSnoomoji:{en:"Sent a Snoomoji"},sentPostLink:{en:"Shared a post"},sentTextLink:{en:"Shared a link"}}},block:{warning:{en:"Are you sure you want to block this user?"},header:{en:"Block"},details:{en:"You will no longer see their comments, posts,\n          and messages. They will not know that you've blocked them.\n          You will no longer get notifications from this user."},apiError:"Something went wrong. Please try again later.",apiSuccess:"User has been successfully blocked."},channels:{addGroupMembers:{en:"You can add %0 more Redditors"},addToGroup:{en:"Add to group"},chats:{en:"Chats"},createGroup:{en:"Create Group"},groupName:{en:"Group name (required)"},groupMembers:{en:"group members"},maxGroupSize:{en:"Maximum group size reached"},loading:{en:"Loading channels..."},requests:{en:"Requests"},renameGroup:{en:"Rename group"}},contactList:{to:{en:"To:"},invalidUser:{en:"User doesn't exist"},potentialsHeader:{en:"Click to add"},existingGroupContact:{en:"already in group"}},delete:{warning:{en:"Are you sure you want to delete this message?"},header:{en:"Delete message"},details:{en:"You can't undo this."}},inviteConfirmation:{header:{en:"Invite users to chat"},details:{en:"Invited users will have access to the\n          chat history of this conversation."}},nsfwWarning:{header:{en:"NSFW User"},details:{en:"One or more users in this chat are marked as NSFW\n          (not safe for work), which means they tend to post explicit content\n          elsewhere on Reddit. This doesn't necessarily mean that the content\n          of this chat is explicit."}},leave:{header:{en:"Are you sure"},subHeader:{en:"Leave group chat?"},details:{en:"You will be removed from the group and no longer receive new messages.\n          You will not be able to join this group again unless you receive another invite."}},message:{placeholder:{en:"Enter text here…"},failedToSend:{en:"Failed to send"},dropdown:{options:{addToGroup:{en:"Add to group"},profile:{en:"View Profile"},mute:{en:"Mute"},block:{en:"Block"},members:{en:"View members"},leave:{en:"Leave group"},renameGroup:{en:"Rename group"}}},pickers:{snoomoji:{en:"Choose Snoomoji"},snoomojiLoading:{en:"Loading snoomoji..."}},timeStamp:{now:{en:"Now"},today:{en:"Today"},yesterday:{en:"Yesterday"}}},messageList:{loading:{en:"Loading history..."},loadingError:{en:"Something went wrong. Please try again."}},request:{karma:{en:"karma"},header:{en:"Chat Request"},decline:{header:{en:"Decline invite?"},details:{en:"This chat will be deleted, and this person will not be notified\n            that you've declined their request."}},groupHeader:{en:"Group invite"},redditor:{en:"redditor for"},details:{en:"Accept their request if you'd like to continue the\n          conversation. We won't notify them if you decline."},blocked:{warning:{en:"Heads up: you previously blocked\n            at least one person in this group."},details:{en:"If you join, you'll be able to see any\n            messages they send. They'll remain blocked\n            on the rest of Reddit."},label:{en:"Blocked"}},nsfw:{en:"NSFW"},preview:{en:"Preview of this chat"},defaultTitle:{en:"group"}},emptyState:{title:{en:"Your chats will show up here."},main:{en:"Get started by clicking the new chat button here or on someone's profile."}},beta:{title:{en:"You're invited. Try out Reddit Chat."},main:{en:"Start a real-time chat with another redditor.\n          We're beta testing this feature, so please share your feedback by chatting u/reddit_chat_feedback."}},typingIndicator:{oneUser:{en:"<%= user %> is typing..."},twoUsers:{en:"<%= firstUser %> and <%= secondUser %> are typing..."},severalUsers:{en:"Several people are typing..."}},report:{header:{en:"Reason for report"},reasons:{threats:{en:"Threatens, harrasses, or bullies"},violence:{en:"Encourages or incites violence"},personal:{en:"Reveals personal information"},impersonation:{en:"Impersonation"},illegal:{en:"Illegal content"},spam:{en:"Spam"}}},intro:{en:"This is the start of a beautiful thing. Say something nice, or share a cat fact."},user:{snoovatar:{en:"Snoovatar"}}},button:{accept:{en:"Accept"},addToGroup:{en:"Add to group"},block:{en:"Block"},cancel:{en:"Cancel"},decline:{en:"Decline"},delete:{en:"Delete"},init:{en:"Start Chat"},leave:{en:"Leave"},submit:{en:"Submit"},done:{en:"Done"},resend:{en:"Resend"},save:{en:"Save"}},error:{genericPage:{en:"Sorry, something went wrong."},signIn:{en:"Sign in, please."}}}};n.a=r},"./src/chat/tracking/commonFields.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/first.js"),a=t.n(r),o=t("./node_modules/lodash/difference.js"),i=t.n(o),s=t("./node_modules/lodash/isEmpty.js"),c=t.n(s),u=t("./src/chat/selectors/channels.ts"),l=t("./src/chat/selectors/contacts.ts"),d=t("./src/chat/selectors/messages.ts"),f=t("./node_modules/js-cookie/src/js.cookie.js"),h=t.n(f),p=t("./node_modules/url/url.js"),m=t.n(p),g=function(e){return{pageType:"chat"}},v=function(e){var n=h.a.get("session_tracker");return{id:n?n.split(".")[0]:""}},b=function(e){return{id:e.user.account?e.user.account.id:"accessed_chat_without_login",isLoggedIn:!!e.user.account}},_=function(e){var n=e.platform.currentPage?e.platform.referrers[e.platform.currentPage.key]:void 0;if(n){return{domain:m.a.parse(n).hostname,url:n}}},y=function(e){return{}},E=t("./src/chat/constants/channels.ts"),I=t("./src/chat/models/Channel/index.ts");t.d(n,"v",function(){return C}),t.d(n,"d",function(){return O}),t.d(n,"q",function(){return A}),t.d(n,"u",function(){return N}),t.d(n,"s",function(){return S}),t.d(n,"C",function(){return w}),t.d(n,"B",function(){return R}),t.d(n,"l",function(){return j}),t.d(n,"j",function(){return T}),t.d(n,"p",function(){return P}),t.d(n,"w",function(){return x}),t.d(n,"a",function(){return U}),t.d(n,"A",function(){return k}),t.d(n,"z",function(){return L}),t.d(n,"n",function(){return M}),t.d(n,"k",function(){return D}),t.d(n,"m",function(){return H}),t.d(n,"i",function(){return G}),t.d(n,"r",function(){return F}),t.d(n,"c",function(){return B}),t.d(n,"e",function(){return V}),t.d(n,"f",function(){return z}),t.d(n,"h",function(){return q}),t.d(n,"g",function(){return K}),t.d(n,"b",function(){return Y}),t.d(n,"o",function(){return W}),t.d(n,"t",function(){return Q}),t.d(n,"D",function(){return J}),t.d(n,"y",function(){return $}),t.d(n,"x",function(){return Z});var C=function(e){return{app:{name:"web2x"},user:b(e),screen:y(),session:v(),referrer:_(e),actionInfo:g()}},O=function(e,n){var t=n?Object(u.e)(e,n):Object(u.g)(e);return{id:t?t.channelSendbirdUrl:null}},A=function(e,n){var t=n?Object(u.e)(e,n):Object(u.h)(e);return{type:t?t.type===I.a.Group?E.b.GROUP:E.b.DIRECT:null}},N=function(e){return{type:Object(l.i)(e)>1?E.b.GROUP:E.b.DIRECT}},S=function(e){var n=Object(l.i)(e),t=n+1;return{number_members:n?t:0}},w=function(e,n){return{type:(n&&n.length)>2?E.b.GROUP:E.b.DIRECT}},R=function(e,n){return{number_members:k(e,n).members.length}},j=function(e){var n=Object(u.h)(e);return{number_members:n&&n.memberCount}},T=function(e){var n=Object(u.d)(e);return{number_blocked_users:n&&n.length}},P=function(e,n){var t=Object(d.b)(e,n);return{sender_user_id:t&&t.userId||e.user.account.id}},x=function(e){var n=Object(u.g)(e);return{sender_user_id:n&&n.inviter&&n.inviter.id}},U=function(e){var n=Object(u.d)(e);return{blocked_members:n&&n.map(function(e){return e.id})}},k=function(e,n){return n.push(e.user.account.id),{members:n}},L=function(e){return{number_unreads:Object(d.e)(e)}},M=function(e,n){var t=Object(u.h)(e),r=t&&t.unreadMessageCount;return{number_unreads:"number"==typeof n?n:r||0}},D=function(e){return{number_channels:Object(u.j)(e)}},H=function(e){return{number_pending_invites:Object(u.i)(e)}},G=function(e,n){return{message_type:Object(d.c)(e,n)||"text"}},F=function(e,n,t){var r=Object(l.a)(e,n);return{user_added_method:t||(r||null)}},B=function(e){var n=!1,t=Object(l.d)(e),r=Object(u.c)(e);return t&&t.length&&r&&r.length&&(n=!!r.find(function(e){return c()(i()(t.sort(),e.sort()))})),{existing_channel:n}},V=function(e){var n=Object(u.h)(e);return{invitation_id:n?n.channelSendbirdUrl:null}},z=function(e,n){return{invitation_preview_type:Object(d.c)(e,n)||"text"}},q=function(e){var n=Object(u.h)(e);return{invitation_type:n?n.type===I.a.Group?E.b.GROUP:E.b.DIRECT:null}},K=function(e){var n=Object(u.h)(e);return{invitation_timestamp:n?n.createdAt:null}},Y=function(e){return{blocked_user_id:e||null}},W=function(e){var n=Object(u.h)(e),t=!(!n||n.type!==I.a.Direct),r=Object(u.m)(e),o=r&&r.length&&a()(r).id;return{recipient_user_id:t?o:null}},Q=function(e){var n=null,t=Object(l.h)(e);if(1===t.length){var r=a()(t),o=Object(l.b)(e,r);n=o?o.id:null}return{recipient_user_id:n}},J=function(e){return{id:e.user.account.id}},$=function(e){return{type:e}},Z=function(e){return{millis:e}}},"./src/chat/tracking/eventUtils.ts":function(e,n,t){"use strict";function r(e,n,t){var r=Object(i.d)(e);if(r&&r.length>0){var a=o()(),s=r.map(function(e){return e.id});return t&&s.push(t),s.forEach(function(e){return n(e,a)})}return n(t)}n.a=r;var a=t("./node_modules/uuid/v4.js"),o=t.n(a),i=t("./src/chat/selectors/channels.ts")},"./src/chat/tracking/events/chatPerformance.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return c}),t.d(n,"b",function(){return u}),t.d(n,"a",function(){return l});var r=t("./src/chat/constants/tracking.ts"),a=t("./src/telemetry/index.ts"),o=t("./src/telemetry/models/Timer.ts"),i=t("./src/chat/tracking/commonFields.ts"),s="chat_performance",c=function(e,n){Object(a.a)(Object.assign({noun:"inbox_new",source:s,action:r.a.LOAD,chat:Object.assign({},Object(i.k)(e),Object(i.m)(e)),timer:Object.assign({},Object(i.y)(o.TimerType.ChatLoadInboxNew),Object(i.x)(n))},Object(i.v)(e)))},u=function(e,n){Object(a.a)(Object.assign({noun:"channel_new",source:s,action:r.a.LOAD,chat:Object.assign({},Object(i.d)(e)),timer:Object.assign({},Object(i.y)(o.TimerType.ChatLoadChannelNew),Object(i.x)(n))},Object(i.v)(e)))},l=function(e,n){Object(a.a)(Object.assign({noun:"channel_cached",source:s,action:r.a.LOAD,chat:Object.assign({},Object(i.d)(e)),timer:Object.assign({},Object(i.y)(o.TimerType.ChatLoadChannelCached),Object(i.x)(n))},Object(i.v)(e)))}},"./src/chat/tracking/events/chatView.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return c}),t.d(n,"a",function(){return u}),t.d(n,"d",function(){return l}),t.d(n,"b",function(){return d});var r=t("./src/telemetry/index.ts"),a=t("./src/chat/constants/tracking.ts"),o=t("./src/chat/tracking/eventUtils.ts"),i=t("./src/chat/tracking/commonFields.ts"),s="chat_view",c=function(e){return Object(o.a)(e,function(n,t){Object(r.a)(Object.assign({noun:"chat",source:s,action:a.a.VIEW,correlationId:t,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.d)(e),Object(i.n)(e),Object(i.j)(e),Object(i.b)(n))},Object(i.v)(e)))})},u=function(e,n){Object(r.a)(Object.assign({noun:"chat_message",source:s,action:a.a.SUBMIT,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.i)(e,n),Object(i.d)(e),Object(i.p)(e,n),Object(i.n)(e,0),Object(i.j)(e),Object(i.a)(e))},Object(i.v)(e)))},l=function(e){Object(r.a)(Object.assign({noun:"chat_message_failed",source:s,action:a.a.VIEW,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.i)(e),Object(i.d)(e),Object(i.p)(e),Object(i.n)(e,0),Object(i.j)(e),Object(i.a)(e))},Object(i.v)(e)))},d=function(e,n){Object(r.a)(Object.assign({noun:"report_message",source:s,action:a.a.SUBMIT,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.i)(e,n),Object(i.d)(e),Object(i.p)(e,n),Object(i.n)(e,0),Object(i.j)(e),Object(i.a)(e))},Object(i.v)(e)))}},"./src/chat/tracking/events/contactsList.ts":function(e,n,t){"use strict";t.d(n,"g",function(){return s}),t.d(n,"c",function(){return c}),t.d(n,"f",function(){return u}),t.d(n,"e",function(){return l}),t.d(n,"d",function(){return d}),t.d(n,"b",function(){return f}),t.d(n,"a",function(){return h});var r=t("./src/chat/constants/tracking.ts"),a=t("./src/telemetry/index.ts"),o=t("./src/chat/tracking/commonFields.ts"),i="contacts_list",s=function(e){Object(a.a)(Object.assign({noun:"contacts",source:i,action:r.a.VIEW,chat:Object.assign({},Object(o.t)(e),Object(o.s)(e))},Object(o.v)(e)))},c=function(e,n){Object(a.a)(Object.assign({noun:"contact_add",source:i,action:r.a.CLICK,chat:Object.assign({},Object(o.u)(e),Object(o.s)(e),Object(o.t)(e),Object(o.d)(e),Object(o.c)(e),Object(o.r)(e,n))},Object(o.v)(e)))},u=function(e,n){Object(a.a)(Object.assign({noun:"alert_invalid_user",source:i,action:r.a.VIEW,chat:Object.assign({},Object(o.q)(e),Object(o.s)(e),Object(o.t)(e),Object(o.d)(e),Object(o.r)(e,"search"),Object(o.c)(e))},Object(o.v)(e)))},l=function(e,n,t){Object(a.a)(Object.assign({noun:"alert_invalid_channel",source:i,action:r.a.VIEW,chat:Object.assign({},Object(o.q)(e),Object(o.s)(e),Object(o.t)(e),Object(o.d)(e),Object(o.r)(e,t),Object(o.c)(e))},Object(o.v)(e)))},d=function(e,n,t){Object(a.a)(Object.assign({noun:"create_chat",source:i,action:r.a.CLICK,chat:Object.assign({},Object(o.q)(e,t),Object(o.s)(e),Object(o.t)(e),Object(o.d)(e,t),Object(o.c)(e))},Object(o.v)(e)))},f=function(e,n){Object(a.a)(Object.assign({noun:"close_contacts",source:i,action:r.a.CLICK,chat:Object.assign({},Object(o.u)(e),Object(o.s)(e),Object(o.t)(e),Object(o.d)(e),Object(o.c)(e))},Object(o.v)(e)))},h=function(e){Object(a.a)(Object.assign({noun:"add_to_chat",source:i,action:r.a.CLICK,chat:Object.assign({},Object(o.q)(e),Object(o.l)(e),Object(o.o)(e),Object(o.d)(e),Object(o.c)(e))},Object(o.v)(e)))}},"./src/chat/tracking/events/invitationInbox.ts":function(e,n,t){"use strict";t.d(n,"f",function(){return l}),t.d(n,"c",function(){return d}),t.d(n,"d",function(){return f}),t.d(n,"e",function(){return h}),t.d(n,"b",function(){return p}),t.d(n,"a",function(){return m});var r=t("./src/chat/constants/tracking.ts"),a=t("./src/telemetry/index.ts"),o=t("./src/chat/selectors/channels.ts"),i=t("./src/chat/tracking/eventUtils.ts"),s=t("./src/chat/tracking/commonFields.ts"),c="invitation_inbox",u=function(e,n){var t=Object(o.k)(e),r=t?t.messageId:void 0;return Object.assign({},Object(s.w)(e),Object(s.e)(e),Object(s.f)(e,r),Object(s.h)(e),Object(s.g)(e),Object(s.b)(n))},l=function(e){return Object(i.a)(e,function(n,t){Object(a.a)(Object.assign({noun:"invitation",source:c,action:r.a.VIEW,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},d=function(e){return Object(i.a)(e,function(n,t){Object(a.a)(Object.assign({noun:"invitation_accept",source:c,action:r.a.CLICK,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},f=function(e){return Object(i.a)(e,function(n,t){Object(a.a)(Object.assign({noun:"invitation_decline",source:c,action:r.a.CLICK,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},h=function(e){return Object(i.a)(e,function(n,t){Object(a.a)(Object.assign({noun:"invitation_view_member",source:c,action:r.a.CLICK,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},p=function(e){Object(a.a)(Object.assign({noun:"expand",source:c,action:r.a.CLICK},Object(s.v)(e)))},m=function(e){Object(a.a)(Object.assign({noun:"collapse",source:c,action:r.a.CLICK},Object(s.v)(e)))}},"./src/chat/tracking/events/messagesInbox.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return s});var r=t("./src/chat/constants/tracking.ts"),a=t("./src/telemetry/index.ts"),o=t("./src/chat/tracking/commonFields.ts"),i=function(e){Object(a.a)(Object.assign({noun:"inbox",source:"messages_inbox",action:r.a.VIEW,chat:Object.assign({},Object(o.k)(e),Object(o.z)(e),Object(o.m)(e))},Object(o.v)(e)))},s=function(e){Object(a.a)(Object.assign({noun:"create_chat",source:"messages_inbox",action:r.a.CLICK,chat:Object.assign({},Object(o.k)(e),Object(o.z)(e),Object(o.m)(e))},Object(o.v)(e)))}},"./src/lib/cache/index.ts":function(e,n,t){"use strict";var r=t("./src/lib/constants/index.ts"),a=t("./src/lib/redditId/index.ts"),o=t("./src/lib/logs/console.ts"),i=t("./src/lib/safeJSONParse/index.ts"),s=function(e){var n=void 0;try{if(!(n=localStorage.getItem(e)))return}catch(n){return void Object(o.a)(n,'localStorage cache get("'+e+'") error')}var t=Object(i.a)(n);if(!t)return void Object(o.a)(void 0,'localStorage cache get("'+e+'") error parsing: '+t);if(!(t.expires<Date.now()))return t.value},c=function(e,n,t){var r="number"==typeof t?Date.now()+1e3*t:t.getTime(),a={expires:r,value:n};try{return localStorage.setItem(e,JSON.stringify(a)),!0}catch(n){Object(o.a)(n,'localStorage cache set("'+e+'") error')}return!1},u=s,l=c;t.d(n,"a",function(){return d}),t.d(n,"c",function(){return f}),t.d(n,"b",function(){return h}),t.d(n,"d",function(){return p});var d=(r.B,r._46),f=function(e,n,t){return e+"."+n+(t?"{"+Object(a.b)(t,r._4.ACCOUNT)+"}":"")},h=u,p=l},"./src/lib/messageIframeParent/index.ts":function(e,n,t){"use strict";n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];if(window.parent!==window){var r={type:t?e+"."+t:e,data:n};window.parent.postMessage(JSON.stringify(r),"*")}}},"./src/lib/safeJSONParse/index.ts":function(e,n,t){"use strict";function r(e){try{return JSON.parse(e)}catch(e){}}n.a=r},"./src/reddit/layout/row/Inline/index.tsx":function(e,n,t){"use strict";var r=t("./bundled-modules/styled-components/styled-components.min.js"),a=t.n(r);n.a=a.a.div.withConfig({componentId:"s1cu8rnh-0"})(["display: flex;flex-direction: row;align-items: center;"])}});
//# sourceMappingURL=overlap-5e6d93ac18719d9f90b786f8a65ff41d.e6910acfdc1fa1f9d0a4.js.map